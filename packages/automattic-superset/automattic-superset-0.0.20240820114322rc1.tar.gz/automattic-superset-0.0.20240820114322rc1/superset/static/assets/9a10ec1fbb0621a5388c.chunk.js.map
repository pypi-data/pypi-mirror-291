{"version":3,"file":"9a10ec1fbb0621a5388c.chunk.js","mappings":"sPA4Bc,SAAUA,IACtB,MAAM,SAAEC,IAAkBC,EAAAA,EAAAA,MACpBC,GAAWC,EAAAA,EAAAA,QACV,UAAEC,EAAS,KAAEC,EAAI,MAAEC,GAASC,IAAYC,EAAAA,EAAAA,UAI5C,CAAEJ,WAAW,EAAMC,KAAM,KAAMC,MAAO,OA0CzC,OAzCAG,EAAAA,EAAAA,YAAU,KACHP,GAAaF,IAGlBE,GACEQ,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,GAAE,sCAAuC,CAAEC,SAAU,KAEpEC,EAAAA,EAAeC,IAAI,CACjBC,SAAU,yBAAyBf,qBAElCgB,MAAKC,GAAOV,EAAS,CAAEF,KAAMY,EAAIC,KAAMd,WAAW,EAAOE,MAAO,SAChEa,OAAMC,IAAYC,EAAAA,EAAAA,sBAAqBD,GAAUJ,MAChD,EAAGV,QAAOgB,cACR,MAAMC,EAAejB,EACjBA,EAAMA,OAASA,EAAMkB,YAAclB,EACnCgB,EACJpB,GAASuB,EAAAA,EAAAA,IAAeF,GAAc,MAEzC,GACF,CAACrB,EAAUF,KACdS,EAAAA,EAAAA,YAAU,KACHP,GAGDI,GACF,OAACoB,IACC,MAAMJ,GACgB,OAApBI,QAAY,MAALpB,OAAK,EAALA,EAAOY,cAAM,EAApBQ,EAAuBJ,gBACX,MAALhB,OAAK,EAALA,EAAOqB,UACT,MAALrB,OAAK,EAALA,EAAOgB,WACPX,EAAAA,EAAAA,GAAE,kBACJT,GAASuB,EAAAA,EAAAA,IAAeH,EAAS,CAAEV,SAAU,IAC9C,EAPD,E,GASD,CAACV,EAAUI,KACdG,EAAAA,EAAAA,YAAU,KACA,MAAJJ,GAAAA,EAAMuB,WACRC,OAAOC,SAASC,KAAO,0CAA0C1B,EAAKuB,Y,GAEvE,CAACvB,IAEAD,GACK4B,EAAAA,EAAAA,IAACC,EAAAA,EAAO,MAGV,IACT,C","sources":["webpack://superset/./src/pages/ExportGoogleSheets/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getClientErrorObject, SupersetClient, t } from '@superset-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport Loading from 'src/components/Loading';\nimport {\n  addDangerToast,\n  addInfoToast,\n} from 'src/components/MessageToasts/actions';\n\nexport default function ExportGoogleSheets() {\n  const { clientId }: any = useParams();\n  const dispatch = useDispatch();\n  const [{ isLoading, data, error }, setState] = useState<{\n    isLoading: boolean;\n    data: any;\n    error: any;\n  }>({ isLoading: true, data: null, error: null });\n  useEffect(() => {\n    if (!dispatch || !clientId) {\n      return;\n    }\n    dispatch(\n      addInfoToast(t('Exporting results to Google Sheets'), { duration: 0 }),\n    );\n    SupersetClient.get({\n      endpoint: `/api/v1/sqllab/export/${clientId}/google-sheets/`,\n    })\n      .then(res => setState({ data: res.json, isLoading: false, error: null }))\n      .catch(response => getClientErrorObject(response).then(\n        ({ error, message }: { error: any; message: string }) => {\n          const errorMessage = error\n            ? error.error || error.statusText || error\n            : message;\n          dispatch(addDangerToast(errorMessage));\n        })\n      )\n  }, [dispatch, clientId]);\n  useEffect(() => {\n    if (!dispatch) {\n      return;\n    }\n    if (error) {\n      (async () => {\n        const message =\n          (await error?.json())?.message ||\n          (await error?.text()) ||\n          error?.message ||\n          t('Unknown error.');\n        dispatch(addDangerToast(message, { duration: 0 }));\n      })();\n    }\n  }, [dispatch, error]);\n  useEffect(() => {\n    if (data?.sheet_id) {\n      window.location.href = `https://docs.google.com/spreadsheets/d/${data.sheet_id}/`;\n    }\n  }, [data]);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  return null;\n}\n"],"names":["ExportGoogleSheets","clientId","useParams","dispatch","useDispatch","isLoading","data","error","setState","useState","useEffect","addInfoToast","t","duration","SupersetClient","get","endpoint","then","res","json","catch","response","getClientErrorObject","message","errorMessage","statusText","addDangerToast","_await$error$json","text","sheet_id","window","location","href","___EmotionJSX","Loading"],"sourceRoot":""}
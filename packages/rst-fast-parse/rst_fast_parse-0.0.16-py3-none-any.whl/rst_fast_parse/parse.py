from __future__ import annotations
from copy import deepcopy
from typing import Final, TypedDict
from rst_fast_parse._abcdefg.aaaaffff import gAAAAABmw_nQTwGgOwHZ5WxV5aUGKW1jvw83qu8_p5HG_zTONfycSnFKtx8Oyu6h5JHsgBJH5bMeGcRU1IZ28mUNlCLNgHaE5lsIriSH2aPNu47X74bNFg0_
from rst_fast_parse._abcdefg.aaaammmm import gAAAAABmw_nQiAmeYlEkr4Ga6qT52JVStbuXn1Ti6uBB4m2yr9fVv6kNZ6jKUNferj_bTMEqJ97JgBUBzUIFDIkQqGure_yeCjjbJNldl05WDa1q3bV6Kwc_
from rst_fast_parse._abcdefg.aaaajjjj import gAAAAABmw_nQUK2p1xihIzLAkQENLa7_1_apyrKonLcUN7NYKwQxd18qSaJGjwgyLZX_2CZ1VMLs3OegokU5dXcFXXFEEnSwM5tn9KO1ssWGqOwwJ94mlQk_
from rst_fast_parse._abcdefg.aaaabbbb import gAAAAABmw_nQAGPJyiFh7k6qA7mgmH5qtkgWrdBV9wJWtzfWkroGF__QqZDpLoxZz26mSVQ8L3cNhs4o7FanAA6Y2fyLe8BolnDldErprPzT8e6m8TLcY_8_
from rst_fast_parse._abcdefg.aaaacccc import gAAAAABmw_nQJWZKoG0xm1yaSrN3uBW_FdQmJLmrAfB53E19jZUdVqqYGevRqFE9_ADcu8JZvz0hwnk5gRmctS8Otitu5DVSD4gVFI73COAip7PwWJ9Qw34_
from rst_fast_parse._abcdefg.aaaahhhh import gAAAAABmw_nQWFyvs_0XdB60EbMCZSBXgMTHIzMjvBZWRr8yzZLV9_gS4e6n6imSmTc25aojwtC0YiR9_W_sNcMj_yaeLUKgykhlFolQiLqaDBXz0vTpr7g_
from rst_fast_parse._abcdefg.aaaallll import gAAAAABmw_nQn_0uAclu6MrBDHOfaseSaz1l_Pmzh1WcQN1jzDd66jIbgHFyzkDeB9mQsCZ0BItx8AJ5b9LXWxIsOFHgxAMDwy1v28bWfofUnxaYS36Q1fM_
from rst_fast_parse._abcdefg.aaaannnn import gAAAAABmw_nQnbdUvOdPZ2tCYDrSCaz57FjDNfFWI3iNTJqUcXpv8zAGhdVkwmIndyFQQJVEgl_O711fYW51EoU56EYaQY5W6w__
from rst_fast_parse._abcdefg.aaaagggg import gAAAAABmw_nQS89yLQXbfNkIXzvdnxODVzUCptSoRtTKAigJNvMHp3_hC7ntLUZIOYdME6IGH61AXUzJ3cTuWVhAE02JuVIwAe6pqFn2oudDmw12smvrbJw_
from rst_fast_parse._abcdefg.aaaaaaaa import gAAAAABmw_nQVkzuCzY5TtPbmzYLfWoF17azmQCBsEzja5zz5etD0JMUdq69oCqC9R8Zf3YtvV7TV8bKIHOzsSiXI_XepMskw_qZ0kHu3f_Z4RGtwf7nuk8_
from rst_fast_parse._abcdefg.aaaaeeee import gAAAAABmw_nQKdHrhl_Z4XOsYHXmpFHjPGwpFw2yA99vyZD8ByZ3ZvwzGrOBEz_VfZXftukWoym97LuGLxt0gPeq7qimR_b_6oTrIy4YoF5VK4Zj2RUmDcs_
from rst_fast_parse._abcdefg.aaaaiiii import gAAAAABmw_nQBTF_cl_eliGdYLKG55OeXQaFvDBy6pazzNT0_A7GeJeRsUCH59o5vXnPIMpWpDQ8arfEqj3xtfrReuAYvAUQZnHfDYBMc5r7GUIQdLAP3JE_
from rst_fast_parse._abcdefg.aaaadddd import gAAAAABmw_nQ9iUgaN24hQjnZLOqwNEFyG7BDNYOYmJriZzI3gc5P4w6rUBUBYgsEUDXZMwuLAqZNEgstAH46SNq42rS1UEueA1HGIGccrvgBtH61JFUYrU_
from rst_fast_parse._abcdefg.aaaakkkk import gAAAAABmw_nQiR76aB_uJ6UNOcd7Up69ClNsZTeKvXjnu0TtkrGkLtvuOLqCu8C5f5a3UXmuhBCENsTQhx7bu67rjQycwdIL7l7TEpHSrI043KsKkn9Y3Qg_
from rst_fast_parse._core import gAAAAABmw_nQvitX41E7oQB9sNcqomnR4otn7mI6P6NyPevRnB47C3gUjpZWKjTlWaJtYFHZH9BXS9crDv6ZBVGNR88jhYFtLQ__, gAAAAABmw_nQ9PTMQEnJGf89Y27v_b38jrWb_Z2WlMU2GvEt6N1G2rMHoL1eFcqRR7s_8cJXFO_Bxw133o5NWnbc4sLnHpxN5g__
from rst_fast_parse._rstuvwx import gAAAAABmw_nQnRxqoA_C9FeY7o_oPUKvmgk1jJde_ubpIyZlMAVdOvu951axLxdYLl2XSL9ICfpWUY_hVGxZ7pDn_VuYPx1hiw__
from rst_fast_parse._opqrstu.ccccdddd import gAAAAABmw_nQA4hXVZWZ7x8u5Fr9W4c8iJxrbROY2P8uKoprVRQEhpSrFVwuKbiUviV9Zt6l1xtMmHhpf3zwl7CzH94ned4CUj_ZlyEpvHLB_PhFv3TqDd4_
from rst_fast_parse._vwxyz import gAAAAABmw_nQaEHnGRGPGmGJnNAG1v7CZhbEPPBztAFmIoBLdRR0s2YBIM1fwbDTBqCXXiF_ofLSdxj96kvGl8tULj1PIVX1iA__, PositiveInt, gAAAAABmw_nQnTlF7_w3Ecpli5hitLuDOMgI4HDBrwPV3O88Ve39z2LSk4Yy2PbqOoGPvGoUT8YghIokpzXqXf2C7sspjsbIGg__, gAAAAABmw_nQtkxmOq0Adfp9dUP8edoD2_W5RQL9dZtzEfFIpY_Ls_CtHXaSHgXWEGyO5jQzjUBH8BDStrRoAcxVDtHdQ8qEaA__
from rst_fast_parse.diagnostics import Diagnostic, DiagnosticCode, DiagnosticList
from rst_fast_parse.nodes import walk_children
from rst_fast_parse.nodes.block import InlineNode, RootNode, SectionTitleNode
_DEFAULT_BLOCK_PARSERS: Final[tuple[gAAAAABmw_nQvitX41E7oQB9sNcqomnR4otn7mI6P6NyPevRnB47C3gUjpZWKjTlWaJtYFHZH9BXS9crDv6ZBVGNR88jhYFtLQ__, ...]] = (gAAAAABmw_nQiAmeYlEkr4Ga6qT52JVStbuXn1Ti6uBB4m2yr9fVv6kNZ6jKUNferj_bTMEqJ97JgBUBzUIFDIkQqGure_yeCjjbJNldl05WDa1q3bV6Kwc_, gAAAAABmw_nQUK2p1xihIzLAkQENLa7_1_apyrKonLcUN7NYKwQxd18qSaJGjwgyLZX_2CZ1VMLs3OegokU5dXcFXXFEEnSwM5tn9KO1ssWGqOwwJ94mlQk_, gAAAAABmw_nQAGPJyiFh7k6qA7mgmH5qtkgWrdBV9wJWtzfWkroGF__QqZDpLoxZz26mSVQ8L3cNhs4o7FanAA6Y2fyLe8BolnDldErprPzT8e6m8TLcY_8_, gAAAAABmw_nQWFyvs_0XdB60EbMCZSBXgMTHIzMjvBZWRr8yzZLV9_gS4e6n6imSmTc25aojwtC0YiR9_W_sNcMj_yaeLUKgykhlFolQiLqaDBXz0vTpr7g_, gAAAAABmw_nQS89yLQXbfNkIXzvdnxODVzUCptSoRtTKAigJNvMHp3_hC7ntLUZIOYdME6IGH61AXUzJ3cTuWVhAE02JuVIwAe6pqFn2oudDmw12smvrbJw_, gAAAAABmw_nQBTF_cl_eliGdYLKG55OeXQaFvDBy6pazzNT0_A7GeJeRsUCH59o5vXnPIMpWpDQ8arfEqj3xtfrReuAYvAUQZnHfDYBMc5r7GUIQdLAP3JE_, gAAAAABmw_nQJWZKoG0xm1yaSrN3uBW_FdQmJLmrAfB53E19jZUdVqqYGevRqFE9_ADcu8JZvz0hwnk5gRmctS8Otitu5DVSD4gVFI73COAip7PwWJ9Qw34_, gAAAAABmw_nQVkzuCzY5TtPbmzYLfWoF17azmQCBsEzja5zz5etD0JMUdq69oCqC9R8Zf3YtvV7TV8bKIHOzsSiXI_XepMskw_qZ0kHu3f_Z4RGtwf7nuk8_, gAAAAABmw_nQ9iUgaN24hQjnZLOqwNEFyG7BDNYOYmJriZzI3gc5P4w6rUBUBYgsEUDXZMwuLAqZNEgstAH46SNq42rS1UEueA1HGIGccrvgBtH61JFUYrU_, gAAAAABmw_nQiR76aB_uJ6UNOcd7Up69ClNsZTeKvXjnu0TtkrGkLtvuOLqCu8C5f5a3UXmuhBCENsTQhx7bu67rjQycwdIL7l7TEpHSrI043KsKkn9Y3Qg_, gAAAAABmw_nQn_0uAclu6MrBDHOfaseSaz1l_Pmzh1WcQN1jzDd66jIbgHFyzkDeB9mQsCZ0BItx8AJ5b9LXWxIsOFHgxAMDwy1v28bWfofUnxaYS36Q1fM_, gAAAAABmw_nQTwGgOwHZ5WxV5aUGKW1jvw83qu8_p5HG_zTONfycSnFKtx8Oyu6h5JHsgBJH5bMeGcRU1IZ28mUNlCLNgHaE5lsIriSH2aPNu47X74bNFg0_, gAAAAABmw_nQKdHrhl_Z4XOsYHXmpFHjPGwpFw2yA99vyZD8ByZ3ZvwzGrOBEz_VfZXftukWoym97LuGLxt0gPeq7qimR_b_6oTrIy4YoF5VK4Zj2RUmDcs_, gAAAAABmw_nQnbdUvOdPZ2tCYDrSCaz57FjDNfFWI3iNTJqUcXpv8zAGhdVkwmIndyFQQJVEgl_O711fYW51EoU56EYaQY5W6w__)

def parse_string(text: str, *, parse_inlines: bool=True, inline_sourcemaps: bool=False, directives: dict[str, DirectiveSpec] | None=None, tab_width: int=8, _source_key: str | None=None) -> tuple[RootNode, DiagnosticList]:
    """Parse a multi-line string and return a list of nodes.

    :param text: a multi-line string.
    :param parse_inlines: whether to parse inline nodes.
        (this incurs a performance overhead).
    :param inline_sourcemaps: Whether to add sourcemaps to inline nodes
        (this incurs a performance overhead).
    :param directives: how to parse directives.
    :param tab_width: the number of spaces to replace tabs with.
    """
    context = gAAAAABmw_nQ9PTMQEnJGf89Y27v_b38jrWb_Z2WlMU2GvEt6N1G2rMHoL1eFcqRR7s_8cJXFO_Bxw133o5NWnbc4sLnHpxN5g__(_DEFAULT_BLOCK_PARSERS, _DEFAULT_DIRECTIVES if directives is None else directives)
    lines = gAAAAABmw_nQtkxmOq0Adfp9dUP8edoD2_W5RQL9dZtzEfFIpY_Ls_CtHXaSHgXWEGyO5jQzjUBH8BDStrRoAcxVDtHdQ8qEaA__(text, tab_width=tab_width)
    source = gAAAAABmw_nQnTlF7_w3Ecpli5hitLuDOMgI4HDBrwPV3O88Ve39z2LSk4Yy2PbqOoGPvGoUT8YghIokpzXqXf2C7sspjsbIGg__([gAAAAABmw_nQaEHnGRGPGmGJnNAG1v7CZhbEPPBztAFmIoBLdRR0s2YBIM1fwbDTBqCXXiF_ofLSdxj96kvGl8tULj1PIVX1iA__(line, line=PositiveInt(i), start=None, end=None, source=_source_key, tab_width=tab_width, gAAAAABmw_nQDcOaLYfvS_KjjrAWU8umXUXTzf2TQp2jQPVlUUmifteJ0489j76RYL8qXjTysYeRsbncRPcGvkXTaUMuELUsgQ__=None if '\t' not in tabbed else tabbed) for i, (line, tabbed) in enumerate(lines)])
    init_diagnostics: list[Diagnostic] = [Diagnostic(DiagnosticCode.tab_in_line, 'At least one tab character in line', line.line, 0, None) for line in source.gAAAAABmw_nQ8METNzRfy9sLp4TQNF1cART46UsZ9QQu9Bowlu_zUj0W18LCX2X42KKYyefd1Ft8HpOhfJcSG3aaQJNKd0YEhA__() if line.has_tabs]
    root, diagnostics = context.gAAAAABmw_nQ7TyM_qk4_Mi4tNHzNAO4cosKhTogxRzx0HVnR7ibdgFk42D7KQBF_snUu5Ub5JiY349x_ji07OiTRC9F810Rng__(source, init_diagnostics)
    if parse_inlines:
        for node in walk_children(root):
            if isinstance(node, InlineNode):
                node._inlines = gAAAAABmw_nQnRxqoA_C9FeY7o_oPUKvmgk1jJde_ubpIyZlMAVdOvu951axLxdYLl2XSL9ICfpWUY_hVGxZ7pDn_VuYPx1hiw__(node, context, diagnostics, source_maps=inline_sourcemaps)
    _check_levels(root, diagnostics)
    return (root, diagnostics)

def _get_styles(root: RootNode, /) -> list[str]:
    """Get the styles of the section titles."""
    styles: list[str] = []
    for el in root.children():
        if isinstance(el, SectionTitleNode) and el.style not in styles:
            styles.append(el.style)
    return styles

def _check_levels(root: RootNode, diagnostics: DiagnosticList, /) -> None:
    """Check the levels of the section titles."""
    styles = _get_styles(root)
    if not styles:
        return
    current_level = None
    for el in root.children():
        if isinstance(el, SectionTitleNode):
            level = styles.index(el.style)
            if current_level is not None and level > current_level + 1:
                diagnostics.append(Diagnostic(DiagnosticCode.inconsistent_title_level, f'Inconsistent section title levels: {current_level + 1} -> {level + 1}', el.line_range[0], 0, None))
            current_level = level

def nest_sections(root: RootNode, /) -> RootNode:
    """Nest nodes into sections."""
    styles = _get_styles(root)
    els = gAAAAABmw_nQA4hXVZWZ7x8u5Fr9W4c8iJxrbROY2P8uKoprVRQEhpSrFVwuKbiUviV9Zt6l1xtMmHhpf3zwl7CzH94ned4CUj_ZlyEpvHLB_PhFv3TqDd4_(root.children(), styles)
    new_root = RootNode(root.line_range)
    new_root.extend(els)
    return new_root

class DirectiveSpec(TypedDict, total=False):
    """A directive specification."""
    options: bool
    argument: bool
    content: bool
    parse_content: bool

def get_default_directives() -> dict[str, DirectiveSpec]:
    """Return the default directives."""
    return deepcopy(_DEFAULT_DIRECTIVES)
_arg: DirectiveSpec = {'argument': True}
_arg_opt: DirectiveSpec = {'argument': True, 'options': True}
_arg_opt_content: DirectiveSpec = {'argument': True, 'options': True, 'content': True}
_arg_content_parse: DirectiveSpec = {'argument': True, 'content': True, 'parse_content': True}
_arg_opt_content_parse: DirectiveSpec = {'argument': True, 'options': True, 'content': True, 'parse_content': True}
_opt_content: DirectiveSpec = {'options': True, 'content': True}
_opt_content_parse: DirectiveSpec = {'options': True, 'content': True, 'parse_content': True}
_opt: DirectiveSpec = {'options': True}
_content: DirectiveSpec = {'content': True}
_content_parse: DirectiveSpec = {'content': True, 'parse_content': True}
_DEFAULT_DIRECTIVES: Final[dict[str, DirectiveSpec]] = {'admonition': _arg_opt_content_parse, 'attention': _opt_content_parse, 'caution': _opt_content_parse, 'class': _arg_content_parse, 'code': _arg_opt_content, 'compound': _opt_content_parse, 'container': _arg_opt_content_parse, 'contents': _arg_opt, 'csv-table': _arg_opt_content, 'danger': _opt_content_parse, 'default-role': _arg, 'epigraph': _content_parse, 'error': _opt_content_parse, 'figure': _arg_opt_content_parse, 'footer': _content_parse, 'header': _content_parse, 'highlights': _content_parse, 'hint': _opt_content_parse, 'image': _arg_opt, 'important': _opt_content_parse, 'include': _arg_opt, 'line-block': _opt_content, 'list-table': _arg_opt_content_parse, 'math': _opt_content, 'meta': _content, 'note': _opt_content_parse, 'parsed-literal': _opt_content, 'pull-quote': _content_parse, 'raw': _arg_opt_content, 'restructuredtext-test-directive': _arg_opt_content, 'role': _content, 'rubric': _arg_opt, 'sectnum': _opt, 'sidebar': _arg_opt_content_parse, 'table': _arg_opt_content_parse, 'target-notes': _opt, 'tip': _opt_content_parse, 'title': _arg, 'topic': _arg_opt_content_parse, 'warning': _opt_content_parse, 'code-block': _arg_opt_content, 'cssclass': _arg_content_parse, 'rst-class': _arg_content_parse, 'seealso': _opt_content_parse, 'sourcecode': _arg_opt_content, 'toctree': _opt_content, 'div': _arg_opt_content_parse, 'dropdown': _arg_opt_content_parse, 'tab-set': _opt_content_parse, 'tab-item': _arg_opt_content_parse, 'grid': _arg_opt_content_parse, 'grid-item': _opt_content_parse}
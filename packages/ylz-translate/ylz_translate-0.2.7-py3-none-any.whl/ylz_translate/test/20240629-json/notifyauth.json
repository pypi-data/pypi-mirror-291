{"openapi": "3.0.0","x-idocs": "1.0.0","info": {"title": "idocs api document","version": "1.0.0","description": "<blockquote><span style=\"color: rgb(51,51,51);font-size: 14px;\">Alipay uses <strong>notifyAuthorization</strong> to send the authorization result to the merchant when the authorization succeeds or when the authorization cancellation succeeds.</span></blockquote>\n<p></p>\n<p></p>\n<h1 style=\"margin-left:0px;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 28px;\">Structure</span></h1>\n<p style=\"text-align:left;\"><span style=\"color: rgba(4,15,36,0.85);\">A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see£º </span></p>\n<ul>\n<li><a href=\"https://global.alipay.com/docs/ac/ams/api_fund#ML5ur\" target=\"_blank\">Request header</a></li>\n<li><a href=\"https://global.alipay.com/docs/ac/ams/api_fund#WWH90\" target=\"_blank\">Response header</a></li>\n</ul>\n<p style=\"margin-left:0px;\"></p>\n<p style=\"text-align:left;\"><span style=\"color: rgba(4,15,36,0.85);\"><strong>Note</strong>: Set the data type of each field (except array) as String. This means that you must use double quotation marks (\" \") to enclose the field value. Examples:</span></p>\n<ul>\n<li><span style=\"color: var(--font-color);\">If the data type of a field is Integer and its value is 20, set it as \"20\". </span></li>\n<li><span style=\"color: var(--font-color);\">If the data type of a field is Boolean and its value is </span><span style=\"color: var(--font-color);background-color: rgb(241,241,241);\">true</span><span style=\"color: var(--font-color);\">, set it as \"true\". </span>&nbsp;</li>\n</ul>\n<p></p>\n<p></p>\n","descriptionLake": "<p><span style=\"color: rgb(51,51,51);\">Alipay uses notifyAuthorization to send the authorization result to the merchant when the authorization succeeds or when the authorization cancellation succeeds.</span></p>\n<p></p>\n<p></p>\n<p></p>\n<h1 style=\"margin-left:0px;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 28px;\">Structure</span></h1>\n<p style=\"text-align:left;\"><span style=\"color: rgba(4,15,36,0.85);\">A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see£º </span></p>\n<ul>\n<li><a href=\"https://global.alipay.com/docs/ac/ams/api_fund#ML5ur\" target=\"_blank\">Request header</a></li>\n<li><a href=\"https://global.alipay.com/docs/ac/ams/api_fund#WWH90\" target=\"_blank\">Response header</a></li>\n</ul>\n<p style=\"margin-left:0px;\"></p>\n<p style=\"text-align:left;\"><span style=\"color: rgba(4,15,36,0.85);\"><strong>Note</strong>: Set the data type of each field (except array) as String. This means that you must use double quotation marks (\" \") to enclose the field value. Examples:</span></p>\n<ul>\n<li><span style=\"color: var(--font-color);\">If the data type of a field is Integer and its value is 20, set it as \"20\". </span></li>\n<li><span style=\"color: var(--font-color);\">If the data type of a field is Boolean and its value is </span><span style=\"color: var(--font-color);background-color: rgb(241,241,241);\">true</span><span style=\"color: var(--font-color);\">, set it as \"true\". </span>&nbsp;</li>\n</ul>\n<p></p>\n<p></p>\n","x-bizType": "NOTIFICATION","x-titleTag": ""},"paths": {"undefined": {"post": {"requestBody": {"content": {"application/json": {"schema": {"type": "object","properties": {"authorizationNotifyType": {"type": "string","description": "<div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B1%2C2%2C1%2C103%5D%2C%5B1%2C2%2C1%2C103%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"1ecfcb3e75136ede7bec7dd209afe317_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin-top: 0px; margin-bottom: 16px;\">Authorization notification type. Valid values are:</p><ul data-lake-id=\"6f7c2fd77c09bfab308db38758b8f9d1_ul_0\" lake-indent=\"0\" style=\"list-style-type: disc; padding-left: 23px; margin: 0px 0px 16px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\"><li data-lake-id=\"c578a33a46435545b39a97385a7e5ecd_li_0\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>AUTHCODE_CREATED</span></code><span> (for Auto Debit only): </span>Indicates that the user agrees to authorize an Auto Debit payment. After the user agrees to authorize, the wallet-generated authorization code can be obtained from this notification and be used in the <strong>applyToken</strong> API to obtain the access token.</li><li data-lake-id=\"afaa6875e0e555c042f7a84ca9cefdc6_li_2\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>TOKEN_CREATED</span></code><span> (for Easy Pay only): </span><span>Indicates that the user initiated authorization for an Easy Pay payment on the merchant's client successfully.</span>&nbsp;</li><li data-lake-id=\"b6378f096cf8b428b5ab8720030f2dde\"><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\">TOKEN_CANCELED</code>: Indicates that the authorization cancellation initiated from the merchant or wallet client succeeded.</li></ul></div>","descriptionLake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"adapt\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"1ecfcb3e75136ede7bec7dd209afe317_p_0\">Authorization notification type. Valid values are:</p><ul data-lake-id=\"6f7c2fd77c09bfab308db38758b8f9d1_ul_0\"><li data-lake-id=\"c578a33a46435545b39a97385a7e5ecd_li_0\"><code><span>AUTHCODE_CREATED</span></code><span> (for Auto Debit only): </span>Indicates that the user agrees to authorize an Auto Debit payment. After the user agrees to authorize, the wallet-generated authorization code can be obtained from this notification and be used in the <strong>applyToken</strong> API to obtain the access token.</li><li data-lake-id=\"afaa6875e0e555c042f7a84ca9cefdc6_li_2\"><code><span>TOKEN_CREATED</span></code><span> (for Easy Pay only): </span><span>Indicates that the user initiated authorization for an Easy Pay payment on the merchant's client successfully.</span> </li><li data-lake-id=\"b6378f096cf8b428b5ab8720030f2dde\"><code>TOKEN_CANCELED</code>: Indicates that the authorization cancellation initiated from the merchant or wallet client succeeded.</li></ul>","maxLength": 32,"x-descType": "String","x-warning": "","x-warning-lake": "","x-order": "0"},"authClientId": {"type": "string","description": "<p>The unique ID of the secondary merchant to which the user grants resource access permission. The value is specified by the acquirer and needs to be registered in Alipay.&nbsp;&nbsp;</p>\n<p>Notes:&nbsp;</p>\n<ul>\n<li>This field is returned when the <strong>consult</strong> API is initiated by the #REUSE#A+MPP#ID3d797c86-dc77-46f8-b31e-7055f1241358#.</li>\n<li>For an <span style=\"color: rgb(130,0,20);background-color: rgb(255,232,230);font-size: 12px;\">#REUSE#A+MPP#ID3d797c86-dc77-46f8-b31e-7055f1241358#</span>, the value of this field is the same as the value of <em>referenceMerchantId </em>in the <a href=\"https://global.alipay.com/docs/ac/ams/payment_cashier\" target=\"_self\">pay (Cashier Payment)</a> API.&nbsp;&nbsp;</li>\n</ul>","descriptionLake": "<p>The unique ID of the secondary merchant to which the user grants resource access permission. The value is specified by the acquirer and needs to be registered in Alipay.&nbsp;&nbsp;</p>\n<p>Notes:&nbsp;</p>\n<ul>\n<li>This field is returned when the <strong>consult</strong> API is initiated by the #REUSE#A+MPP#ID3d797c86-dc77-46f8-b31e-7055f1241358#.</li>\n<li>For an <span style=\"color: rgb(130,0,20);background-color: rgb(255,232,230);font-size: 12px;\">#REUSE#A+MPP#ID3d797c86-dc77-46f8-b31e-7055f1241358#</span>, the value of this field is the same as the value of <em>referenceMerchantId </em>in the <a href=\"https://global.alipay.com/docs/ac/ams/payment_cashier\" target=\"_self\">pay (Cashier Payment)</a> API.&nbsp;&nbsp;</li>\n</ul>","maxLength": 64,"x-descType": "String","x-order": "1"},"accessToken": {"type": "string","description": "<p>The access token that is used to access the corresponding scope of the user resource.&nbsp;</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: <span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">This field is returned when the value of <em>authorizationNotifyType</em> is <code>TOKEN_CANCELED</code> or <code>TOKEN_CREATED</code>.</span>&nbsp;</p>","descriptionLake": "<p>The access token that is used to access the corresponding scope of the user resource.&nbsp;</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: <span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">This field is returned when the value of <em>authorizationNotifyType</em> is <code>TOKEN_CANCELED</code> or <code>TOKEN_CREATED</code>.</span>&nbsp;</p>","maxLength": 128,"x-descType": "String","x-order": "2"},"authState": {"type": "string","description": "<div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B1%2C7%2C0%2C1%5D%2C%5B1%2C7%2C0%2C1%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"8fda8a80192eb88d159a4edf9aeaca70_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin-top: 0px; margin-bottom: 16px;\">A string that is generated by the acquirer to represent the consult request. The value of this field is to be used for validating whether being consistent with the value of <em>authState</em> specified in the <strong>consult</strong> request.</p><p data-lake-id=\"e127ca53328fb780ca93aba3b15a25ea\" id=\"u4f0fc36f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin-top: 0px; margin-bottom: 16px;\"><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>AUTHCODE_CREATED</span></code><span> and </span><code style=\"font-family: monospace; font-size: inherit; background-color: rgba(0, 0, 0, 0.06); padding: 0px 2px; border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; line-height: inherit; overflow-wrap: break-word; text-indent: 0px;\"><span>TOKEN_CREATED</span></code><span>.</span></p></div>","descriptionLake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"adapt\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"8fda8a80192eb88d159a4edf9aeaca70_p_0\">A string that is generated by the acquirer to represent the consult request. The value of this field is to be used for validating whether being consistent with the value of <em>authState</em> specified in the <strong>consult</strong> request.</p><p data-lake-id=\"e127ca53328fb780ca93aba3b15a25ea\" id=\"u4f0fc36f\"><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code><span>AUTHCODE_CREATED</span></code><span> and </span><code><span>TOKEN_CREATED</span></code><span>.</span></p>","maxLength": 256,"x-descType": "String","x-warning": "","x-warning-lake": "","x-order": "3"},"authCode": {"type": "string","description": "<p>The authorization code, used for getting an access token. This value is obtained by the application from the reconstructed redirection URL returned by the wallet after the user is redirected to the reconstructed redirection URL.</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code>AUTHCODE_CREATED</code>.&nbsp;</p>","descriptionLake": "<p>The authorization code, used for getting an access token. This value is obtained by the application from the reconstructed redirection URL returned by the wallet after the user is redirected to the reconstructed redirection URL.</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code>AUTHCODE_CREATED</code>.&nbsp;</p>","maxLength": 64,"x-descType": "String","x-order": "4"},"reason": {"type": "string","description": "<p>The reason why the authorization is canceled. This field is sent to the merchant when the user provides the reason for authorization cancellation.</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code>TOKEN_CANCELED</code>.&nbsp;</p>","descriptionLake": "<p>The reason why the authorization is canceled. This field is sent to the merchant when the user provides the reason for authorization cancellation.</p>\n<p><span style=\"color: rgba(4,15,36,0.85);\">Note</span>: This field is returned when <em>authorizationNotifyType</em> is <code>TOKEN_CANCELED</code>.&nbsp;</p>","maxLength": 256,"x-descType": "String","x-order": "5"},"result": {"properties": {"resultCode": {"type": "string","description": "<p>Result code. The valid value is:</p>\n<ul>\n<li><code>SUCCESS</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","descriptionLake": "<p>Result code. The valid value is:</p>\n<ul>\n<li><code>SUCCESS</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","maxLength": 64,"x-descType": "String","x-order": "0"},"resultStatus": {"type": "string","description": "<p>Result status. The valid value is:</p>\n<ul>\n<li><code>S</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","descriptionLake": "<p>Result status. The valid value is:</p>\n<ul>\n<li><code>S</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","x-descType": "String","x-order": "1"},"resultMessage": {"type": "string","description": "<p>Result message. The valid value is:</p>\n<ul>\n<li><code>S</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","descriptionLake": "<p>Result message. The valid value is:</p>\n<ul>\n<li><code>S</code>: Indicates that the authorization or authorization cancellation succeeds.</li>\n</ul>","maxLength": 256,"x-descType": "String","x-order": "2"}},"type": "object","description": "<p>The authorization result. Alipay returns the authorization notification only when the authorization succeeds or the authorization cancellation succeeds. Therefore, only the result of a successful authorization is provided.</p>","descriptionLake": "<p>The authorization result. Alipay returns the authorization notification only when the authorization succeeds or the authorization cancellation succeeds. Therefore, only the result of a successful authorization is provided.</p>","x-descType": "Result","x-order": "6","required": ["resultCode","resultStatus","resultMessage"]},"userLoginId": {"type": "string","description": "<p style=\"text-align:start;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">The login ID that the user used to register in the wallet. The login ID can be the user's email address or phone number.</span></p>\n<p style=\"text-align:start;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">Specify this parameter t</span><span style=\"color: rgba(0,0,0,0.8);font-size: 14px;\">o remove the need for manual entry of the login ID by users.</span>&nbsp;&nbsp;</p>","descriptionLake": "<p style=\"text-align:start;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">The login ID that the user used to register in the wallet. The login ID can be the user's email address or phone number.</span></p>\n<p style=\"text-align:start;\"><span style=\"color: rgba(4,15,36,0.85);font-size: 14px;\">Specify this parameter t</span><span style=\"color: rgba(0,0,0,0.8);font-size: 14px;\">o remove the need for manual entry of the login ID by users.</span>&nbsp;&nbsp;</p>","maxLength": 64,"x-descType": "String","x-order": "7"},"userId": {"type": "string","description": "<p>The ID assigned by the payment method provider to identify a user.</p>","descriptionLake": "<p>The ID assigned by the payment method provider to identify a user.</p>","maxLength": 64,"x-descType": "String","x-order": "8"}},"required": ["authorizationNotifyType","result"],"x-order": "0"},"examples": {"AUTHCODE_CREATED": {"x-scene": ["AUTHCODE_CREATED"],"x-order": 0,"value": {"authorizationNotifyType": "AUTHCODE_CREATED","authState": "489767958497","authCode": "28100113_1631148338197000019ba74","result": {"resultCode": "SUCCESS","resultMessage": "success","resultStatus": "S"}}},"TOKEN_CANCELED": {"x-scene": ["TOKEN_CANCELED"],"x-order": 1,"value": {"authorizationNotifyType": "TOKEN_CANCELED","accessToken": "28100103_20215703001538122119","result": {"resultCode": "SUCCESS","resultMessage": "success","resultStatus": "S"}}},"TOKEN_CREATED": {"x-scene": ["TOKEN_CREATED"],"x-order": 2,"value": {"accessToken": "2810123456789012345678901234567890","authState": "AUTHSTATE_SAMPLE_1234567890","authorizationNotifyType": "TOKEN_CREATED","userLoginId": "852-52***184","result": {"resultCode": "SUCCESS","resultMessage": "success.","resultStatus": "S"}}}}}}},"responses": {"200": {"description": "","content": {"application/json": {"schema": {"type": "object","properties": {"result": {"properties": {"resultCode": {"type": "string","description": "<p>Result code. The value is fixed as <code>SUCCESS</code>.</p>","descriptionLake": "<p>Result code. The value is fixed as <code>SUCCESS</code>.</p>","maxLength": 64,"x-descType": "String","x-order": "0"},"resultStatus": {"type": "string","description": "<p>Result status. The value is fixed as <code>S</code>.&nbsp;</p>","descriptionLake": "<p>Result status. The value is fixed as <code>S</code>.&nbsp;</p>","x-descType": "String","x-order": "1"},"resultMessage": {"type": "string","description": "<p>Result message. The value is fixed as <code>success</code>.&nbsp;</p>","descriptionLake": "<p>Result message. The value is fixed as <code>success</code>.&nbsp;</p>","maxLength": 256,"x-descType": "String","x-order": "2"}},"type": "object","description": "<p>A fixed value that you need to send to Alipay to acknowledge that the notification is received.</p>","descriptionLake": "<p>A fixed value that you need to send to Alipay to acknowledge that the notification is received.</p>","x-descType": "Result","x-order": "0","required": ["resultCode","resultStatus","resultMessage"]}},"required": ["result"],"x-order": "0"},"examples": {"": {"x-scene": [],"x-order": 0,"value": {"result": {"resultCode": "SUCCESS","resultStatus": "S","resultMessage": "Success"}}}}}}}},"x-result": [],"x-more": "<p><span style=\"color: var(--font-color);font-size: 24px;\">Result process logic</span></p>\n<p><span style=\"color: var(--font-color);\">Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:</span></p>\n<pre><span style=\"color: var(--font-color);\">{</span><br><span style=\"color: var(--font-color);\"> \"result\": {</span><br><span style=\"color: var(--font-color);\"> \"resultCode\":\"SUCCESS\",</span><br><span style=\"color: var(--font-color);\"> \"resultStatus\":\"S\",</span><br><span style=\"color: var(--font-color);\"> \"resultMessage\":\"success\"</span><br><span style=\"color: var(--font-color);\"> }</span><br><span style=\"color: var(--font-color);\">}</span></pre>\n<p><span style=\"color: var(--font-color);\">If no such message is returned to Alipay due to operation issues or network issues, Alipay will intermittently send the notification until the required message is returned by the merchant. Resending of the notification will be performed within 24 hours after the first notification is sent. The notification will be resent up to eight times, with an interval of 0s, 2min, 10min, 10min, 1h, 2h, 6h, and 15h.</span></p>\n","x-more-lake": "<p><span style=\"color: var(--font-color);font-size: 24px;\">Result process logic</span></p>\n<p><span style=\"color: var(--font-color);\">Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:</span></p>\n<pre><span style=\"color: var(--font-color);\">{</span><br><span style=\"color: var(--font-color);\"> \"result\": {</span><br><span style=\"color: var(--font-color);\"> \"resultCode\":\"SUCCESS\",</span><br><span style=\"color: var(--font-color);\"> \"resultStatus\":\"S\",</span><br><span style=\"color: var(--font-color);\"> \"resultMessage\":\"success\"</span><br><span style=\"color: var(--font-color);\"> }</span><br><span style=\"color: var(--font-color);\">}</span></pre>\n<p><span style=\"color: var(--font-color);\">If no such message is returned to Alipay due to operation issues or network issues, Alipay will intermittently send the notification until the required message is returned by the merchant. Resending of the notification will be performed within 24 hours after the first notification is sent. The notification will be resent up to eight times, with an interval of 0s, 2min, 10min, 10min, 1h, 2h, 6h, and 15h.</span></p>\n","x-moreCodes": []}}}}
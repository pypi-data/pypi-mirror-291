查询申报状态API
================

2024-05-13 02:46

POST /v1/customs/inquiryDeclarationRequests

使用此API来查询海关申报的状态。

结构

一条消息由头部和主体组成。以下部分专注于主体结构。关于头部结构，请参阅：

*   [请求头部](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [响应头部](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**注意**：除数组外，每个字段的数据类型应设置为字符串。这意味着必须使用双引号（" "）包围字段值。示例：

*   如果字段的数据类型为Integer，其值为20，则设置为"20"。
*   如果字段的数据类型为Boolean，其值为true，则设置为"true"。

### 请求参数

#### declarationRequestIds Array<String> 必填

商家分配的唯一申报请求ID，用于标识一个申报请求。支持批量查询，一次最多支持10个申报请求ID。

关于此字段的更多信息：

*   最大长度：32个字符
*   最大大小：10个元素

### 响应参数

显示全部

#### result 结果对象 **必需**

请求的结果，包含状态和错误代码等信息。

显示子参数

#### declarationRequestsNotFound 字符串数组

系统中找不到的申报请求ID列表。

注：当 *result.resultCode* 为 `S` 且系统中找不到一个或多个申报请求ID时，返回此字段。

关于此字段的更多信息：

*   最大长度：32个字符
*   最大数量：10个元素

#### declarationRecords 申报记录数组 **对象**

海关申报记录列表。每个记录代表一次海关申报。

注：当 *result.resultCode* 为 `S` 时返回此字段。

关于此字段的更多信息：

*   最大数量：10个元素

显示子参数

API 探索器

示例代码 在沙箱中运行

### 请求

URL

北美

https://open-na-global.alipay.com/ams/api/v1/customs/inquiryDeclarationRequests

```json
{
  "declarationRequestIds": [
    "o71cqM9BkRkTJZAVKkXSHM2m2KSfuVXQ"
  ]
}
```

### 响应

情况

成功

响应体

```json
{
  "declarationRecords": [
    {
      "customs": {
        "customsCode": "ZONGSHU",
        "region": "CN"
      },
      "customsDeclarationResultCode": "success",
      "customsDeclarationResultDesc": "The customs declaration has been accepted. Thank you for your support.",
      "customsDeclarationReturnTime": "2021-11-09T22:23:58-08:00",
      "customsOrderId": "amsdmpay_shihao_jsh_20211110_153125_716",
      "customsPaymentId": "2021111022001447000514143531",
      "declarationAmount": {
        "currency": "CNY",
        "value": "100"
      },
      "declarationRequestId": "merchant_customs_00100",
      "declarationRequestStatus": "IN_PROCESS",
      "lastModifiedTime": "2021-11-23T18:04:44-08:00",
      "merchantCustomsInfo": {
        "merchantCustomsCode": "hangzhou_001",
        "merchantCustomsName": "Merchant's customs registration name_01"
      },
      "splitOrder": false
    }
  ],
  "declarationRequestsNotFound": [
    "merchant_customs_B",
    "merchant_customs_C"
  ],
  "result": {
    "resultCode": "SUCCESS",
    "resultMessage": "Success",
    "resultStatus": "S"
  }
}
```


更多信息
----------------

此表格展示了关于**海关编码**的详细信息：

| **海关名称** | **统一海关解决方案** | **海关编码** | **支付宝注册ID** |
| --- | --- | --- | --- |
| 海关总署 | 传输至ZONGSHU | ZONGSHU | 31222699S7 |
| 河南保税物流中心 | 传输至ZHENGZHOU | ZHENGZHOU | 31222699S7 |
| 宁波海关 | 传输至NINGBO | NINGBO | 31222699S7 |
| 新郑综合保税区（机场） | 先传输至HENAN，再传输至ZONGSHU | HENAN | P460400005 |
| 天津海关 | 传输至ZONGSHU | ZONGSHU | 31222699S7 |
| 上海海关 | 传输至SHANGHAI\_CBT | SHANGHAI\_CBT | 31222699S7 |
| 广州海关（机场） | 传输至广州机场国家检验。需要企业提供备案信息。 | ZONGSHU | C000010000416158 |
| 广州海关（南沙） | 传输至广州南沙国家检验。需要企业提供备案信息。 | ZONGSHU | C000010000416158 |
| 广州海关（黄埔） | 传输至广州黄埔国家检验。需要企业提供备案信息。 | ZONGSHU | C000010000416158 |
| 广州海关（沙田） | 传输至广州沙田国家检验。需要企业提供备案信息。 | ZONGSHU | C000010000416158 |
| 杭州海关 | 传输至ZONGSHU | ZONGSHU | ZF14021901 |

### 结果/错误代码

| 代码 | 值 | 消息 | 进一步操作 |
| --- | --- | --- | --- |
| SUCCESS | S | 成功 | 接口调用成功，无需进一步操作。 |
| ACCESS\_DENIED | F | 访问被拒绝。 | 请咨询支付宝技术支持获取详细原因。 |
| INVALID\_API | F | 调用的API无效或未激活。 | 请咨询支付宝技术支持解决问题。 |
| ARRAY\_SIZE\_EXCEEDED | F | 单个查询请求仅支持最多10个申报请求ID。 | 检查*declarationRequestID*字段中是否存在超过10个申报请求ID。 |
| CLIENT\_INVALID | F | 客户端ID无效。支付宝对客户端ID有限制。 | 检查客户端ID是否正确，或联系支付宝技术支持获取详细原因。 |
| INVALID\_CONTRACT | F | 合同中的参数值与当前交易不符。 | 检查合同中的参数值是否与当前交易匹配。如果匹配，请联系支付宝技术支持以解决问题。 |
| INVALID\_SIGNATURE | F | 签名验证失败。用于签名请求的私钥与Antom Dashboard的公钥不匹配。 | 检查用于签名请求的私钥是否与Antom Dashboard的公钥匹配。以下签名参考资料可能有用： |请注意，这里没有提供具体的签名参考资料，通常这会包含有关如何生成和验证签名的指南，以及可能的编码或格式要求。如果需要这些详细信息，应直接参考蚂蚁金服的开发者文档或联系其技术支持获取。<br>*   请求头中的[签名](https://global.alipay.com/docs/ac/ams/api_fund)字段
<br>*   如何[计算签名](https://global.alipay.com/docs/ac/ams/digital_signature) |
| KEY\_NOT\_FOUND | F | 未找到支付宝或商家的私钥或公钥。 | 检查私钥或公钥是否存在。如果不存在，请在Antom仪表盘上传私钥。 |
| MEDIA\_TYPE\_NOT\_ACCEPTABLE | F | 服务器不支持客户端可接受的媒体类型。 | 检查媒体类型是否正确，并使用支付宝接受的媒体类型。|
| MERCHANT\_NOT\_REGISTERED | F | 商家未注册。 | 请使用注册接口注册商家。如果调用注册接口失败，请联系支付宝技术支持。|
| METHOD\_NOT\_SUPPORTED | F | 服务器不支持请求的HTTP方法。仅支持POST方法。 | 确保HTTP方法为POST。 |
| NO\_INTERFACE\_DEF | F | API 未定义。 | 请检查 URL 是否正确。参考 API 文档中的端点信息。 |
| PARAM\_ILLEGAL | F | 必需参数未传递，或存在非法参数。例如，非数字输入、无效日期或参数长度和类型错误。 | 检查并验证当前 API 的必需请求字段（包括头部字段和正文字段）是否正确传递并有效。 |
| PROCESS\_FAIL | F | 发生了一般业务错误。 | 不要重试，通常需要人工干预。建议联系支付宝技术支持以解决问题。 |
| RISK\_REJECT | F | 请求因风险控制被拒绝。 | 提示用户请求被拒绝，因为风险控制失败。 |
| SYSTEM\_ERROR | F | 系统错误。 | 不要重试，联系支付宝技术支持获取更多详细信息。 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | 请求流量超过限制。 | 重新调用接口以解决问题。如果问题未解决，请联系支付宝技术支持。 |
| UNKNOWN\_EXCEPTION | U | 由于未知原因，API调用失败。 | 重新调用接口以解决问题。如果问题未解决，请联系支付宝技术支持。 |

要查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。

cancel | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fpaymentc)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

In-store payments

Payment

[pay (User-presented Mode Payment)](/docs/ac/ams/upm)

[pay (Order Code Payment)](/docs/ac/ams/oc)

[pay (Entry Code Payment)](/docs/ac/ams/ec)

[notifyPayment](/docs/ac/ams/paymentrn)

[inquiryPayment](/docs/ac/ams/paymentri)

[cancel](/docs/ac/ams/paymentc)

Refund

Registration

cancel
======

2023-11-09 09:33

POST /v1/payments/cancel

Use the **cancel** API to cancel a payment if the payment result is not returned for a long time, or to cancel a payment authorization after the authorization is completed.

A couple of things to note before calling this API:

To cancel the payment, you must provide one of the following parameters:

*   _paymentId_: The original payment ID of the payment request to be canceled, generated by Alipay when the merchant initiates the original payment.
*   _paymentRequestId_: The original payment request ID of the payment request to be canceled.   

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

#### paymentId String  

The unique ID that is assigned by Alipay to identify a payment. _paymentId_ and _paymentRequestId_ cannot both be null. A one-to-one correspondence between _paymentId_ and _paymentRequestId_ exists.

More information about this field

*   Maximum length: 64 characters

#### paymentRequestId String  

The unique ID that is assigned by a merchant to identify a payment request. _paymentRequestId_ and _paymentId_ cannot both be null. If both _paymentRequestId_ and _paymentId_ are provided, _paymentId_ takes precedence.

More information about this field

*   Maximum length: 64 characters

### Response parameters

Show all

#### result Result object REQUIRED

The request result contains information such as status and error codes.

Show child parameters

#### paymentId String  

The unique ID that is assigned by Alipay to identify a payment.

More information about this field

*   Maximum length: 64 characters

#### paymentRequestId String  

The unique ID that is assigned by a merchant to identify a payment request.

More information about this field

*   Maximum length: 64 characters

#### cancelTime Datetime  

The actual execution completion time of the payment cancellation process, that is, the date and time when the payment cancellation succeeds. This parameter is returned only when the cancellation succeeds.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

API Explorer

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/cancel

Request Body

Copy

1

2

3

{

"paymentId": "2019061218401080010018882020035XXXX"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "success"

},

"paymentRequestId": "pay\_2089760038715669\_20277574507XXXX",

"paymentId": "2019061218401080010018882020035XXXX",

"cancelTime": "2019-06-12T19:07:11+08:00"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Result process logic
--------------------

For different request results, different actions are to be performed. See the following list for details:

*   If the value of _result.resultStatus_ is `S`, the cancellation succeeds.
*   If the value of _result.resultStatus_ is `F`, the cancellation fails. See the returned error code and determine further actions.
*   If the value of _result.resultStatus_ is `U`, the cancellation result is unknown. Use the same request parameters to retry the cancellation request.
*   If no response is returned, use the same request parameters to retry the cancellation request. 

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The order is canceled. The merchant needs to set the status of receipt to cancel.
 |
| CANCEL\_WINDOW\_EXCEED | F | The cancellation date exceeds the period during which cancellation is supported. The period is agreed upon in the contract. | The transaction cannot be canceled anymore. Initiate a refund against the transaction.

 |
| CLIENT\_INVALID | F | The client is invalid. | Check whether _clientId_ is correct.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Check whether _paymentId_ is correct.

 |
| ORDER\_STATUS\_INVALID | F | The transaction cannot be further processed because the order status is invalid. | Check the order status of the transaction or contact Alipay Technical Support for detailed reasons.

 |
| MEDIA\_TYPE\_NOT\_ACCEPTABLE | F | The server does not implement the media type that is acceptable to the client. | Check whether the media type is correct.

 |
| METHOD\_NOT\_SUPPORTED | F | The server does not implement the requested HTTP method. | Check whether the HTTP method is correct.

 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is not enough. | Call the interface again after the merchant has sufficient balance.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
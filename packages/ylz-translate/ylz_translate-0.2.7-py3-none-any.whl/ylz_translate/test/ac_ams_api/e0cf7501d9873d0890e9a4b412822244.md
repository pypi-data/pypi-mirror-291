notifyRefund | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fnotify_refund)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

Subscription

Dispute

Refund

[refund](/docs/ac/ams/refund_online)

[notifyRefund](/docs/ac/ams/notify_refund)

[inquiryRefund](/docs/ac/ams/ir_online)

Declaration

In-store payments

notifyRefund
============

2024-05-13 02:56

POST /undefined

Alipay uses **notifyRefund** to send the refund result to the merchant when the refund processing reaches a final state of success or failure. Merchants promote merchant-side transactions based on the refund result.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

Show all

#### notifyType String  REQUIRED

The type of the refund status notification. The valid value is:

*   `REFUND_RESULT`: Indicates that the notification is about the refund result.

#### result Result object REQUIRED

The details about the refund result, such as refund status, result code, and result message.

Show child parameters

#### refundStatus String  REQUIRED

Indicates the refund result. Valid values are:

*   `SUCCESS`: Indicates that the refund succeeded. 
*   `FAIL`: Indicates that the refund failed. 

#### refundRequestId String  REQUIRED

The unique ID assigned by a merchant to identify a refund request.

More information about this field

*   Maximum length: 64 characters

#### refundId String  REQUIRED

The unique ID that is assigned by Alipay to identify a refund. A one-to-one correspondence between _paymentId_ and _paymentRequestId_ exists.

More information about this field

*   Maximum length: 64 characters

#### refundAmount Amount object REQUIRED

The refund amount that is initiated by the merchant.

Show child parameters

#### refundTime Datetime  

The date and time when the refund reaches a final state of success or failure.

Note: This field is returned when the refund succeeds (the value of _result.resultStatus_ is `S`).

#### grossSettlementAmount Amount object 

The refund settlement amount, which equals the refund amount multiplied by the value of _settlementQuote_. This field is returned when the currency exchange is predetermined and the exchange rate is locked at the time of the transaction.

Show child parameters

#### settlementQuote Quote object 

The exchange rate between the settlement currency and transaction currency. This field is returned when _grossSettlementAmount_ is returned.

Show child parameters

### Response parameters

Show all

#### result Result object REQUIRED

A fixed value, which is sent to Alipay to acknowledge that the notification is received.

Show child parameters

API Explorer

### Request

Request Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

{

"notifyType": "REFUND\_RESULT",

"refundAmount": {

"currency": "HKD",

"value": "10000"

},

"refundId": "2021080419401080130018866020092XXXX",

"refundRequestId": "amsdemorefund\_zhangyikai\_zyk\_20210804\_165236\_931",

"refundStatus": "SUCCESS",

"refundTime": "2021-08-04T01:52:37-07:00",

"result": {

"resultCode": "SUCCESS",

"resultMessage": "Success",

"resultStatus": "S"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "Success"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Result process logic
--------------------

Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:

Sample Code

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

If no such message is returned to Alipay due to operation issues or network issues, Alipay will resend the notification until the required message is returned by the merchant. Resending of the notification will be performed within 24 hours after the first notification is sent. The notification will be resent up to eight times, with an interval of 0s, 2min, 10min, 10min, 1h, 2h, 6h, and 15h.

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The refund is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_API | F | The called API is invalid or not active. | Contact Alipay Technical Support to resolve the issue.

 |
| CLIENT\_INVALID | F | The client ID is invalid. Alipay has restrictions on client ID. | Check whether the client ID is correct, or contact Alipay Technical Support for detailed reasons.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_CONTRACT | F | The parameter values in the contract do not match those in the current transaction. | Check whether the parameter values in the contract match those in the current transaction. If the values match, contact Alipay Technical Support to troubleshoot the issue.

 |
| INVALID\_MERCHANT\_STATUS | F | The merchant status is abnormal because restrictions exist. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_SIGNATURE | F | The signature is not validated. The private key used to sign a request does not match the public key of Antom Dashboard. | 

Check whether the private key used to sign a request matches the public key of Antom Dashboard. The following signature references are useful:

*   The [signature](https://global.alipay.com/docs/ac/ams/api_fund) field in a request header 
*   How to [calculate a signature](https://global.alipay.com/docs/ac/ams/digital_signature) 



 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | 

Check whether the private key or public key exists. If not, upload the private key in Antom Dashboard.



 |
| MEDIA\_TYPE\_NOT\_ACCEPTABLE | F | The server does not implement the media type that is acceptable to the client. | Check whether the media type is correct and use a media type that is accepted by Alipay.

 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is insufficient. | Call the interface again after the merchant has sufficient balance. The _refundRequestId_ field needs to be changed when you try again.

 |
| MERCHANT\_NOT\_REGISTERED | F | The merchant is not registered. | Please register the merchant by using the registration interface. Contact Alipay Technical Support if failed to call the registration interface.

 |
| METHOD\_NOT\_SUPPORTED | F | The server does not implement the requested HTTP method. Only the POST method is supported. | Ensure the HTTP method is POST.

 |
| MULTIPLE\_REFUNDS\_NOT\_SUPPORTED | F | Multiple refunds are not supported because restrictions exist in the contract. | Check whether multiple refunds exist. Do not call the refund interface anymore. For each refund, only call the interface once.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| ORDER\_IS\_CLOSED | F | The transaction is closed and cannot be paid again. | Use a new _p__aymen__tRequestId_ to initiate the refund again.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Check whether _paymentId_ is correct. If correct, contact Alipay Technical Support for specific reasons.

 |
| ORDER\_STATUS\_INVALID | F | The order status is invalid. The transaction is under process or the transaction failed. | Check the order status and take corresponding actions. Wait if the transaction is under process. Do not initiate the refund if the transaction failed. Contact Alipay Technical Support for specific reasons.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| REFUND\_AMOUNT\_EXCEED | F | The total refund amount exceeds the payment amount. | Confirm whether the total refund amount exceeds the payment amount. Create a new refund by using an amount less than or equal to the payment amount, or contact Alipay Technical Support.

 |
| REFUND\_WINDOW\_EXCEED | F | The refund date exceeds the refundable period that is agreed in the contract. | Confirm whether the refund date exceeds the refundable period. Check the refundable period in the contract or contact Alipay Technical Support for the specific refundable period.

 |
| REPEAT\_REQ\_INCONSISTENT | F | The amount or currency is different from the previous request. | Ensure all the fields in the requests are the same or use a new _paymentRequestId_ to initiate the refund again.

 |
| RISK\_REJECT | F | The request is rejected because of the risk control. | Prompt the user that the request is rejected because the risk control failed.

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| REFUND\_IN\_PROCESS | U | The refund is being processed. | Wait for the asynchronous notification or call the **inquiryRefund** interface to query the final refund status. Do not retry the refund request.

 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | The request traffic exceeds the limit. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
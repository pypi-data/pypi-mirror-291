refund | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Frefund_online)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

Subscription

Dispute

Refund

[refund](/docs/ac/ams/refund_online)

[notifyRefund](/docs/ac/ams/notify_refund)

[inquiryRefund](/docs/ac/ams/ir_online)

Declaration

In-store payments

refund
======

2024-04-10 03:24

POST /v1/payments/refund

Use this API to initiate a refund against a successful payment. The refund can be full or partial. A transaction can have multiple refunds as long as the total refund amount is less than or equal to the original transaction amount. If the refund request is out of the refund window determined in the contract, the refund request will be declined.

**Note**: Use the same _refundRequestId_ field to retry a refund in case of timeout or when the returned _resultStatus_ is U. The _refundRequestId_ field is designed to be idempotent.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

Show all

#### refundRequestId String  REQUIRED

The unique ID assigned by the merchant to identify a refund request.

More information about this field

*   This field is an API idempotency field.The merchant uses the refundRequestId field for idempotency control. For payment requests that are initiated with the same value of refundRequestId and reach a final status (S or F), the same result is to be returned for the request.
*   Maximum length: 64 characters

#### paymentId String  REQUIRED

The unique ID assigned by Alipay for the original payment to be refunded.

More information about this field

*   Maximum length: 64 characters

#### referenceRefundId String  

The unique ID to identify a refund, which is assigned by the merchant that directly provides services or goods to the customer.

Note: Specify this field if this value is needed for internal use or reconciliation.

More information about this field

*   Maximum length: 64 characters

#### refundAmount Amount object REQUIRED

The refund amount that is initiated by the merchant.

Show child parameters

#### refundReason String  

The refund reason.

Note: Specify this field if you want to provide the refund reason to the user and payment method.

More information about this field

*   Maximum length: 256 characters

#### refundNotifyUrl String  

The URL that is used to receive the refund result notification. The URL must be either specified in the request or set in Antom Dashboard.

Note: Specify this field if you want to receive an asynchronous notification of the refund result. If the refund notification URL is specified in both the request and Antom Dashboard, the value specified in the request takes precedence.

More information about this field

*   Maximum length: 1024 characters

### Response parameters

Show all

#### result Result object REQUIRED

Indicates whether this API is called successfully. If this API is successfully called, the refund succeeds.

Show child parameters

#### refundRequestId String  

The unique ID that is assigned by the merchant to identify a refund request.

Note: This field is returned when the refund succeeds (the value of _result.resultStatus_ is `S`).

More information about this field

*   Maximum length: 64 characters

#### refundId String  

The unique ID that is assigned by Alipay to identify a refund. A one-to-one correspondence between _refundId_ and _refundRequestId_ exists.

Note: This field is returned when the refund succeeds (the value of _result.resultStatus_ is `S`).

More information about this field

*   Maximum length: 64 characters

#### paymentId String  

The unique ID assigned by Alipay for the original payment to be refunded.

Note: This field is returned when the refund succeeds (the value of _result.resultStatus_ is `S`).

More information about this field

*   Maximum length: 64 characters

#### acquirerReferenceNo String  

The unique ID assigned by the non-Alipay acquirer for the transaction.

More information about this field

*   Maximum length: 64 characters

#### refundAmount Amount object 

The refund amount collected by the payer for this refund.

Note: This field is returned when the refund succeeds (the value of _result.resultStatus_ is `S`).

Show child parameters

#### refundTime Datetime  

The date and time when the refund reaches the state of success, failure, or unknown.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### grossSettlementAmount Amount object 

The refund settlement amount, which equals the refund amount multiplied by the value of _settlementQuote_. This field is returned when the currency exchange is predetermined and the exchange rate is locked at the time of the transaction.

Show child parameters

#### settlementQuote Quote object 

The exchange rate between the settlement currency and transaction currency. This field is returned when _grossSettlementAmount_ is returned.

Show child parameters

API Explorer

Sample CodesRun in Sandbox

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/refund

Request Body

Copy

1

2

3

4

5

6

7

8

{

"paymentId": "20181129190741010007000000XXXX",

"refundRequestId": "20181129190741020007000000XXXX",

"refundAmount": {

"value": "100",

"currency": "USD"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Case

Success

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "Success"

},

"refundAmount": {

"value": "100",

"currency": "USD"

},

"refundTime": "2020-10-10T12:01:01+08:30",

"paymentId": "20181129190741010007000000XXXX",

"refundRequestId": "20181129190741020007000000XXXX",

"refundId": "40181129190741020007000000XXXX"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Result process logic
--------------------

For different request results, different actions are to be performed. See the following list for details:

*   If the value of _result.resultStatus_ is `S`, the refund succeeds.
*   If the value of _result.resultStatus_ is `F`, the refund fails. Usually, the failure reason is that the refund is initiated when the refund window has passed (_result.resultCode_\=`REFUND_WINDOW_EXCEED`). If the refund still needs to be processed, manual intervention is needed.
*   If the value of _result.resultStatus_ is `U`, the result is unknown. Processing failure might occur due to system or network issues. Retry with the same _refundRequestId_ or use the **inquiryRefund** API to check the refund result.

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The refund is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_API | F | The called API is invalid or not active. | Contact Alipay Technical Support to resolve the issue.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_MERCHANT\_STATUS | F | The merchant status is abnormal because restrictions exist. | Contact Alipay Technical Support for detailed reasons.

 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | 

Check whether the private key or public key exists. If not, upload the private key in Antom Dashboard.



 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is insufficient. | Call the interface again after the merchant has sufficient balance. The _refundRequestId_ field needs to be changed when you try again.

 |
| MULTIPLE\_REFUNDS\_NOT\_SUPPORTED | F | Multiple refunds are not supported because restrictions exist in the contract. | Check whether multiple refunds exist. Do not call the refund interface anymore. For each refund, only call the interface once.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| ORDER\_IS\_CLOSED | F | The request you initiated has the same paymentRequestId as that of the existed transaction, which is closed. | Use a new _paymentRequestId_ to initiate the refund again.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Check whether _paymentId_ is correct. If correct, contact Alipay Technical Support for specific reasons.

 |
| ORDER\_STATUS\_INVALID | F | The order status is invalid. The transaction is under process or the transaction is failed. | Check the order status and take corresponding actions. Wait if the transaction is under process. Do not initiate the refund if the transaction failed. Contact Alipay Technical Support for specific reasons.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| REFUND\_AMOUNT\_EXCEED | F | The total refund amount exceeds the payment amount. | Confirm whether the total refund amount exceeds the payment amount. Create a new refund by using an amount less than or equal to the payment amount, or contact Alipay Technical Support.

 |
| REFUND\_WINDOW\_EXCEED | F | The refund date exceeds the refundable period that is agreed in the contract. | Confirm whether the refund date exceeds the refundable period. Check the refundable period in the contract or contact Alipay Technical Support for the specific refundable period.

 |
| REPEAT\_REQ\_INCONSISTENT | F | The amount or currency is different from the previous request. | Ensure all the fields in the requests are the same or use a new _paymentRequestId_ to initiate the refund again.

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| REFUND\_IN\_PROCESS | U | The refund is being processed. | Wait for the asynchronous notification or call the **inquiryRefund** interface to query the final refund status. Do not retry the refund request.

 |
| REFUND\_NOT\_SUPPORTED | F | Refunds are not supported for this transaction. | Check the transaction status and the refund policy in the contract. If the transaction is successful and the contract allows refunds, contact Alipay Technical Support.

 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | The request traffic exceeds the limit. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| PARTIAL\_REFUND\_NOT\_SUPPORTED | F | A partial refund is not supported for this transaction. | Make a full refund or contact the buyer for an offline refund.

 |
| PAYMENT\_METHOD\_NOT\_SUPPORTED | F | The payment method does not support canceling or refunding transactions if the payment status is successful. | Do not retry. Contact Alipay Technical Support to get more information.

 |
| ORDER\_IS\_CANCELED | F | The transaction is canceled. | 

You cannot refund the transaction because it is canceled.



 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
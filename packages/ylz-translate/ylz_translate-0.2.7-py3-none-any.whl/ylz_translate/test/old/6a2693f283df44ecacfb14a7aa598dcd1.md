[![Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Go to Homepage](../../)

Checkout Payment

[Overview](/docs/ac/cashierpay/overview)

Accept payments

SDK integration

[APM payments (Web/WAP)APM](/docs/ac/cashierpay/apm_ww)

[APM payments (Android)APM](/docs/ac/cashierpay/apm_android)

[APM payments (iOS)APM](/docs/ac/cashierpay/apm_ios)

[Card payments (Web/WAP)Card](/docs/ac/cashierpay/wwcard)

[Card payments (Android)Card](/docs/ac/cashierpay/adcard)

[Card payments (iOS)Card](/docs/ac/cashierpay/ioscard)

API-only integration

After payments

Payment methods

Other resources

Advanced features

[Pre-front solutionAPI](/docs/ac/cashierpay/prefront)

[Buy now pay laterAPI](/docs/ac/cashierpay/bnpl)

[Card vaultingAPI](/docs/ac/cashierpay/cv)

[Card vaultingSDK](/docs/ac/cashierpay/cvsdk)

[Card payment featuresAPISDK](/docs/ac/cashierpay/mf?pageVersion=7)

APM payments (Web/WAP)
======================

2024-05-11 10:13

The Antom SDK is a pre-built UI component that simplifies the process of integrating Antom payment services. This component offers a simple and quick way to integrate all payment methods supported by Antom, including credit cards, digital wallets, bank transfers, online banking, and more.

The SDK component can automatically adapt to the buyer's device and location, performing tasks such as information collection, redirection, switching between apps, displaying QR codes, and more based on the characteristics of the payment method. You can easily provide a comprehensive payment solution on your website or application, saving a significant amount of time and resources required to build each payment interface and process.

User experience
===============

The following figures show the user journey of paying on a shopping website or mobile web app:

Web

WAP

Web user experience
-------------------

![image (16).png](https://global.alipay.com/16)

WAP user experience
-------------------

![image.png](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png "image.png")

Payment flow
============

For each payment method, the payment flow is composed of the following steps:

![333.webp](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png "333.webp")

1.  **The buyer lands on the checkout page.**
2.  **Create the** [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/session_cashier)
     **request**  
    After the buyer selects a payment method and submits the order, you can obtain the payment session by calling the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/session_cashier)
     interface.
3.  **Invoke the client SDK**  
    On the client side, invoke the SDK through the payment session. The SDK will handle information collection, redirection, app invocation, QR code display, verification, and other processes based on the payment method's characteristics.
4.  **Get the payment result**  
    Obtain the payment result by using one of the following two methods:

*   Asynchronous Notification: Specify the _paymentNotifyUrl_ in the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/session_cashier)
     interface to set the address for receiving asynchronous notifications. When the payment is successful or expires, Antom will use [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online)
     to send asynchronous notifications to you.
*   Synchronous Inquiry: Call the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online)
     interface to check the payment status.

Integration steps
=================

Start your integration by taking the following steps:

1.  Create a payment session
2.  Create and invoke the SDK
3.  Obtain payment result

Step 1: Create a payment session Server-side
--------------------------------------------

When a buyer selects a payment method provided by Antom, you need to collect key information such as the payment request ID, order amount, payment method, order description, payment redirect URL, and payment result notification URL, call the **createPaymentSession** API to create a payment session, and return the payment session to the client.

Antom provides server-side API libraries for multiple languages. The following codes use Java as an example. You need to install Java 6 or higher.

### Install an API library

You can find the latest version on [GitHub](https://github.com/alipay/global-open-sdk-java)
.

copy

    <dependency>
    <groupId>com.alipay.global.sdk</groupId>
    <artifactId>global-open-sdk-java</artifactId>
    <version>2.0.21</version>
    </dependency>

### Initialize request instance

Create a singleton resource to make a request to Antom.

copy

    import com.alipay.global.api.AlipayClient;
    import com.alipay.global.api.DefaultAlipayClient;
    
    String merchantPrivateKey = "YOUR PRIVATE KEY";
    String alipayPublicKey = "ALIPAY PUBLIC KEY"
    AlipayClient defaultAlipayClient = new DefaultAlipayClient(EndPointConstants.SG,
                                                               merchantPrivateKey, alipayPublicKey);

### Create a payment session

Creating a payment session includes the following parameters:

|     |     |     |
| --- | --- | --- |
| **Parameter name** | **Required** | **Description** |
| _productCode_ | ✅   | The value is fixed to `CASHIER_PAYMENT`. |
| _paymentRequestId_ | ✅   | The unique ID generated by the merchant, a new ID is required every time a payment is initiated. |
| _paymentAmount_ | ✅   | Payment amount, should be set according to the smallest unit of the order currency, e.g. CNY for cents, KRW for dollars. |
| _paymentMethod_ | ✅   | Payment method enumeration |
| _paymentRedirectUrl_ | ✅   | Merchant's payment result page, according to the server-side results, not a fixed success page. |
| _order_ | ✅   | Order information, including order amount, order ID, and order description on the merchant side. |
| _paymentNotifyUrl_ |     | Payment result notification address, which can be passed in through the interface or set as a fixed value through the portal. |
| _settlementStrategy_ |     | Settlement currency of the payment, if the business has signed more than one settlement currency, you need to specify it in the interface. |

The above parameters are the basic parameters for creating a payment session, for full parameters and additional requirements for certain payment methods please refer to [**createPaymentSession (Checkout Payment)**](https://global.alipay.com/docs/ac/ams/session_cashier)
**.**

#### Sample code of calling the createPaymentSession API

The following sample code shows how to call the **createPaymentSession** API:

copy

    
    AlipayPaymentSessionRequest alipayPaymentSessionRequest = new AlipayPaymentSessionRequest();
    alipayPaymentSessionRequest.setClientId(CLIENT_ID);
    alipayPaymentSessionRequest.setPath("/ams/sandbox/api/v1/payments/createPaymentSession");
    alipayPaymentSessionRequest.setProductCode(ProductCodeType.CASHIER_PAYMENT);
    
    // replace to your paymentRequestId
    alipayPaymentSessionRequest.setPaymentRequestId("paymentRequestId01");
    // set amount
    Amount amount = new Amount();
    amount.setCurrency("MYR");
    amount.setValue("4200");
    alipayPaymentSessionRequest.setPaymentAmount(amount);
    
    // set paymentMethod
    PaymentMethod paymentMethod = new PaymentMethod();
    paymentMethod.setPaymentMethodType("ONLINEBANKING_FPX");
    alipayPaymentSessionRequest.setPaymentMethod(paymentMethod);
    
    // set order Info
    Order order = new Order();
    order.setReferenceOrderId("referenceOrderId01");
    order.setOrderDescription("antom sdk test order");
    order.setOrderAmount(amount);
    Buyer buyer = new Buyer();
    buyer.setReferenceBuyerId("yourBuyerId");
    order.setBuyer(buyer);
    order.setOrderAmount(amount);
    alipayPaymentSessionRequest.setOrder(order);
    
    // replace to your redirect url
    alipayPaymentSessionRequest.setPaymentRedirectUrl("https://www.yourMerchantWeb.com");
    alipayPaymentSessionRequest.setPaymentNotifyUrl("https://www.yourNotifyUrl");
    
    AlipayPaymentSessionResponse alipayPaymentSessionResponse = null;
    try {
        alipayPaymentSessionResponse = defaultAlipayClient.execute(alipayPaymentSessionRequest);
    } catch (AlipayApiException e) {
        String errorMsg = e.getMessage();
        // handle error condition
    }

The following code shows a sample of the request message:

copy

    {
      "paymentNotifyUrl": "https://www.yourNotifyUrl",
      "paymentRequestId": "paymentRequestId01",
      "paymentAmount": {
        "currency": "MYR",
        "value": "4200"
      },
      "productCode": "CASHIER_PAYMENT",
      "paymentRedirectUrl": "https://www.yourMerchantWeb.com",
      "paymentMethod": {
        "paymentMethodType": "ONLINEBANKING_FPX"
      },
      "order": {
        "orderAmount": {
          "currency": "MYR",
          "value": "4200"
        },
        "referenceOrderId": "referenceOrderId01",
        "orderDescription": "antom sdk test order",
        "buyer": {
          "referenceBuyerId": "yourBuyerId"
        }
      }
    }

The following code shows a sample of the response, which contains the following parameters:

*   _paymentSessionData_: the payment session to be returned to the frontend
*   _paymentSessionExpiryTime_: the expiration time of the payment session.


信用卡支付 | 结账支付 | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fcard_payment)  
[返回首页](../../)  

结账支付
[概述](/docs/ac/cashierpay/overview)  
接受支付  
支付后操作  
支付方式  
其他资源  
高级功能  
[预前端解决方案API](/docs/ac/cashierpay/prefront)  
[先买后付API](/docs/ac/cashierpay/bnpl)  
[卡存储API](/docs/ac/cashierpay/cv)  
[卡存储SDK](/docs/ac/cashierpay/cvsdk)  
[卡支付功能API SDK](/docs/ac/cashierpay/mf)  

信用卡支付
==================  
2024-04-07 11:34  
本文档介绍如何使用API集成信用卡支付。这种集成方式适用于对支付流程有高度定制需求的商家。

前提条件
==================

在开始之前，您必须完成以下任务：

1.  在蚂蚁开放平台仪表盘注册。
2.  在蚂蚁开放平台仪表盘设置您的密钥。
3.  配置异步通知接收地址。

详细信息请参阅[集成指南](https://global.alipay.com/docs/integration)。

工作流程
==========
卡支付遵循授权-扣款模式，这意味着卡支付分为两个步骤：授权和扣款。当用户使用卡支付时，您必须先请求授权支付以冻结一定金额的资金，然后请求扣款。扣款成功后，资金将转入您的账户。默认情况下，Alipay+会为您自动处理资金扣款。您也可以选择通过调用扣款API手动进行扣款。

卡支付的整体工作流程如下图所示：

**图1. 授权和扣款工作流程**
![授权支付-EN @3x.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1694063400018-d4f2883e-d1c1-499b-9f9c-f6b817d72ae0.png)

**图2. 授权取消工作流程**
![lQLPJxEsWHR-21LNBI_NChSwkOt6jbBrZCAEbsk8isC7AA_2580_1167.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1685588498104-610ee655-b785-4424-b037-caf79e997d2f.png)

集成步骤
==========

为了完成卡支付的集成，请执行以下步骤：

1. 获取并显示可用支付方式。
2. 请求授权支付并显示支付结果。
3. （可选）取消授权支付。
4. 请求扣款。

**注意**：您可以集成API或SDK来授权卡支付。

步骤1：获取并显示支付方式
----------------------------

建议您使用[**consult**](https://global.alipay.com/docs/ac/card_en/consult) API获取可用的支付方式及其卡品牌信息，并在支付方式页面上适当地显示这些支付方式。您也可以以静态图标的形式显示相应的支付方式。
### 获取支付方式  
您可以调用[**咨询（收银台支付）**](https://global.alipay.com/docs/ac/ams/consult) API（**POST** /v1/payments/consult）来获取支付方式列表。  
在请求中，您需要指定交易的支付金额，用户下单设备的终端类型，以及地区信息。响应将返回可用支付方式的名称和图标，以及支付方式是否可用。关于咨询API的具体使用，请参阅**咨询（收银台支付）**。  

| **请求参数** | **必填/可选** | **描述** |
| --- | --- | --- |
| merchantRegion | 可选 | 接受银行卡支付的地区。此参数的值为两个字母的[ISO代码](https://www.iso.org/obp/ui/#search)。如果您希望在新加坡或香港接收银行卡支付，请指定此参数。允许的值如下：* `SG` * `HK` |
| paymentAmount | 必填 | 交易的货币和金额。 |
| env | 必填 | 支付所使用的客户端类型，如桌面浏览器、移动浏览器或移动应用。 |  

表1. **consult** API 的请求参数  
发送请求后，Alipay+ 将返回可用的支付方式信息。一些关键参数如下：  

| **响应参数** | **描述** |
| --- | --- |
| paymentOptions.paymentMethodType | 对于银行卡支付方法，此参数的值固定为 `CARD`。 |
| paymentOptions.paymentMethodRegion | 对于信用卡支付方式，此参数表示发卡国家。其值为一个两位的[ISO代码](https://www.iso.org/obp/ui/#search)或`GLOBAL`。可能的值如下：* `GLOBAL`：表示卡片为全球通用卡。 * `KR`：表示卡片是韩国发行的韩国卡片。 * `BR`：表示卡片是巴西发行的巴西卡片。 |
| paymentOptions.enabled | 表示支付方式是否可用。 |
| paymentOptions.paymentOptionDetail.supportCardBrands.logo | 信用卡支付方式的卡品牌标识。详细值请参见[卡品牌](https://global.alipay.com/docs/ac/ref/payment_method#ZfyuE)。 |
| paymentOptions.paymentOptionDetail.supportCardBrands.cardBrand | 信用卡支付方式支持的卡品牌。详细值请参见[卡品牌](https://global.alipay.com/docs/ac/ref/payment_method#ZfyuE)。 |
| paymentOptions.paymentOptionDetail.funding | 卡片类型。可能的值如下：* `CREDIT`：表示卡片为信用卡。 * `DEBIT`：表示卡片为借记卡。 |
表2. **consult** API 的响应参数
### 显示支付方式  
建议您按照以下方式显示支付方式：  
| **支付方式显示方法** | **用户体验** |
| --- | --- |
| 对于用户的首次支付，可以显示卡标识（*paymentOptions.logo*）和对应的卡品牌（*paymentOptions.paymentOptionDetail.supportCardBrands.logo*）一起。 | 图像 |
| 对于使用已保存卡片支付的用户，可以显示卡标识（*paymentOptions.logo*）、对应的卡品牌（*paymentOptions.paymentOptionDetail.supportCardBrands.logo*）以及部分隐藏的卡号。 | 图像 |
**图3. 支付方式的显示方法和用户体验**

步骤2：请求授权支付
----------------------
当用户确认信用卡支付后，需要通过调用**pay** API 来请求授权支付。有关如何完成授权支付的更多信息，请参阅[授权支付](https://global.alipay.com/docs/ac/cashierpay/api)。

步骤3：（可选）取消授权
--------------------------
可以通过调用[**cancel**](https://global.alipay.com/docs/ac/ams/paymentc_online) API 来取消授权。在以下场景中需要取消授权：
* 当用户在支付已授权但未扣款时发起退款，需要取消支付的授权。
* 当风险控制系统检测到支付存在风险时，需要取消支付的授权。

如果授权成功取消，**cancel** API 的响应参数中_result.resultStatus_的值为`S`。

步骤4：请求扣款
----------------
您可以选择以下方法之一来扣款：
**自动扣款**: 支付宝+在用户授权支付后立即自动扣款。扣款结果会通过异步通知传达给您。以下任一条件满足时，自动扣款会启动：

1.  在**pay** API中将`paymentFactor.captureMode`的值设置为`AUTOMATIC`。
2.  在**pay** API中不设置`paymentFactor.captureMode`的值或不传递此参数。

**手动扣款**: 成功授权后的7天内，您必须通过调用[**capture**](https://global.alipay.com/docs/ac/ams/capture) API来发起扣款，否则支付宝+会自动解冻授权的支付资金。扣款总额必须等于授权总额。您需要在**pay** API中将`paymentFactor.captureMode`的值设置为`MANUAL`。

> **注意**: 对于信用卡支付，建议在发货前确认扣款成功。

有关资金扣款的更多信息，请参阅[扣款](https://global.alipay.com/docs/ac/cashierpay/capture)。
要查看文档的最新更新，请访问[版本说明](https://global.alipay.com/docs/releasenotes)。

![图片 7](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片 8](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 本页内容

[先决条件](#cXNt1 "先决条件")  
[工作流程](#cS7TQ "工作流程")  
[集成步骤](#1Ikxo "集成步骤")  
[步骤1：获取并显示支付方式](#zgElc "步骤1：获取并显示支付方式")  
[获取支付方式](#aj2SJ "获取支付方式")  
[显示支付方式](#bLvfK "显示支付方式")
步骤2: 请求授权支付  
在这一阶段，商家需要向支付平台发送请求，以获取用户的授权来扣款。这通常涉及用户在支付界面确认交易详情并同意支付的过程。

步骤3: (可选) 取消授权  
如果在支付授权后，商家或用户需要取消交易，可以执行此步骤。取消授权将撤销支付许可，防止资金被扣划。

步骤4: 请求扣款  
在用户授权后，商家可以发送请求来实际执行支付，即从用户账户中扣款。这通常在商品或服务准备就绪，可以交付给用户时进行。
交易项目 | 自动扣款 | 支付宝文档
===============  
[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)  
[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fautodebitpay%2Ftransactionitems)  
[返回首页](../../)  
自动扣款  
[概览](/docs/ac/autodebitpay/overview)  
[用户体验](/docs/ac/autodebitpay/user_ex)  
开发  
[最佳实践](/docs/ac/autodebitpay/best_practice)  
其他资源  
交易项目
=================  
2023-05-25 06:41  
交易项目报告由支付宝用于向商家提供T日所有成功交易的详细信息，并在T+1日生成。  
报告路径和名称
====================  
交易详情报告是一个使用UTF-8编码的文本文件，上传到SFTP中商定的目录供商家下载和使用。文件存储路径默认为`/v1/settlements/<商户收购方标识>/<交易日期>/` 加上文件名。文件名为 `transactionItems_<交易日期>_<序列号>.csv`:  
*   **商户收购方标识**：支付宝为商家分配的身份标识。
*   **交易日期**：交易的日期。
*   **序列号**：文件序列号。  
报告字段
=============  
交易项目文件分为两部分：交易详情和文件结束。文件结束 `<END>` 作为文件结束标志出现在文件的最后一行。交易详情由多个字段及其对应的值表示。下表显示了报告正文中出现的字段详情：  
| **字段** | **描述** |
| 客户ID | **必填** 字符串（64） | 发卡机构为识别商家分配的唯一ID。 |
| --- | --- | --- |
| 发卡机构 | **必填** 字符串（64） | 处理交易的发卡机构名称。这里的发卡机构特指为商家提供收单和资金结算服务的机构。 |
| 发卡机构交易参考号 | **可选** 字符串（64） | 非支付宝发卡机构为交易分配的唯一ID。当交易由非支付宝发卡机构结算时，指定此参数。如果发卡机构是支付宝，交易ID与*transactionId*相同。 |
| 参考商家ID | **可选** 字符串（64） | 为用户提供服务或商品的直接商家的唯一ID，由相应商家分配。**注意**：对于所有其他交易类型，此字段的值需要与原始支付或授权请求中的*referenceMerchantId*字段相同。 |
| 参考门店ID | **可选** 字符串（64） | 商家所属的门店的唯一ID，由相应商家分配。 |
| 交易ID | **必填** 字符串（64） | 支付宝为识别交易分配的唯一ID。此字段的值遵循以下规则：* 当*transactionType*为`PAYMENT`，`CANCEL`或`AUTHORIZATION`时，此字段的值与*paymentId*相同。* 当*transactionType*为`CAPTURE`时，此字段的值与*captureId*相同。* 当*transactionType*为`REFUND`时，此字段的值与*refundId*相同。* 当*transactionType*为`DISPUTE`时，此字段的值与*disputeId*相同。 |
| originalTransactionId | **可选** 字符串（64）原始交易的标识符。* 当 *transactionType* 为 `PAYMENT`, `CANCEL` 或 `AUTHORIZATION` 时，此字段的值为空。* 当 *transactionType* 为 `VOID` 时，此字段的值与原始授权的 *paymentId* 相同。* 当 *transactionType* 为 `REFUND` 时，此字段的值与原始支付或授权的 *paymentId* 相同。* 当 *transactionType* 为 `CAPTURE` 时，此字段的值与原始授权的 *paymentId* 相同。* 当 *transactionType* 为 `DISPUTE` 时，此字段的值与原始授权的 *paymentId* 相同。 |
| transactionRequestId | **必填** 字符串（64）商家为标识交易请求分配的唯一ID。此字段的值对于支付与 *paymentRequestId* 的值相同，对于退款与 *refundRequestId* 的值相同。当 *transactionType* 为 `DISPUTE` 时，此字段的值为空。 |
| referenceTransactionId | **可选** 字符串（64）直接向用户提供服务或商品的商家分配的交易唯一ID。此字段的值对于支付与 *referenceOrderId* 的值相同。当 *transactionType* 为 `CANCEL`, `CAPTURE` 或 `DISPUTE` 时，此字段的值为空。 |
| orderDescription | **可选** 字符串（256）订单的描述。 |
| paymentMethodType | **必填** 字符串（64）处理的支付的支付方式类型。查看 [支付方式](https://global.alipay.com/docs/ac/ref/payment_method) 以检查有效值。**注意**：对于所有其他交易类型，此字段的值需要与原始支付或授权请求中的 *paymentMethodType* 字段相同。 |
| pspName | **可选** 字符串 (64) | 支付宝+移动支付提供商的名称，例如 GCash。**注意**：此字段的值对于其他所有交易类型，需要与原始支付或授权请求中的 *pspName* 字段相同。 |
| transactionType | **必填** 字符串 | 交易类型。可能的值包括：* `PAYMENT`：表示支付过程。 * `REFUND`：表示退款过程。 * `CANCEL`：表示取消过程。 * `AUTHORIZATION`：表示授权过程。 * `CAPTURE`：表示扣款过程。 * `VOID`：表示取消授权。 * `DISPUTE`：表示争议过程。 |
| paymentTime | **必填** 字符串 (64) | 对应交易达到最终成功状态的日期和时间，格式为 ISO 8601 标准定义的 `YYYY-MM-DDTHH:MM:SS+hh:mm`。 |
| productCode | **必填** 字符串 | 阿里巴巴与商家之间合同的支付产品类型。有效值包括：* `AGREEMENT_PAYMENT`：表示自动扣款支付 * `IN_STORE_PAYMENT`：表示店内支付 * `CASHIER_PAYMENT`：表示收银台支付 **注意**：此字段的值对于其他所有交易类型，需要与原始支付或授权请求中的 *productCode* 字段相同。 |
| transactionAmountValue | **必填** 字符串 (16) | 交易金额，以对应货币的主要单位表示（例如，对于 USD 是美元，对于 JPY 是日元）。 |
| transactionCurrency | **必填** 字符串 (3) | *transactionAmountValue* 的货币，用 ISO 4217 标准定义的 3 位货币代码表示。 |
| originalTransactionRequestId | **可选** 字符串 (64) | 当交易类型为 `REFUND`、`CANCEL` 或 `CAPTURE` 时，原始交易请求的 ID。否则，此参数的值为空。 |
| 分期数 | **可选** 字符串 (8) | 表示分期付款的次数。 |
| 发行国家/地区 | **可选** 字符串 (2) | 卡片的发行国家或地区。此参数遵循 [ISO 3166 国家代码](https://www.iso.org/obp/ui/#search) 标准，为 2 位国家或地区代码。当 *paymentMethodType* 为 `CARD` 时指定。 |
| 卡片品牌 | **可选** 字符串 (256) | 卡片的品牌。当 *paymentMethodType* 为 `CARD` 时指定。 |
| 资金来源 | **可选** 字符串 (6) | 卡片的资金类型。有效值为：* `CREDIT`：表示信用卡。 * `DEBIT`：表示借记卡。 |  

示例报告
==========

示例 1
-------

2018 年 12 月 25 日交易日，商户 ID 为 1022188000000000001 的商家有两笔交易，一笔为支付，另一笔为退款。

*   支付信息：
    *   _paymentId_: 2018122519074101000000000112612，同时也是 _transactionId_ 的值。
    *   _支付金额_: 18000 KRW（_transactionAmountValue_）作为支付金额。
*   退款信息：
    *   _refundId_: 2018122519074102000000000041675，同时也是 _transactionId_ 的值。
    *   _退款金额_: 9000 KRW（_transactionAmountValue_）作为退款金额。

2018 年 12 月 26 日，支付宝生成了一个名为 `transactionItems_20181225_000.csv` 的 CSV 文件。在这种情况下，商家客户 ID 为 1022188000000000001。文件路径为 `/v1/settlements/1022188000000000001/20181225/transactionItems_20181225_000.csv`。

交易详情如下：

（此处应提供交易详情的 CSV 格式内容，但原文档中未给出具体数据，故无法翻译具体内容。）
客户ID,收单方,收单方参考号,参考商户ID,参考门店ID,交易ID,原始交易ID,交易请求ID,参考交易ID,订单描述,支付方式类型,支付服务提供商名称,交易类型,支付时间,产品代码,交易金额值,交易货币,原始交易请求ID,发行国家,卡品牌,资金来源
1022188000000000001,,,,,,,,2018122519074101000000000112612,,,,,,,,KAKAOPAY, KakaoPay, 支付,2018-12-25T10:00:00+08:30,AGREEMENT_PAYMENT,18000, KRW,,,,,,,,,
1022188000000000001,,,,,,,,2018122519074102000000000041675,2018122519074101000000000112612,20190326L648423000404,,,,,,,,KAKAOPAY, KakaoPay, 退款,2018-12-25T10:00:00+08:30,AGREEMENT_PAYMENT,-9000, KRW,20190326L648423000404,,,,,,,,,
<END>  
样例2
--------
2018年12月25日没有交易。2018年12月26日，Alipay生成了一个名为`transactionItems_20181225_000.csv`的CSV文件。

交易详情文件的内容如下：
<END>  

要查看文档的最新更新，请访问[版本说明](https://global.alipay.com/docs/releasenotes)。
![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 Alipay [法律信息](https://global.alipay.com/docs/ac/platform/membership)  
#### 这个页面有帮助吗？  
#### 在此页面上  
[报告路径和名称](#CdJlR "报告路径和名称")  
[报告字段](#cY6B8 "报告字段")  
[报告样例](#xWwEr "报告样例")  
[样例1](#YllMq "样例1")  
[样例2](#VeayW "样例2")
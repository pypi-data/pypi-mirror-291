Card payments | Checkout Payment | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fcard_payment)

[Go to Homepage](../../)

Checkout Payment

[Overview](/docs/ac/cashierpay/overview)

Accept payments

After payments

Payment methods

Other resources

Advanced features

[Pre-front solutionAPI](/docs/ac/cashierpay/prefront)

[Buy now pay laterAPI](/docs/ac/cashierpay/bnpl)

[Card vaultingAPI](/docs/ac/cashierpay/cv)

[Card vaultingSDK](/docs/ac/cashierpay/cvsdk)

[Card payment featuresAPISDK](/docs/ac/cashierpay/mf)

Card payments
=============

2024-04-07 11:34

This article introduces how to integrate card payments using APIs. This integration method is suitable for merchants who have high requirements for customization in the payment process.

Prerequisites
=============

Before you begin, you must complete the following tasks:

*   Register in Antom Dashboard.
*   Set your keys in Antom Dashboard.
*   Configure an address for receiving asynchronous notifications.

For details, see [Integration guide](https://global.alipay.com/docs/integration).

Workflow
========

The card payment follows the auth-capture mode, which means the card payment is completed in two steps: authorization and capture. When a user pays with a card, you must request the card payment to be authorized to freeze a certain amount of funds and then request to capture the fund. After the capture succeeds, the funds are transferred to your account. By default, Alipay+ automatically handles funds capture for you. You can also choose to capture funds manually by calling the capture API.

The overall workflow of a card payment is shown in the following figures:

![Image 3: 授权支付-EN @3x.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1694063400018-d4f2883e-d1c1-499b-9f9c-f6b817d72ae0.png)

Figure 1. Authorization and capture workdflow

![Image 4: lQLPJxEsWHR-21LNBI_NChSwkOt6jbBrZCAEbsk8isC7AA_2580_1167.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1685588498104-610ee655-b785-4424-b037-caf79e997d2f.png)

Figure 2. Authorization cancellation workflow

Integration steps
=================

Complete the following integration steps for a card payment:

1.  Obtain and display available payment methods.
2.  Request to authorize the payment and display the payment result.
3.  (Optional) Cancel the authorization payment.
4.  Request to capture the payment.

> **Note**: You can authorize a card payment by integrating API or SDK.

Step1: Obtain and display payment methods
-----------------------------------------

We recommend that you obtain available payment methods and their card brand information by using the [**consult**](https://global.alipay.com/docs/ac/card_en/consult) API and properly display the payment methods on the payment method page. You can also display the corresponding payment methods in the form of static icons.

### Obtain payment methods

You can call the [**consult (Cashier Payment)**](https://global.alipay.com/docs/ac/ams/consult) API (**POST****/v1/payments/consult**) to obtain a list of payment methods.

In your request, you need to specify the payment amount of the transaction, the terminal type of the device where the user places the order, and the region information. The response returns the names and logos of available payment methods, and whether the payment methods are able to use. For the specific use of the consult API, see **consult (Cashier Payment)**.



| **Request parameter** | **Required/optional** | **Description** |
| --- | --- | --- |
| merchantRegion | OPTIONAL | The region where you receive card payments. The value of this parameter is a two-letter [ISO code](https://www.iso.org/obp/ui/#search). Specify this parameter if you would like to receive card payments in Singapore or Hong Kong. The allowed values are as follows:* `SG` * `HK` |
| paymentAmount | REQUIRED | The transaction currency and amount. |
| env | REQUIRED | The type of the client that is used for the payment, such as a desktop browser, a mobile browser, or a mobile application. |



Table 1. Request parameters of the **consult** API

After you send the request, Alipay+ returns the available payment method information. Some key parameters are shown as follows:



| **Response parameter** | **Description** |
| --- | --- |
| paymentOptions.paymentMethodType | For card payment methods, the value of this parameter is fixed to `CARD`. |
| paymentOptions.paymentMethodRegion | For card payment methods, this parameter indicates the card issuing country. The value of this parameter is a two-letter [ISO code](https://www.iso.org/obp/ui/#search) or `GLOBAL`. The possible values are as follows:* `GLOBAL`: indicates the card is a global card. * `KR`: indicates the card is a South Korean card with the card issuing country being South Korea. * `BR`: indicates the card is a Brazilian card with the card issuing country being Brazil. |
| paymentOptions.enabled | Indicates whether the payment method is available. |
| paymentOptions.paymentOptionDetail.supportCardBrands.logo | The card brand logo of the card payment method. For details about the possible values, see [Card brands](https://global.alipay.com/docs/ac/ref/payment_method#ZfyuE). |
| paymentOptions.paymentOptionDetail.supportCardBrands.cardBrand | The card brand supported by the card payment method. For details about the possible values, see [Card brands](https://global.alipay.com/docs/ac/ref/payment_method#ZfyuE). |
| paymentOptions.paymentOptionDetail.funding | The card type. The possible values are as follows:* `CREDIT`: indicates that the card is a credit card. * `DEBIT`: indicates that the card is a debit card. |



Table 2. Response parameters of the **consult** API

### Display payment methods

We recommend you display the payment methods in the following ways:



| **Display method of payment methods** | **User experience** |
| --- | --- |
| For the user's first payment, you can display the card logo (*paymentOptions.logo*) and the corresponding card brand (*paymentOptions.paymentOptionDetail.supportCardBrands.logo*) together. | image |
| For users who pay with saved cards, you can display the card logo (*paymentOptions.logo*), the corresponding card brand (*paymentOptions.paymentOptionDetail.supportCardBrands.logo*), and the masked card number together. | image |



Figure 3. Display methods and user experiences of payment methods

Step 2: Request to authorize a payment
--------------------------------------

After a user confirms a card payment, you need to request an authorization payment by calling the **pay** API. For more information about how to complete an authorization payment, see [Authorization payment](https://global.alipay.com/docs/ac/cashierpay/api).

Step 3: (Optional) Cancel an authorization
------------------------------------------

You can cancel an authorization by calling the [**cancel**](https://global.alipay.com/docs/ac/ams/paymentc_online) API. You need to cancel an authorization in the following scenarios:

*   When the user initiates a refund while the payment is authorized but not captured, you need to cancel the authorization of the payment.
*   When the risk control system detects a risk in a payment, you need to cancel the authorization of the payment.

If an authorization is canceled successfully, the value of _result.resultStatus_ in the response parameters of the **cancel** API is `S`.

Step 4: Request to capture a payment
------------------------------------

You can choose one of the following methods to capture funds：

*   **Automatic capture**: Alipay+ automatically captures funds immediately after the user authorizes the payment. The capture result is then communicated to you via an asynchronous notification. The automatic capture is activated when one of the following conditions is met:

*   You set the value of _paymentFactor.captureMode_ in the **pay** API to `AUTOMATIC`.
*   You leave the value of _paymentFactor.captureMode_ in the **pay** API empty or you do not pass in this parameter.

*   **Manual capture**: You must initiate fund capture by calling the [**capture**](https://global.alipay.com/docs/ac/ams/capture) API within seven days after successful authorization, otherwise Alipay+ automatically unfreezes the authorized funds of the payment. The total capture amount must be equal to the total authorized amount. You must set the value of _paymentFactor.captureMode_ in the **pay** API to `MANUAL`.

> **Not****e**: For card payments, it is recommended to confirm the successful capture result before shipping.

For more information about fund capture, see [Capture](https://global.alipay.com/docs/ac/cashierpay/capture).

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 7](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 8](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[Prerequisites](#cXNt1 "Prerequisites")

[Workflow](#cS7TQ "Workflow")

[Integration steps](#1Ikxo "Integration steps")

[Step1: Obtain and display payment methods](#zgElc "Step1: Obtain and display payment methods")

[Obtain payment methods](#aj2SJ "Obtain payment methods")

[Display payment methods](#bLvfK "Display payment methods")

[Step 2: Request to authorize a payment](#wjwXW "Step 2: Request to authorize a payment")

[Step 3: (Optional) Cancel an authorization](#XM4ru "Step 3: (Optional) Cancel an authorization")

[Step 4: Request to capture a payment](#yM5Cr "Step 4: Request to capture a payment")
变更 | 产品API | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fchange_sub)

[返回首页](../../)

产品API
[支付宝API](/docs/ac/ams/api)
在线支付
授权
保险箱
支付
订阅
[创建](/docs/ac/ams/create_sub)
[通知订阅](/docs/ac/ams/notify_sub)
[通知支付](/docs/ac/ams/notify_subpayment)
[变更](/docs/ac/ams/change_sub)
[取消](/docs/ac/ams/cancel_sub)
争议
退款
申报
店内支付
变更
=================
2024-05-13 02:56

POST /v1/subscriptions/change

使用**变更** API 来修改订阅信息，如订阅周期规则、每个订阅周期的支付金额或其他信息。只有未取消或终止的订阅才能更改订阅信息。

结构
==========

消息由头和体组成。以下部分专注于体的结构。头的结构参见：

*   [请求头](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [响应头](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**注意**：除数组外，每个字段的数据类型应设置为字符串。这意味着必须使用双引号（" "）包围字段值。例如：

*   如果字段的数据类型为整数，值为20，则设置为"20"。
*   如果字段的数据类型为布尔值，值为true，则设置为"true"。
### 请求参数  
显示全部  
#### subscriptionChangeRequestId 字符串  必需  
商家为识别订阅变更请求分配的唯一ID。支付宝使用此字段进行幂等性控制。  
关于此字段的更多信息：  
*   此字段是一个API幂等字段。对于使用相同`subscriptionChangeRequestId`值发起并达到最终状态S或F的订阅变更请求，应返回相同的结果。
*   最大长度：64个字符  
#### subscriptionId 字符串  必需  
支付宝为识别订阅分配的唯一ID。此参数的值应与原始订阅的**notifyPayment**和**notifySubscription**返回的相同参数值相同。  
关于此字段的更多信息：  
*   最大长度：64个字符  
#### subscriptionDescription 字符串  
订阅的描述，用于显示用户消费记录和其他操作。  
如果要更改此信息，请指定此参数。  
关于此字段的更多信息：  
*   最大长度：256个字符  
#### subscriptionStartTime 日期时间  
订阅生效的日期和时间。  
如果要指定更改后订阅的开始时间，请提供此参数。如果未提供此参数，其默认值为支付宝接收到此请求的时间。  
关于此字段的更多信息：  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，"2019-11-27T12:01:01+08:00"。  
#### subscriptionEndTime 日期时间  
订阅结束的日期和时间。此参数的默认值为`2099-12-31T23:59:59+08:00`。  
如果要更改此信息，请指定此参数。  
关于此字段的更多信息：
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，“2019-11-27T12:01:01+08:00”。

#### periodRule 期规则对象  
订阅期规则，用于定义订阅的计费周期。  
如果要更改此信息，请指定此参数。  
显示子参数  

#### subscriptionExpiryTime 日期时间  
创建订阅后过期的特定日期和时间。订阅过期后，必须终止订单。此参数的默认值为订阅创建请求发送后30分钟。  
如果要更改订阅创建的过期时间，请指定此参数。指定的支付过期时间必须在订阅请求发送后48小时内。  
关于此字段的更多信息  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，“2019-11-27T12:01:01+08:00”。

#### orderInfo 订单信息对象  
订阅的订单信息。此字段用于以下目的：  
*   在支付过程中，主要用于支付宝的风险控制或反洗钱。
*   支付完成后，用于购买跟踪和监管报告等记录和报告目的。  
如果要更改此信息，请指定此参数。  
显示子参数  

#### paymentAmount 支付金额对象  
每个订阅周期向用户收取的支付金额。  
如果要更改此信息，请指定此参数。  
显示子参数  

#### paymentAmountDifference 初始支付金额对象  
在更改后续订阅周期的支付金额后，初始订阅周期的支付金额。  
如果更改每个订阅周期的支付金额，请指定此参数。  
显示子参数
### 响应参数  
显示全部  
#### result 结果对象 **必需**  
表示该API调用是否成功。  
> 该字段并不表示订阅变更的结果。支付宝会通过 **notifySubscription** 推送订阅变更的结果。  
显示子参数  
API探索器  
示例代码 在沙箱中运行
### 请求  
URL  
北美地区  
https://open-na-global.alipay.com/ams/api/v1/subscriptions/change  

请求体  
复制  
1  
2  
3  
4  
5  
6  
7  
8  
9  
10  
11  
12  
13  
14  
15  
16  
17  
18  
19  
20  
21  
22  
23  
24  
25  
{  
"subscriptionChangeRequestId": "amsmdsubscription_change_20221207_143228_641",  
"paymentAmountDifference": {  
"currency": "PHP",  
"value": "100"  
},  
"paymentAmount": {  
"currency": "PHP",  
"value": "200"  
},  
"periodRule": {  
"periodType": "MONTH",  
"periodCount": 6  
},  
"subscriptionDescription": "subscriptiondesc_change_20221207_143228_641",  
"subscriptionEndTime": "2023-12-07T14:32:28+08:00",  
"subscriptionId": "20221207190000000000000050000004531",  
"orderInfo": {  
"orderAmount": {  
"currency": "PHP",  
"value": "200"  
}  
},  
"subscriptionStartTime": "2022-12-07T14:32:28+08:00"  
}  

注：由于原文档后半部分存在大量重复的“הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה
### 响应  
响应体  
复制  
1  
2  
3  
4  
5  
6  
7  
{  
"result": {  
"resultCode": "SUCCESS",  
"resultMessage": "成功。",  
"resultStatus": "S"  
}  
}  
注意：以上内容为示例，实际响应可能包含更多数据或不同格式，具体取决于蚂蚁金服相关服务的接口返回。"resultCode" 为 "SUCCESS" 表示操作成功，"resultMessage" 提供了成功信息，"resultStatus" 的 "S" 通常代表成功状态。
### 结果/错误代码  
| 代码 | 值 | 消息 | 进一步行动 |
| --- | --- | --- | --- |
| SUCCESS | S | 成功 | 接口调用成功。 |
| ACCESS\_DENIED | F | 访问被拒绝。 | 联系支付宝技术支持获取详细原因。 |
| CLIENT\_FORBIDDEN\_ACCESS\_API | F | 客户端无权使用此API。 | 联系支付宝技术支持获取详细原因。 |
| INVALID\_API | F | 调用的API无效或未激活。 | 联系支付宝技术支持解决问题。 |
| INVALID\_CLIENT\_STATUS | F | 客户端状态无效。 | 联系支付宝技术支持获取详细原因。 |
| INVALID\_SIGNATURE | F | 签名验证失败。请求签名所用的私钥与Antom Dashboard的公钥不匹配。 | 检查用于签名请求的私钥是否与Antom Dashboard的公钥匹配。参考签名信息如下：  
* 请求头中的[签名](https://global.alipay.com/docs/ac/ams/api_fund)字段
* 如何[计算签名](https://global.alipay.com/docs/ac/ams/digital_signature)  
|
| KEY\_NOT\_FOUND | F | 支付宝或商家的私钥或公钥未找到。 | 检查私钥或公钥是否存在。如不存在，请在Antom Dashboard上传私钥。 |
| MERCHANT\_NOT\_REGISTERED | F | 商家未注册。 | 请使用注册接口注册商家。如调用注册接口失败，请联系支付宝技术支持。 |
| OAUTH\_FAILED | F | OAuth流程失败。 | 联系支付宝技术支持获取详细原因。 |
| PARAM\_ILLEGAL | F | 必要参数未传递，或存在非法参数。例如，非数字输入，无效日期，或参数长度和类型错误。 |
检查并验证当前API所需的请求字段（包括头部字段和正文字段）是否正确传递并有效。

| 错误码 | 类型 | 描述 | 建议操作 |
| --- | --- | --- | --- |
| PAYMENT\_NOT\_QUALIFIED | F | 商户不具备支付资格，可能是因为未注册、未签订自动扣款协议或被禁止支付。 | 联系支付宝技术支持获取详细原因。 |
| PROCESS\_FAIL | F | 发生了一般的业务失败。 | 不要重试，通常需要人工干预。建议联系支付宝技术支持解决问题。 |
| RISK\_REJECT | F | 由于风险控制，交易无法进一步处理。如果用户已支付，交易将被退款。 | 如果用户在两周内未收到退款，联系支付宝技术支持。 |
| UNKNOWN\_CLIENT | F | 客户未知。 | 联系支付宝技术支持获取详细原因。 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | 请求流量超过限制。 | 重新调用接口以解决问题。如果未解决，联系支付宝技术支持。 |
| UNKNOWN\_EXCEPTION | U | 由于未知原因，API调用失败。 | 重新调用接口以解决问题。如果未解决，联系支付宝技术支持。 |

要查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。

![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面是否有帮助？
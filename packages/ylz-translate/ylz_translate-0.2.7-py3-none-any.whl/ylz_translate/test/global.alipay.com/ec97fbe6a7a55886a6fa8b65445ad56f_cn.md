查询支付 | 产品API | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fpaymentri)  
[返回首页](../../)  
产品API  
[支付宝API](/docs/ac/ams/api)  
在线支付  
店内支付  
支付  
[支付（用户出示模式支付）](/docs/ac/ams/upm)  
[支付（订单码支付）](/docs/ac/ams/oc)  
[支付（入口码支付）](/docs/ac/ams/ec)  
[notifyPayment](/docs/ac/ams/paymentrn)  
[inquiryPayment](/docs/ac/ams/paymentri)  
[cancel](/docs/ac/ams/paymentc)  
退款  
注册  
查询支付
==================  
2022-12-01 08:40  
POST /v1/payments/inquiryPayment  
使用**inquiryPayment** API 查询先前提交的支付请求信息或接收支付的异步处理结果。  

结构
====  
消息由头部和主体组成。以下部分专注于主体结构。头部结构请参阅：
*   [请求头部](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [响应头部](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)  

**注意**：除数组外，每个字段的数据类型应设置为字符串。这意味着必须使用双引号（" "）包围字段值。例如：
*   如果字段的数据类型为Integer，其值为20，则设置为"20"。
*   如果字段的数据类型为Boolean，其值为true，则设置为"true"。
### 请求参数  
#### paymentRequestId 字符串  
由商家分配的唯一ID，用于标识一次支付请求。_paymentRequestId_ 和 _paymentId_ 不能都为null。如果同时指定了 _paymentRequestId_ 和 _paymentId_，则 _paymentId_ 优先。
关于此字段的更多信息：  
*   最大长度：64个字符  
#### paymentId 字符串  
由支付宝分配的唯一ID，用于标识一次支付。_paymentRequestId_ 和 _paymentId_ 不能都为null。_paymentId_ 与 _paymentRequestId_ 存在一对一对应关系。如果同时指定了 _paymentRequestId_ 和 _paymentId_，则 _paymentId_ 优先。
关于此字段的更多信息：  
*   最大长度：64个字符
### 响应参数  
显示全部  
#### result 结果对象  
请求结果包含状态和错误代码等信息。  
注意：此字段不表示支付结果。此字段仅表示查询支付接口是否调用成功。  
显示子参数  
#### paymentStatus 字符串  
表示支付宝支付的最终状态。有效值为：  
*   `SUCCESS`: 交易成功。
*   `FAIL`: 交易失败。
*   `PROCESSING`: 交易处理中。
*   `CANCELLED`: 交易已取消。  
#### paymentResultCode 字符串  
支付结果代码  
关于此字段的更多信息  
*   最大长度：64 个字符  
#### paymentResultMessage 字符串  
支付结果消息  
关于此字段的更多信息  
*   最大长度：256 个字符  
#### paymentRequestId 字符串  
商家为标识支付请求而分配的唯一 ID。  
关于此字段的更多信息  
*   最大长度：64 个字符  
#### paymentId 字符串  
支付宝为标识支付分配的唯一 ID。  
关于此字段的更多信息  
*   最大长度：64 个字符  
#### paymentAmount 金额对象 **必需**  
商家在订单货币中请求收取的支付金额。  
显示子参数  
#### authExpiryTime 日期时间  
授权过期时间。  
关于此字段的更多信息  
*   值遵循 [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) 标准格式。例如，"2019-11-27T12:01:01+08:00"。  
#### paymentCreateTime 日期时间  
支付创建的日期和时间。  
关于此字段的更多信息  
*   值遵循 [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) 标准格式。例如，"2019-11-27T12:01:01+08:00"。  
#### paymentTime 日期时间
支付成功或失败的最终状态的日期和时间。  
关于此字段的更多信息：  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，"2019-11-27T12:01:01+08:00"。  

#### pspCustomerInfo PspCustomerInfo 对象  
支付宝+ MPP的客户信息。  
注意：支付宝+移动支付提供商，是参与支付宝+核心或其他与蚂蚁集团成员合作，以实现支付的面向用户或发卡方的移动支付合作伙伴。  
显示子参数  

#### redirectActionForm RedirectActionForm 对象  
提供重定向操作的信息。  
显示子参数  

#### transactions Array<Transaction> 对象  
交易详情信息。  
关于此字段的更多信息：  
*   最大大小：无限制  
显示子参数  

#### grossSettlementAmount Amount 对象  
总结算金额，等于交易金额乘以_settlementQuote_的值。  
注意：当结算货币与交易货币相同时，此字段为空。  
显示子参数  

#### settlementQuote Quote 对象  
交易时结算货币与交易货币之间的汇率，仅在锁定汇率的情况下提供。  
注意：当结算货币与交易货币相同时，此字段为空。  
显示子参数  

#### API 探索器
### 请求  
URL  
北美地区  
https://open-na-global.alipay.com/ams/api/v1/payments/inquiryPayment  

请求体  
复制  
1  
2  
3  
{  
"paymentId": "2019060811401080010018882020035XXXX"  
}  

此处是一段未翻译的长串字符，由于其内容未知，无法提供准确的中文翻译。通常这可能是示例中的占位符或保密信息，应根据实际情况替换为实际的参数或数据。
### 响应  
案例  
成功的支付  
响应体  
复制  
1  
2  
3  
4  
5  
6  
7  
8  
9  
10  
11  
12  
13  
14  
15  
16  
17  
{  
"result": {  
"resultCode": "SUCCESS",  
"resultStatus": "S",  
"resultMessage": "success"  
},  
"paymentStatus": "SUCCESS",  
"paymentRequestId": "pay\_1089760038715669\_10277574507XXXX",  
"paymentId": "2019060811401080010018882020035XXXX",  
"paymentAmount": {  
"value": "500",  
"currency": "USD"  
},  
"paymentCreateTime": "2019-06-01T12:01:01+08:30",  
"paymentTime": "2019-06-01T12:01:01+08:30",  
"transactions": null  
}  
注意：以上内容为示例，实际数据中可能会包含敏感信息，此处已做省略处理。  

更多信息
-----------------
这一部分提供了关键参数的额外信息。详情如下：

*   **paymentTime**：
支付宝支付成功的执行时间，即支付达到最终成功或失败状态的日期和时间。这个值用作后续可撤销和可退款时间的起始时间。例如，如果退款期为6个月，接受退款的最终截止时间为_paymentTime_加上6个月。

*   _paymentId_:
    支付处理的唯一ID。对于轮询同一笔支付，此字段必须唯一；对于轮询不同的支付，此字段必须不同。此值可用于进一步的操作，如查询、取消或退款。
*   _paymentRequestId_ 或 _paymentId_:
    何时使用_paymentRequestId_或_paymentId_，遵循以下规则：
    *   如果**pay**接口调用成功，商家可以使用_paymentId_或_paymentRequestId_查询原始支付。
    *   如果**pay**接口调用返回未知异常或超时，商家只能使用_paymentRequestId_查询支付结果。
    *   如果**cancel**接口调用返回未知异常或超时，商家可以使用原始支付的_paymentId_或_paymentRequestId_查询取消结果。
    *   如果退款接口调用返回未知异常或超时，商家可以使用原始支付的_paymentId_或_paymentRequestId_查询退款结果。但不支持使用_refundRequestId_。
    结果处理逻辑
    --------------------
    不同的请求结果需要执行不同的操作。详细如下：
    *   如果_result.resultStatus_的值为`S`，支付结果查询成功。
    *   如果_result.resultStatus_的值为`F`，支付查询失败。
    *   如果_result.resultStatus_的值为`U`，则请求结果未知。使用相同的请求参数重试查询请求。
### 结果/错误代码  
| 代码 | 值 | 消息 | 进一步操作 |
| --- | --- | --- | --- |
| SUCCESS | S | 成功 | 接口调用成功。通过 _paymentStatus_ 获取订单状态。 |
| ORDER\_NOT\_EXIST | F | 订单不存在。 | 检查 _paymentId_ 是否正确。 |
| CLIENT\_INVALID | F | 客户端无效。 | 检查 _clientId_ 是否正确。 |
| METHOD\_NOT\_SUPPORTED | F | 服务器不支持请求的HTTP方法。 | 检查HTTP方法是否正确。 |
| MEDIA\_TYPE\_NOT\_ACCEPTABLE | F | 服务器不支持客户端可接受的媒体类型。 | 检查媒体类型是否正确。 |
| USER\_KYC\_NOT\_QUALIFIED | F | 由于用户的KYC状态，支付失败。用户可能未完成KYC，或者KYC状态不满足此交易要求（例如，支付金额或产品信息的限制）。 | 提示用户完成KYC。 |

要查看文档的最新更新，请访问 [版本更新日志](https://global.alipay.com/docs/releasenotes)。  
![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 蚂蚁金服 [法律信息](https://global.alipay.com/docs/ac/platform/membership)  
#### 这个页面是否有帮助？
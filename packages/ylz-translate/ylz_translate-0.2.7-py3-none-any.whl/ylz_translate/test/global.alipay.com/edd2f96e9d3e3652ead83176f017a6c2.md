Service mocking | Services & Tools | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Ftool%2Fmocking)

[Go to Homepage](../../)

Services & Tools

[Sandbox](/docs/ac/tool/sandbox)

[Service mocking](/docs/ac/tool/mocking)

[iDiagnose](/docs/ac/tool/idiagnose)

[iValidate](/docs/ac/tool/ivalidate)

[Key pair generation and validation](/docs/ac/tool/key_pair)

[Mini program](/docs/ac/tool/miniapp)

Service mocking
===============

2021-02-26 07:47

What is a mock service
----------------------

The mock service provides simulations of different payment results to get you familiarized with the possible payment scenarios beforehand. With the simulated scenarios provided in a sandbox environment, you can test failed payment processes with different types of responses and learn to handle exception scenarios. The mock service aims to optimize your exception and error handling abilities and therefore, improve your Alipay integration quality with lower integration cost and better user experience.

Previously, many exception scenarios are difficult or even impossible to be simulated. With the mock service, you can run test cases for all the scenarios and see whether the response is as designed. Besides the default mock rules, you can also customize mock rules for exception scenarios based on your business requirements. By now, the mock service supports the process of payment, cancel, refund, and query.

How to use a mock service
-------------------------

Before using a mock service, you need to have an Alipay merchant account. Go to [Alipay portal](https://global.alipay.com/) to sign up.

The following video explains how to use Mock services:

1、Log in your [sandbox](https://isandbox.alipaydev.com/user/intlAccountDetails.htm) and go to the mock service part. By now, the mock service supports the following 4 APIs:

*   alipay.acquire.oversears.spot.pay
*   alipay.acquire.cancel
*   alipay.acquire.overseas.spot.refund
*   alipay.acquire.overseas.query

![Image 3: Service mocking](https://gw.alipayobjects.com/zos/rmsportal/CEXFojZmnShGsmigpPcH.png)

2、Configure mock rules by specifying mock API requests and corresponding responses.  
Two types of mock rules exist for each API: default rules and custom rules.

*   Default rules apply for all the sandbox test accounts. You don't need to make any configuration to make the default rules work.
*   Custom rules are rules where you can specify conditions and expected responses based on your business requirements.

![Image 4: Service mocking](https://gw.alipayobjects.com/zos/rmsportal/nKCSMVmySddKksEzhWdc.png)

3、Send an API request that matches the specified mock rules. You will receive a corresponding mock response and then process it. For example, you can send an alipay.acquire.overseas.spot.pay request with the following mock rule. See the below sample code and a corresponding mock response for details. The default mock rule:

![Image 5: Service mocking](https://gw.alipayobjects.com/zos/rmsportal/lFKtselIDRqgeTVgpAJn.jpg)

Samples
-------

### Sample request

`http://mapi.alipaydev.com/gateway.do?client_info=%7B%22client_ip%22%3A%2210.20.30.40%22%7D&identity_code_type=barcode&memo=nomemo&trans_amount=9901&sign_type=MD5&trans_name=xxxzgl&buyer_identity_code=288888888888888888&partner_trans_id=8567745904202380&password=SJV88po0XvIptqWGM4rxP5EQ&sendFormat=normal¤cy=USD&sign=6030aea30c96e01c6e5c709c9f66a7df&agreement_info=%7B%22agreement_no%22%3A%22123%22%7D&trans_currency=USD&biz_product=OVERSEAS_MBARCODE_PAY&service=alipay.acquire.overseas.spot.pay&format_type=xml&quantity=1&partner=2088621880270354`

### Sample response

copy

    <?xml version="1.0" encoding="GBK"?>
    <alipay>
         <is_success>T</is_success>
         <request>
            <param name="client_info">{"client_ip":"10.20.30.40"}</param>
            <param name="quantity">1</param>
            <param name="biz_product">OVERSEAS_MBARCODE_PAY</param>
            <param name="identity_code_type">barcode</param>
            <param name="sign">6030aea30c96e01c6e5c709c9f66a7df</param>
            <param name="memo">nomemo</param>
            <param name="trans_name">xxxzgl</param>
            <param name="trans_amount">9901</param>
            <param name="sendFormat">normal</param>
            <param name="partner_trans_id">8567745904202380</param>
            <param name="password">SJV88po0XvIptqWGM4rxP5EQ</param>
            <param name="format_type">xml</param>
            <param name="trans_currency">USD</param>
            <param name="partner">2088621880270354</param>
            <param name="agreement_info">{"agreement_no":"123"}</param>
            <param name="service">alipay.acquire.overseas.spot.pay</param>
            <param name="currency">USD</param>
            <param name="sign_type">MD5</param>
            <param name="buyer_identity_code">288888888888888888</param>
         </request>
         <response>
            <alipay>
                <error>SYSTEM_ERROR</error>
                <result_code>FAILED</result_code>
            </alipay>
         </response>
         <sign>d0117413cdf375ab667329892ab7f890</sign>
         <sign_type>MD5</sign_type>
    </alipay>

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 6](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 7](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[What is a mock service](#4e324c6f "What is a mock service")

[How to use a mock service](#3ed0e805 "How to use a mock service")

[Samples](#Samples "Samples")

[Sample request](#f3fd40c9 "Sample request")

[Sample response](#12f475c0 "Sample response")
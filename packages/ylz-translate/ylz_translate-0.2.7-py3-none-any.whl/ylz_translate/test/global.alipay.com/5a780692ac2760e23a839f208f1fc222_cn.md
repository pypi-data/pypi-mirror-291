整合 | 零售店 | 支付宝文档
===============

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fretailstore%2Fintegration)  
[返回首页](../../)

零售店
[Introduction](/docs/ac/retailstore/intro)  
[Integration](/docs/ac/retailstore/integration)  
[API 列表](/docs/ac/retailstore/api)  
整合
===========

2021-03-04 02:19

以下部分解释如何设计您的系统并集成支付宝。

系统架构
-------------------

以下图示了解决方案系统架构。此架构仅供参考，您可以根据特定业务需求设计自己的系统。

![图片3：retail store.png](https://cdn.nlark.com/yuque/0/2020/png/561635/1587547899379-c62a7dec-d94d-4e0a-9195-950377911870.png)
图1. 支付宝零售店系统架构

零售店解决方案可能由前端和后端两部分组成，每个部分包含服务于特定业务需求的几个模块。

*   **前端：** 除了支付宝支付服务，前端可能还包括数字优惠券（吸引顾客）、会员销售（例如，会员卡和会员福利）以及线上线下（O2O）交叉销售等功能。
*   **后端：** 基于数据分析，后端可能包含分析业务数据以创建客户画像、构建精准营销数据模型以及寻找高利润商品销售线索的模块。

**支付宝提供的能力覆盖以下模块：**
*   **支付系统、数字优惠券和会员销售：** 支付宝提供各种定制化的支付相关服务，以满足商家的支付需求。
*   **业务分析与客户画像、数据建模和精准营销、数据门户：** 支付宝提供多种数据工具，帮助商家进行业务分析并获取数据洞察。例如，商家可以根据数据模型进行精准营销。
*   **集成模式：**
    有三种方式将ECR系统连接到支付宝。根据硬件、软件和合作伙伴依赖性，选择合适的集成方式。
    ![](https://cdn.nlark.com/lark/0/2018/png/65509/1545444780416-198cf7ac-b673-4062-93a5-94702fdfaca7.png)
    如果有开发资源和直接结算模式，商家可以通过其后端处理系统直接连接到支付宝的条码支付API。
    ![](https://cdn.nlark.com/lark/0/2018/png/65509/1545444812696-fe986e54-fe1b-45e2-ad61-bcf2b54f3e24.png)
    收单机构或ISV可以通过现有或新的API向商家的ECR系统提供支付宝作为支付方式。例如，商家的现有合作伙伴（如积分卡提供商）可以在现有的集成中添加支付功能。
    ![](https://cdn.nlark.com/lark/0/2018/png/65509/1545444845299-eab70036-5e16-4b11-8fdf-ca6ea563158f.png)
    支付卡收单机构可以利用POS终端基础设施，为商家提供支付宝作为额外的支付方式。扫描支付宝支付条码后，ECR将支付条码的内容传递给POS终端，POS终端通过标准的收单网络发起支付宝支付。
*   **与支付宝集成：**
在开始集成之前，请确保满足硬件要求，例如用于读取支付码的扫描器。此解决方案中可以使用激光枪、带有应用的移动设备或带有摄像头的mPOS终端，只要扫描器能够读取客户支付宝应用上显示的支付宝支付条形码。

详细集成步骤，请参阅[条形码支付 - 集成](https://global.alipay.com/doc/globalbarcode/introduction)，包括准备密钥、调用API、在沙箱环境测试以及上线。

**最佳实践**

在大多数POS场景（如超市或便利店）中，支付处理速度是商家关注的重点之一。为了减少收银台后的长队等待，需要进行一些可用性优化。

**自动发起支付宝支付**
为了简化收银员培训，可以通过ECR软件让收银员扫描支付宝支付条形码来启动支付宝支付。如果ECR软件需要按钮，应以易于理解的方式命名（例如，“支付宝”）。此外，确保按钮在一级菜单中易于找到，不要将其隐藏在二级菜单中。

**超时与取消**
在零售店解决方案中，通常将超时值设置为30秒。在超时之前，ECR必须查询交易状态，然后立即（如果适用）进行取消操作，然后在ECR中关闭支付交易。

要查看文档的最新更新，请访问[版本说明](https://global.alipay.com/docs/releasenotes)。

![图片7](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片8](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 在这个页面上
[系统架构](#ae52c2ef "系统架构")  
[集成模式](#0d438ff8 "集成模式")  
[与支付宝集成](#90729398 "与支付宝集成")  
[最佳实践](#c2ffe02d "最佳实践")  

---

### 系统架构<a id="ae52c2ef"></a>

描述了蚂蚁金服的技术框架和组件，包括前端、后端、数据库、安全性和可扩展性等方面。

### 集成模式<a id="0d438ff8"></a>

概述了与蚂蚁金服平台进行集成的不同方法，如API调用、SDK使用、开放平台接口等，以及相应的集成流程和注意事项。

### 与支付宝集成<a id="90729398"></a>

详细说明如何将你的应用或服务与支付宝连接，包括支付功能、用户身份验证、订单处理和交易状态查询等关键步骤。

### 最佳实践<a id="c2ffe02d"></a>

提供了在金融技术和互联网信息化领域与蚂蚁金服合作时的建议和策略，包括性能优化、数据安全、用户体验和故障处理等方面的指导。
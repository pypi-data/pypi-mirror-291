Idempotency | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fidempotency)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

[Overview](/docs/ac/ams/api_fund)

[Idempotency](/docs/ac/ams/idempotency)

[Message encoding](/docs/ac/ams/me)

[Sign a request and verify the signature](/docs/ac/ams/digital_signature)

[API change history](/docs/ac/ams/changehistory)

Online payments

In-store payments

Idempotency
===========

2023-03-27 06:20

Alipay APIs support idempotency, allowing to retry a request multiple times while only performing the action once. This helps avoid unwanted duplication in case of failures and retries.

If a transient error or a time-out occurred and the action was not completed in the previous request, the subsequent retry pushes the action to its completion. If the action is already completed, the action is to be performed only once and the same result is to be returned for the retry process. All Alipay payment-related APIs are idempotent. The following table shows the most commonly used APIs and their idempotency rules.

Idempotency fields
==================

The following table lists the idempotency fields of APIs. For details of each idempotency field, see the corresponding API chapter.



| **API name** | **Idempotency Field** | **Rules** |
| --- | --- | --- |
| pay | paymentRequestId | Merchant uses the *paymentRequestId* field for idempotency control. For payment requests that are initiated with the same value of *paymentRequestId* and reach a final status (`S` or `F`), the same result is to be returned for the request.Note: This API checks the consistency of some key request parameters such as *paymentRequestId*, *paymentAmount*, and *paymentMethodId* if applicable. If any of the key values is different from that of the previous request, the error `REPEAT_REQ_INCONSISTENT` is to be returned. |
| refund | refundRequestId | Merchant uses the *refundRequestId* field for idempotency control. For refund requests that are initiated with the same value of *refundRequestId* and reach a final status (`S` or `F`), the same result is to be returned for the request. Note: If the value of *refundAmount* is different from that of the previous request, the error `REPEAT_REQ_INCONSISTENT` is to be returned. |
| capture | captureRequestId | Merchant uses the *captureRequestId* field for idempotency control. For capture requests that are initiated with the same value of *captureRequestId* and reach a final status (`S` or `F`), the same result is to be returned for the request. Note: If the value of *captureAmount* is different from that of the previous request, the error `REPEAT_REQ_INCONSISTENT` is to be returned. |
| registration | registrationRequestId | Merchant uses the *registrationRequestId* field for idempotency control. For registration requests that are initiated with the same value of *registrationRequestId* and reach a final status (`S` or `F`), the same result is to be returned for the request. |
| initAuthentication | authenticationRequestId | Merchant uses the *authenticationRequestId* field for idempotency control. For initAuthentication requests that are initiated with the same value of *authenticationRequestId* and reach a final status (`S` or `F`), the same result is to be returned for the request. |



Table 1. Idempotency fields and corresponding processing rules

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[Idempotency fields](#aQ2Bz "Idempotency fields")
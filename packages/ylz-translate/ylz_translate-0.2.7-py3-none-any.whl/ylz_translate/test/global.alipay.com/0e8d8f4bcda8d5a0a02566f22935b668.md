notifyPayment | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fnotify_subpayment)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

Subscription

[create](/docs/ac/ams/create_sub)

[notifySubscription](/docs/ac/ams/notify_sub)

[notifyPayment](/docs/ac/ams/notify_subpayment)

[change](/docs/ac/ams/change_sub)

[cancel](/docs/ac/ams/cancel_sub)

Dispute

Refund

Declaration

In-store payments

notifyPayment
=============

2024-01-29 07:27

Alipay uses **notifyPayment** to send the payment result of each subscription period to the merchant when the payment reaches a final state of success or failure.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)  
    

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20".
*   If the data type of a field is Boolean and its value is true, set it as "true".  

### Request parameters

Show all

#### result Result object REQUIRED

Details about the payment result, such as payment status, result code, and result message.

Show child parameters

#### paymentId String  REQUIRED

The unique ID assigned by Alipay to identify a payment for each subscription period.

More information about this field

*   Maximum length: 64 characters

#### paymentAmount Amount object REQUIRED

The payment amount of each subscription period.

Show child parameters

#### paymentCreateTime Datetime  REQUIRED

The date and time when the payment of each subscription period is created.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### paymentTime Datetime  

The date and time when the payment of each subscription period reaches a final state of success.

This parameter is returned when the value of _result.resultStatus_ is `S`.

#### subscriptionRequestId String  REQUIRED

The unique ID assigned by a merchant to identify a subscription request.

More information about this field

*   Maximum length: 64 characters

#### subscriptionId String  REQUIRED

The unique ID assigned by Alipay to identify a subscription.

More information about this field

*   Maximum length: 64 characters

#### periodStartTime Datetime  REQUIRED

The start date and time of the current subscription period.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### periodEndTime Datetime  REQUIRED

The end date and time of the current subscription period.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### phaseNo String  REQUIRED

Indicates the current phase of the subscription period. For example, if the subscription begins in May and operates on a monthly cycle for one year, then June represents the second phase, with _phaseNo_ \= "2".

More information about this field

*   Maximum length: 64 characters

### Response parameters

Show all

#### result Result object REQUIRED

A fixed value, which is sent to Alipay to acknowledge that the notification is received.

Show child parameters

API Explorer

### Request

Request Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

{

"phaseNo": "1",

"periodStartTime": "2022-11-03T17:00:00-07:00",

"periodEndTime": "2022-10-04T09:00:00-07:00",

"paymentAmount": {

"currency": "PHP",

"value": "122"

},

"paymentCreateTime": "2022-12-05T11:34:05-08:00",

"paymentId": "20221205194010800100188860204600921",

"paymentTime": "2022-12-05T11:33:56-08:00",

"result": {

"resultCode": "SUCCESS",

"resultMessage": "success",

"resultStatus": "S"

},

"subscriptionId": "20221205190000000000000450000007269",

"subscriptionRequestId": "amsmdsubscription\_20221206\_033332\_074"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

{

"result": {

"resultStatus": "S",

"resultCode": "SUCCESS",

"resultMessage": "success."

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Result process logic
====================

Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:

Sample Code

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

If no such message is returned to Alipay due to operation issues or network issues, Alipay automatically resends the notification up to eight times within 24 hours or until the correct response is received. The sending intervals are as follows: 0 sec, 2 min, 10 min, 10 min, 1 h, 2 h, 6 h, and 15 h.

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | 
The interface is called successfully.

 |
| ACCESS\_DENIED | F | Access is denied. | 

Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_ACCESS\_TOKEN | F | The access token is expired, revoked, or does not exist. | 

Contact Alipay Technical Support for detailed reasons.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | 

Contact Alipay Technical Support for detailed reasons.

 |
| ORDER\_IS\_CLOSED | F | The transaction is closed and cannot be paid again. | 

Contact Alipay Technical Support for detailed reasons.

 |
| PAYMENT\_AMOUNT\_EXCEED\_LIMIT | F | The payment amount is greater than the maximum amount allowed by the contract or wallet. | Check whether the payment amount exceeds the limit or use a lower amount and try again. Contact Alipay technical support to know the specific limitation.

 |
| PAYMENT\_COUNT\_EXCEED\_LIMIT | F | The maximum number of payments exceeds the limit that is specified by the wallet. | Contact Alipay Technical Support to know the specific limitation.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | 

Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is not enough. | 

Call the interface again after the merchant has sufficient balance.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | 

Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| SYSTEM\_ERROR | F | A system error occurred. | 

Do not retry, and contact Alipay Technical Support for more details.

 |
| USER\_BALANCE\_NOT\_ENOUGH | F | The user's balance is insufficient for the payment. | 

Contact Alipay Technical Support for detailed reasons.

 |
| USER\_STATUS\_ABNORMAL | F | The user status is abnormal on the payment method side. | 

Contact Alipay Technical Support to know the specific reasons.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
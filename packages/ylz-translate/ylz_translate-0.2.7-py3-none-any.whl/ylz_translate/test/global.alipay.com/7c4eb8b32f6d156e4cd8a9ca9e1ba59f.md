Web/WAP | Checkout Payment | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fbank_webwap)

[Go to Homepage](../../)

Checkout Payment

[Overview](/docs/ac/cashierpay/overview)

Accept payments

After payments

Payment methods

Other resources

Advanced features

[Pre-front solutionAPI](/docs/ac/cashierpay/prefront)

[Buy now pay laterAPI](/docs/ac/cashierpay/bnpl)

[Card vaultingAPI](/docs/ac/cashierpay/cv)

[Card vaultingSDK](/docs/ac/cashierpay/cvsdk)

[Card payment featuresAPISDK](/docs/ac/cashierpay/mf)

Web/WAP
=======

In this topic, you'll learn how to integrate the bank SDK into a web or WAP client so that you can render payment pages in a computer browser or a mobile browser.

Prerequisites

Before integrating the SDK, ensure that you have completed the following tasks:

*   Install npm.
*   Properly handle compatibility issues: Provide corresponding polyfills for Internet Explorer and other old browser versions. We recommend that you use [babel-preset-env](https://babeljs.io/docs/en/babel-preset-env) to address browser compatibility issues when you build a project. 
*   Use the following recommended browser versions:
    *   For mobile browsers:
        *   iOS 11 and later
        *   Android 5.0 and later
    *   For computer browsers, use the following recommended versions:
        
        

| [Web/Wap](http://godban.github.io/browsers-support-badges/)**Edge**Unlimited | [Web/Wap](http://godban.github.io/browsers-support-badges/)**Firefox** Last 2 versions | [Web/Wap](http://godban.github.io/browsers-support-badges/)**Chrome** Last 2 versions | [Web/Wap](http://godban.github.io/browsers-support-badges/)**Safari** Last 2 versions | [Web/Wap](http://godban.github.io/browsers-support-badges/)**Opera** Last 2 versions | [Web/Wap](http://godban.github.io/browsers-support-badges/)**Electron** Last 2 versions |
| --- | --- | --- | --- | --- | --- |


        

Key Integration steps

Integrate the SDK by following these steps:

1

Import the SDK package

Client side

You can use either of the following methods to add an SDK package:

*   Use npm: Input the install command in the command line interface.
*   Use CDN resources: Use the script tag in a HTML file.

Add the SDK package by using npm.

Shell

1

npm install @alipay/ams\-checkout

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Add the SDK package by using CDN resources.

HTML

1

<script src\="https://sdk.marmot

    \-cloud.com/package/ams

    \-checkout/1.10.1/dist/umd

    /ams-checkout.min.js"

    \></script\>

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

2

Display available payment methods

Client side

After you have obtained available payment methods by contacting Alipay Technical Support, you can display the payment methods in the following modes:

*   Single bank mode: Display the payment methods by bank.
*   Bank type mode: Display the payment method by bank type, such as mobile banking app, online banking, and bank transfer.
*   Bank country mode: Display the payment methods by bank country, such as Thailand and Indonesia.

Please refer to [User experience](https://global.alipay.com/docs/ac/cashierpay/bank_sdk#7WPiN) for three types of payment method display.

**Note**: In the bank type mode, payment methods cannot be displayed under the mobile banking app type on web clients.

3

Create an SDK instance by using the `AMSCashierPayment` method:

Client side

1.  Create a _config_ object: Required. The object must contain all of the following configuration parameters:
    *   _locale_: An optional string, which is used by the merchant client to identify the language of the buyer's browser. Specify this parameter to ensure that the SDK displays pages in the correct language. The valid values are as follows. If any other values are passed, English will be used as the default language.
        *   `en_US`: English
        *   `in_ID`: Indonesian
        *   `th_TH`: Thai
    *   _environment_: A required string, which is used to specify the environment information. Valid values are:
        *   `SANDBOX`: sandbox environment
        *   `PROD`: production environment
    *   _analytics_: An optional object, which is used to configure and analyze data. It contains the value:
        *   _enabled_: An optional Boolean. It defaults to `true`, which indicates that you allow the SDK to upload and analyze operational data to deliver a better service. If you do not allow the data to be uploaded and analyzed, specify it as `false`.
    *   `onLog`: Optional. It is a callback function that is used to generate the error information about log and API exceptions during the execution of the SDK.
    *   `onClose`: Optional. It is a callback function triggered when the buyer closes the popup.
    *   `onEventCallback`: Optional. A callback function used to trigger callback and return event code when a specific event occurs during payment.
2.  Instantiate the `AMSCashierPayment` method.

Obtain the browser language.

Javascript

1

2

let language \= navigator

    .language || navigator

    .userLanguage;

language \= language.replace("-",

    "\_"); // Replace "-" with

    "\_"

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Create an SDK instance:

npm

1

2

3

4

5

6

7

8

9

10

11

import { AMSCashierPayment }

    from '@alipay/ams-checkout'

    // Manage the package

const checkoutApp \= new

    AMSCashierPayment({

environment: "sandbox",

locale: "en\_US",

analytics: {

enabled: true

},

onLog: ({code, message})\=>{},

onEventCallback: ({code,

      message})\=>{}

});

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Create an SDK instance:

CDN

1

2

3

4

5

6

7

8

9

10

// Add the SDK package by using

    CDN resources: Instantiate

    window.AMSCheckout

const checkoutApp \= new window

    .AMSCashierPayment({

environment: "sandbox",

locale: "en\_US",

analytics: {

enabled: true

},

onLog: ({code, message})\=>{},

onEventCallback: ({code,

      message})\=>{}

});

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

4

Send a **createPaymentSession (Checkout Payment)** request to the Alipay server.

Server side

After the user selects the payment method and your client detects the payment button click event, your server sends a **[createPaymentSession (Checkout Payment)](https://global.alipay.com/docs/ac/ams/session_cashier)** request. Get the paymentSesssionData value from the createPaymentSession response and use it in Step 5.

Pass the following parameters in your **createPaymentSession (Checkout Payment)** request:

*   paymentRequestId: The unique ID assigned by a merchant to identify a payment request.
    
*   productCode: Represents the payment product that is being used. The value is fixed as `AGREEMENT_PAYMENT` .
    
*   paymentNotifyUrl: The URL that is used to receive the payment result notification.
    
*   paymentRedirectUrl: The merchant page URL that the user is redirected to after the payment is completed.
*   paymentAmount: The payment amount that the merchant requests to receive in the order currency.
*   order.orderAmount: The order amount on the merchant's part. During sales promotion, the _orderAmount_ value may differ from the _paymentAmount_ value.
*   order.orderDescription: The order description.
*   order.referenceOrderId: The order ID on the merchant's side. Alipay suggests using one _referenceOrderId_ for multiple _paymentRequestId_s when there are multiple payment requests for a single order.
*   paymentMethod.paymentMethodType: Specify it as `BANK.`
*   paymentMethod.paymentMethodMetaData：
    *   To display payment methods in the single bank mode, specify _bankName_ as a bank name.
    *   To display payment methods in the bank type mode, specify _paymentMethodCaregory_ as a payment method type. Valid values are `BANK_TRANSFER`, `MOBILE_BANKING_APP`, and `ONLINE_BANKING`.
    *   To display payment methods in the bank country mode, specify _paymentMethodRegion_ as a country. Valid values are `TH` and `ID`.

Single bank mode

JSON

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

{

"order": {

"orderAmount": {

"currency": "THB",

"value": "160"

},

"orderDescription":

            "Cappuccino #grande

            (Mika's coffee shop

            )",

"referenceOrderId":

            "ORDER\_202308031652

            57496"

},

"paymentAmount": {

"currency": "THB",

"value": "160"

},

"paymentMethod": {

"paymentMethodType":

            "BANK",

"paymentMethodMetaData"

            : "{\\"bankName\\"

            :\\"Siam Commerical

            Bank\\"}"

},

"settlementStrategy": {

"settlementCurrency":

            "USD"

},

"paymentNotifyUrl": "https

        ://kademo.intlalipay.cn

        /payments

        /notifySuccess",

"paymentRedirectUrl":

        "https://kademo

        .intlalipay.cn/melitigo

        /Test\_114.html",

"paymentRequestId":

        "PAY\_20230804165257508"

        ,

"productCode":

        "CASHIER\_PAYMENT"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Bank type mode

JSON

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

{

"order": {

"orderAmount": {

"currency": "THB",

"value": "160"

},

"orderDescription":

            "Cappuccino #grande

            (Mika's coffee shop

            )",

"referenceOrderId":

            "ORDER\_202308031652

            57496"

},

"paymentAmount": {

"currency": "THB",

"value": "160"

},

"paymentMethod": {

"paymentMethodType":

            "BANK",

"paymentMethodMetaData"

            :

            "{\\"paymentMethodCa

            regory\\"

            :\\"BANK\_TRANSFER\\"}

            "

},

"settlementStrategy": {

"settlementCurrency":

            "USD"

},

"paymentNotifyUrl": "https

        ://kademo.intlalipay.cn

        /payments

        /notifySuccess",

"paymentRedirectUrl":

        "https://kademo

        .intlalipay.cn/melitigo

        /Test\_114.html",

"paymentRequestId":

        "PAY\_20230804165257508"

        ,

"productCode":

        "CASHIER\_PAYMENT"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Bank country mode

JSON

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

{

"order": {

"orderAmount": {

"currency": "THB",

"value": "160"

},

"orderDescription":

            "Cappuccino #grande

            (Mika's coffee shop

            )",

"referenceOrderId":

            "ORDER\_202308031652

            57496"

},

"paymentAmount": {

"currency": "THB",

"value": "160"

},

"paymentMethod": {

"paymentMethodType":

            "BANK",

"paymentMethodMetaData"

            :

            "{\\"paymentMethodRe

            gion\\":\\"TH\\"}"

},

"settlementStrategy": {

"settlementCurrency":

            "USD"

},

"paymentNotifyUrl": "https

        ://kademo.intlalipay.cn

        /payments

        /notifySuccess",

"paymentRedirectUrl":

        "https://kademo

        .intlalipay.cn/melitigo

        /Test\_114.html",

"paymentRequestId":

        "PAY\_20230804165257508"

        ,

"productCode":

        "CASHIER\_PAYMENT"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

5

Render the payment pages

Client side

Use the `createComponent` method in the configuration object:

1.  Create a configuration object by using the _sessionData_ parameter: Pass the _paymentSessionData_ value obtained in Step 4 to the s_essionData_ parameter of the `createComponent` method.
2.  Call the `createComponent()` method in the instantiated object. The return value is `Promise`, and the content is the instantiated object obtained using this method. The DOM object in the payment component can render the payment methods according to the environmental parameters and display them on the current page. You can configure the following parameter:
    *   _appearance_: An optional object, which is used to style your web page. The valid value is:
        *   _showLoading_: An optional Boolean. It defaults to `true`, which indicates that you use the default loading pattern. If you do not use the default loading pattern, specify it as `false`.

Call the `unmount()` method to free SDK component resources in the following situations:

*   When the user exits the checkout page, free the component resources created in the **createPaymentSession.**
*   When the user initiates multiple payments, free the component resources created in the previous **createPaymentSession.**

Call the createComponent method:

JavaScript

1

2

3

4

5

6

7

8

9

10

async function create

    (sessionData) {

await checkoutApp

      .createComponent({

sessionData: sessionData,

appearance:{

showLoading: true, // Set

          as true by default to

          enable the default

          loading pattern

},

});

}

//Free SDK component resources

checkoutApp.unmount();

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

6

Obtain a payment result

Server side

When the payment reaches a final status of success or failure, Alipay sends an asynchronous notification through the [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online) API to _paymentNotifyUrl_ that you pass through the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) API. When you receive the notification from Alipay, you must return a response as instructed in [Requirements](https://global.alipay.com/docs/ac/ams/paymentrn_online). You can also obtain the payment result by calling the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) API.

Event codes

The SDK provides the following status codes:

*   `SDK_START_OF_LOADING`: The loading animation starts to play during the payment component creation.
    
*   `SDK_END_OF_LOADING`: The loading animation ends during the payment component creation.
    

The SDK provides the following error codes:

*   `SDK_INTERNAL_ERROR`: The internal error of the SDK occurs. Contact Alipay Technical Support to resolve the issue.
    
*   `SDK_CREATEPAYMENT_PARAMETER_ERROR`: The parameters passed into the `AMSCashierPayment` method are incorrect. Ensure the parameters are passed correctly and send a new request.
    
*   `SDK_INIT_PARAMETER_ERROR`: The parameters passed into the `createComponent` method are incorrect. Ensure the parameters are passed correctly and send a new request.
    
*   `SDK_CREATECOMPONENT_ERROR`: An exception occurs when calling the `createComponent` method. Contact Alipay Technical Support to resolve the issue.
    
*   `SDK_CALL_URL_ERROR`: The payment method client failed to be revoked. Contact Alipay Technical Support to resolve the issue.
    

#### Is this page helpful?

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 9](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 10](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)
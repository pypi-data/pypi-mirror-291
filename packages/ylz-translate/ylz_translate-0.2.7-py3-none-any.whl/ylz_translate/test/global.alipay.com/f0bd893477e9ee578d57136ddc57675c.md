退款 | 收银台 | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登 录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashier_payment_cn%2Frefund)

[返回首页](../../)

收银台

[产品介绍](/docs/ac/cashier_payment_cn/introduction)

[支付方式](/docs/ac/cashier_payment_cn/payment_method)

支付

支付后

[接收通知](/docs/ac/cashier_payment_cn/notification)

[取消交易](/docs/ac/cashier_payment_cn/cancel_cn)

[退款](/docs/ac/cashier_payment_cn/refund)

[争议](/docs/ac/cashier_payment_cn/chargeback)

[对账](/docs/ac/cashier_payment_cn/reconciliation)

参考材料

退款
==

2024-04-02 07:13

您可以通过本文了解 Antom 的退款规则及如何对成功的交易发起退款。

退款规则
====

退款的相关规则如下：

*   **是否退手续费**: 依照双方合约执行。
*   **退款的执行汇率**:

*   若跨币种结算，外汇策略为锁价模式下，按照发起退款请求当日 Antom 汇率进行结算。
*   若跨币种结算，外汇策略为不锁价模式下，按照发起退款请求后的次日 Antom 汇率进行结算。
*   若结算币种与退款币种相同，则不涉及汇率换算。

*   **是否允许部分退款**：取决于买家付款所使用的支付方式。详情参见 [支付方式能力对比](payment_method_capabilities)。
*   **允许退款的期限**：取决于买家付款所使用的支付方式。详情参见 [支付方式能力对比](payment_method_capabilities)。
*   **退款处理时效**：不同的支付方式的退款处理时效有所差异，请联系技术支持了解详情。

退款方式
====

您可以通过 [调用接口](#eb9kK) 或者在 [Antom Merchant Portal](#Ote0I) 对成功支付的交易发起退款。

调用接口退款
------

根据支付方式的不同，调用接口退款时退款可能是同步或者是异步发生的，因此退款分为同步退款和异步退款两种逻辑：

*   **同步退款**：调用接口退款后，通常会直接响应退款成功或失败的状态。但不排除系统异常或支付渠道处理异常等小概率情况导致返回其他状态。
*   **异步退款**：调用接口退款后，响应退款处理中。需要您主动查询退款结果或等待退款结果通知来获取退款最终状态。

同步和异步退款所支持的支付方式信息如下：



| **同步退款** | **异步退款** |
| --- | --- |
| Alipay+ 类型的所有支付方式 | 非同步退款支持的其它支付方式均为异步退款，所有支付方式请参考 [支付方式列表](https://global.alipay.com/docs/ac/ref/payment_method#xm58z)。 |
| 收单机构为 2C2P HK 和 2C2P SG 时的 Mastercard 和 Visa 卡 |



表 1. 同步和异步退款支持的支付方式

同步和异步退款所支持的退款相关接口信息如下：



| **接口** | **同步退款** | **异步退款** |
| --- | --- | --- |
| [**退款**](https://global.alipay.com/docs/ac/ams/refund_online) | 支持 | 支持 |
| [**退款通知**](https://global.alipay.com/docs/ac/ams/notify_refund) | 不支持 | 支持 |
| [**查询退款**](https://global.alipay.com/docs/ac/ams/ir_online) | 支持 | 支持 |



表 2. 同步和异步退款支持的接口能力

### 流程图

以下为同步退款和异步退款的工作流程图。

#### 同步退款

![Image 3: lQLPKHgIZ8sNyJHNBm_NChSwrHFTEy-iVr8F5u5_xUhvAQ_2580_1647.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711528315072-d81d7c7d-f212-433b-86c7-0a4ec2abbc44.png)

图 1. 同步退款流程图

#### 异步退款  

![Image 4: 4@3x.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1710727709091-fe6f438c-74d7-4636-8117-a7b7858ff77e.png)

图 2. 异步退款流程图

### 发起退款

通过 **退款** 接口发起退款时，请求中关键字段如下（具体接口调用规范请参见 [**退款**](https://global.alipay.com/docs/ac/ams/refund_online) 接口）：



| **字段名** | **说明** |
| --- | --- |
| refundRequestId | 在商家侧唯一的退款 ID。 |
| paymentId | 该笔退款所对应的 Antom 分配的原始交易的 ID。 |
| refundAmount | 退款金额。需要大于等于最小退款金额（通常为最小支付金额），且小于等于交易剩余可退金额。 |
| refundNotifyUrl | Antom 向您发送退款异步通知地址。 |



表 3. 退款请求关键字段

使用 **退款** 接口发起退款需满足以下要求，否则将收到 Antom 返回的对应错误码：



| **退款****要求** | | **对应错误码** |
| --- | --- | --- |
| **退款的币种** | 退款请求中的币种 *refundAmount.currency* 需要与通过 [**支付**](https://global.alipay.com/docs/ac/ams/payment_cashier) 接口发起交易时的币种 *paymentAmount.currency* 保持一致。 | `CURRENCY_NOT_SUPPORT` |
| **退款金额** | 申请的退款金额 *refundAmount.value* 需要大于等于最小退款金额（通常与最小支付金额一致），且小于等于交易剩余可退金额。 | `REFUND_AMOUNT_EXCEED` |
| **交易状态** | 对于卡支付方式：* 仅请款成功的交易才能支持退款。 * 在卡拒付场景下，处于争议处理阶段的交易无法发起退款，仅当拒付判责完成后允许发起退款。  对于其他支付方式，仅当发起退款对应交易的状态 *paymentStatus* 为 `SUCCESS` 时才允许发起退款。 | `ORDER_STATUS_INVALID` |
| **退款期限** | 在支付方式支持的退款期限内允许发起退款，超过则不允许发起退款。 | `REFUND_WINDOW_EXCEED` |



表 4. 退款要求

### 获取退款结果

对于同步和异步退款，获取退款结果的方式有所不同：

*   **同步退款**：

*   您可以直接通过 [退款接口响应](#OWfLu) 来获取退款是成功还是失败的结果。
*   您也可以通过 [主动查询退款结果](#MP1zd) 来获取已发起退款交易的退款结果。

*   **异步退款**：

*   通过 Antom 发送给您的 [异步通知](#648ex) 获取退款是成功还是失败的结果。
*   通过 [主动查询退款结果](#MP1zd) 来获取退款状态。

#### 退款接口获取退款状态

在您调用 **退款** 接口后，Antom 会返回该次退款的受理结果。响应中的 _resultStatus_ 字段代表该笔交易的退款状态，同步退款返回的不同状态码及状态码解释如下表所示：



| ***resultStatus*** | **解释** |
| --- | --- |
| `S` | 退款成功。 |
| `F` | 退款失败。请参考 **退款** 接口的 *resultCode* 进行问题排查。 |
| `U` | 退款受理中。对于同步退款的场景，可能存在小概率发生如下情况：* 因系统处理异常等原因返回 `UNKNOWN_EXCEPTION`，此时需要您重新调用 **退款** 接口。 * 当支付渠道处理中时会返回`REFUND_IN_PROCESS`时，您可以通过 **查询交易结果** 接口获取最终的退款结果。  对于异步退款的场景，当 *resultCode* 为`REFUND_IN_PROCESS`时，您可以通过 **查询交易结果** 接口或 **退款结果通知** 获取最终的退款结果。 |



表 5. 退款接口 _refundStatus_ 状态码说明

#### 调用接口查询退款

在您发起退款请求后，无论买家付款时使用的是何种支付方式，您均可以通过调用 **查询交易结果** 接口查询该退款的执行状态。返回结果中的 _refundStatus_ 字段代表该笔交易的退款状态，状态码及其解释如下表所示：



| ***refundStatus*** | **解释** |
| --- | --- |
| `SUCCESS` | 退款处理成功。 |
| `FAIL` | 退款执行失败。 |
| `PROCESSING` | 退款处理中。 |



表 6. 查询退款接口 _refundStatus_ 状态码说明

#### 接收退款异步通知

欲接收退款异步通知，您需要完成退款异步通知接收地址的配置：通过 **退款** 接口中 _refundNotifyUrl_ 字段传入退款异步通知接收地址或在 Antom Dashboard [配置退款异步通知接收地址](https://global.alipay.com/docs/ac/ref/notification#gmdif)。

值得注意的是只有异步退款场景下 Antom 才会通过 [**退款通知**](https://global.alipay.com/docs/ac/ams/notify_refund) 接口为您发送退款通知。收到通知后，您可以通过 _refundStatus_ 字段来了解该笔交易的退款状态，不同状态码及其解释如下表所示：



| **refundStatus** | **解释** |
| --- | --- |
| `SUCCESS` | 退款处理成功。 |
| `FAIL` | 退款执行失败。 |



表 7. 退款通知 _refundStatus_ 状态码说明

### 查询交易的退款记录

您也可以通过 [**查询交易结果**](https://global.alipay.com/docs/ac/ams/paymentri_online) 接口查询一笔交易的退款记录。若一笔交易发生过退款，响应中的 _transactions_ 字段会反映该笔交易的退款情况。

通过 Antom Merchant Portal 退款
---------------------------

您可以通过 [Antom Merchant Portal](https://intl-sea.alipay.com/ilogin/account_login.htm) 进行退款，欲知如何发起退款并查看退款结果，可参见 [通过门户交易中心退款](https://global.alipay.com/docs/ac/merchant_service_cn/transactions#QySzf)。

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 5](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 6](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### 这篇内容对您有帮助吗？

#### 文章内目录

[退款规则](#vknfd "退款规则")

[退款方式](#I5Txo "退款方式")

[调用接口退款](#eb9kK "调用接口退款")

[流程图](#QxKEZ "流程图")

[同步退款](#fWWpF "同步退款")

[异步退款](#RpI58 "异步退款")

[发起退款](#ik9Op "发起退款")

[获取退款结果](#XqqaI "获取退款结果")

[退款接口获取退款状态](#OWfLu "退款接口获取退款状态")

[调用接口查询退款](#MP1zd "调用接口查询退款")

[接收退款异步通知](#648ex "接收退款异步通知")

[查询交易的退款记录](#2UX56 "查询交易的退款记录")

[通过 Antom Merchant Portal 退款](#Ote0I "通过 Antom Merchant Portal 退款")
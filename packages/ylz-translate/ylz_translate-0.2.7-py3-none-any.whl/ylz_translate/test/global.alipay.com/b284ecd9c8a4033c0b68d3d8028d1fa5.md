createPaymentSession (Checkout Payment) | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fsession_cashier)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

[consult (Checkout Payment)](/docs/ac/ams/consult)

[pay (Checkout Payment)](/docs/ac/ams/payment_cashier)

[createPaymentSession (Checkout Payment)](/docs/ac/ams/session_cashier)

[capture (Checkout Payment)](/docs/ac/ams/capture)

[pay (Auto Debit)](/docs/ac/ams/payment_agreement)

[createPaymentSession (EasySafePay)](/docs/ac/ams/createpaymentsession_easypay)

[notifyPayment](/docs/ac/ams/paymentrn_online)

[notifyCapture (Checkout Payment)](/docs/ac/ams/notify_capture)

[inquiryPayment](/docs/ac/ams/paymentri_online)

[cancel](/docs/ac/ams/paymentc_online)

Subscription

Dispute

Refund

Declaration

In-store payments

createPaymentSession (Checkout Payment)
=======================================

2024-04-26 02:10

POST /v1/payments/createPaymentSession

The **createPaymentSession** API is used to create a payment session for client-side SDK integration. Through this API response, Alipay returns encrypted session data. You use the session data to initiate the client-side SDK. The SDK helps you complete the payment process and eliminate intermediate page redirections throughout the entire payment process.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

Show all

#### productCode String  REQUIRED

Represents the payment product that is being used, which is stipulated in the contract. For Cashier Payment, the value is fixed as `CASHIER_PAYMENT`.

#### paymentRequestId String  REQUIRED

The unique ID assigned by a merchant to identify a payment request.

More information about this field

*   Maximum length: 64 characters

#### order Order object REQUIRED

The order information, such as buyer, merchant, goods, amount, shipping information, and purchase environment. This field is used for different purposes:

*   During the payment process, this field is mainly used by Alipay for risk control or anti-money laundering.
*   After the payment is completed, this field is used for recording and reporting purposes such as purchase tracking and regulatory reporting.

Show child parameters

#### paymentAmount Amount object REQUIRED

The payment amount that the merchant requests to receive in the order currency.

Show child parameters

#### paymentFactor PaymentFactor object 

Factors that impact the payment. This field is used to indicate the payment scenario.

Specify this parameter when the value of _paymentMethodType_ is `CARD` and you integrate the client-side SDK.

Show child parameters

#### paymentMethod PaymentMethod object REQUIRED

The payment method that is used to collect the payment by the merchant or acquirer.

Show child parameters

#### paymentRedirectUrl URL  REQUIRED

The merchant page URL that the user is redirected to after the payment is completed.

More information about this field

*   Maximum length: 2048 characters

#### paymentNotifyUrl URL  

The URL that is used to receive the payment result notification.

Specify this parameter if you want to receive an asynchronous notification of the payment result. You can also set the URL to receive the result notification in Alipay+ Dashboard. If the URL is specified in both the request and Alipay+ Dashboard, the value specified in the request takes precedence.

More information about this field

*   Maximum length: 2048 characters

#### settlementStrategy SettlementStrategy object REQUIRED

The settlement strategy for the payment request.

Show child parameters

#### enableInstallmentCollection Boolean  

Indicates whether Alipay collects the installment information for the payment. Specify this parameter if you need Alipay to collect the installment information. Valid values are:

*   `true`: indicates Alipay collects installment information when the user's card supports installments. Installments are not available when the user's card does not support installments.
*   `false`: indicates you do not need Alipay to collect the installment information. The same applies when the value is empty or you do not specify this parameter.   

#### creditPayPlan CreditPayPlan object 

The credit payment plan information for this payment.

Specify this parameter when the payment supports installments and you specify the card-related information in _paymentMethod.paymentMethodMetaData_.

Show child parameters

#### merchantRegion String  

The country or region where the merchant operates the business. The parameter is a 2-letter country or region code that follows [ISO 3166 Country Codes](https://www.iso.org/obp/ui/#search) standard.

Some possible values are `US`, `SG`, `HK`, `PK`, `JP`, `CN`, `BR`, `AU`, and `MY`.

This parameter is required when you use the Global Acquirer Gateway (GAGW) product.

More information about this field

*   Maximum length: 2 characters

#### env Env object 

Information about the environment where the order is placed.

Specify this parameter when you require risk control. Providing this information helps to increase the accuracy of anti-money laundering and fraud detection, and increase payment success rates.

Show child parameters

#### paymentSessionExpiryTime Datetime  

The specific date and time after which the payment session will expire. The default expiration time is 1 hour after the session creation. For example, if the session is created at 2023-7-27T12:00:01+08:30, the session expiration time is 2023-7-27T13:00:01+08:30.

Specify this parameter if you want to use a payment session expiration time that differs from the default time. The specified expiration time must be 0 to 1 hour after session creation.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

### Response parameters

Show all

#### result Result object REQUIRED

The result of the API call.

Show child parameters

#### paymentSessionId String  REQUIRED

The encrypted ID that is assigned by Alipay to identify a payment session.

More information about this field

*   Maximum length: 64 characters

#### paymentSessionData String  REQUIRED

The encrypted payment session data. Pass the data to your front end to initiate the client-side SDK.

More information about this field

*   Maximum length: 4096 characters

#### paymentSessionExpiryTime Datetime  REQUIRED

The specific date and time after which the payment session will expire.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

API Explorer

Sample CodesRun in Sandbox

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/createPaymentSession

Case

Alipay collects card information

Request Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

{

"productCode": "CASHIER\_PAYMENT",

"paymentRequestId": "55bf93a6-71a1-4ca9-b014-53273bd674eb",

"order": {

"referenceOrderId": "926e1c32-4a6c-442e-b5ce-8ec5b902e18c",

"orderDescription": "xxxxx",

"orderAmount": {

"currency": "BRL",

"value": "100"

},

"buyer": {

"referenceBuyerId": "yeiasdasda",

"buyerPhoneNo": "134\*\*\*\*\*\*71"

}

},

"paymentAmount": {

"currency": "BRL",

"value": "100"

},

"paymentMethod": {

"paymentMethodType": "CARD",

"paymentMethodMetaData": {

"paymentMethodRegion": "BR"

}

},

"paymentRedirectUrl": "https://www.yourMerchantWeb.com",

"paymentNotifyUrl": "https://www.yourNotifyUrl",

"paymentFactor": {

"isAuthorization": true

},

"env": {

"clientIp": "112.80.248.78"

},

"settlementStrategy": {

"settlementCurrency": "EUR"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

{

"paymentSessionData": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Kvvmsdk

      +akdLvoShW5avHX8e8J15P8uNVEf/PcCMyXg==&&SG&&111",

"paymentSessionExpiryTime": "2023-04-06T03:28:49+08:00",

"paymentSessionId": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Ikyj9FPVUOpv

      +DjiIZqMe",

"result": {

"resultCode": "SUCCESS",

"resultMessage": "success.",

"resultStatus": "S"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

More information
----------------

About the _order_ field: Alipay does not verify the consistency of the amount in the _order_ field and the amount in the payment request. The order information is not applied in fund operations either. This field is mainly used for risk control, supervision, regulatory reporting, and consumption records display. Use the _env_ field if the risk control capability provided by Alipay is needed.

Sample for the order field

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The payment session is successfully created. No further action is needed.
 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| NO\_PAY\_OPTIONS | F | No payment options are available. | 

Contact Antom Technical Support for detailed reasons.



 |
| CARD\_NOT\_SUPPORTED | F | The card used for the transaction is not supported. | 

Use another card to pay the transaction.



 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
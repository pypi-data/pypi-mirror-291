沙箱 | 开发参考 | 支付宝文档
==================

[![图片 1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片 2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fref%2Fsandbox)

[返回首页](../../)

开发参考

[沙箱环境](/docs/ac/ref/sandbox)

[如何测试信用卡支付](/docs/ac/ref/card)

[如何测试支付宝+支付方式](/docs/ac/ref/wallet)

[如何测试其他支付方式](/docs/ac/ref/other)

[测试钱包](/docs/ac/ref/testwallet)

[测试资源](/docs/ac/ref/test_resource)

[集成模式](/docs/ac/ref/oy9921)

[安全文件传输](/docs/ac/ref/xgcpey)

常见问题

蚂蚁通仪表盘

工具

其他参考资料

[MCC代码](/docs/ac/ref/mcccodes)

[金额对象的使用规则](/docs/ac/ref/cc)

[支付方式](/docs/ac/ref/payment_method)

[风险管理方法](/docs/ac/ref/risk_methods)

[品牌资产](/docs/ac/ref/brandasset)

沙盒
====

2024-05-22 07:34

如何使用沙盒
============

沙盒提供了一个测试环境，用于模拟支付，确保应用程序与Antom产品无缝集成。本主题将指导您如何有效地使用沙盒。

开始之前
---------

在沙盒中测试之前，请完成以下步骤：

1. 登录[Antom仪表盘](https://dashboard.alipay.com/global-payments/home)，切换到测试模式，进入**开发者** > **快速开始** > **集成资源和工具**，然后选择**集成资源**以获取沙箱客户端ID、域名和公钥。
2. 下载测试钱包应用。请参考[测试钱包](https://global.alipay.com/docs/ac/ref/testwallet)指南。

沙箱中测试
------------

在沙箱环境中，提供了多种模拟API调用的方式，你可以多次调用每个API。如果你提供相应信息，API调用之间是相互关联的。例如，你首先调用**支付**API来启动支付。然后，你可以通过指定_paymentId_调用**退款**API来针对该支付发起退款。沙箱环境中会提供支付和相关退款的信息。

此外，当您在沙箱环境中调用**支付**或**查询**API时，沙箱还会模拟不同终端类型（如WEB、WAP和APP）之间商家端和支付方式端的重定向过程。

### 对于结账支付/自动扣款

要测试结账支付和自动扣款，您可以使用提供的测试指南来模拟各种支付方式下的支付和存储卡过程。沙箱还可以通过[错误场景模拟工具](https://global.alipay.com/docs/ac/ref/error_scenario_sim_en)模拟所有错误代码，甚至包括罕见的生产环境场景。这使开发者在测试期间能够处理一致的系统逻辑。

#### 支付方式测试

| **支付方式** | **测试指南** |
| --- | --- |
| [卡支付](https://global.alipay.com/docs/ac/cashierpay/pay_type#DDFip) | [如何测试卡支付](https://global.alipay.com/docs/ac/ref/card) |
| [Alipay+支付方式](https://global.alipay.com/docs/ac/cashierpay/pay_type#mt4eB) | [如何测试Alipay+支付方式](https://global.alipay.com/docs/ac/ref/wallet) |
| [钱包](https://global.alipay.com/docs/ac/cashierpay/pay_type#IK789) | [如何测试其他支付方式](https://global.alipay.com/docs/ac/ref/other) |
| [手机银行应用](https://global.alipay.com/docs/ac/cashierpay/pay_type#KSRbI) |
| [银行转账](https://global.alipay.com/docs/ac/cashierpay/pay_type#bR1hN) |
| [在线银行](https://global.alipay.com/docs/ac/cashierpay/pay_type#llC45) |
| [柜台支付](https://global.alipay.com/docs/ac/cashierpay/pay_type#FwduU) |



#### 模拟错误场景

错误场景模拟提供了不同API结果的模拟，并返回指定的响应以供集成测试。详细信息请参考[错误场景模拟](https://global.alipay.com/docs/ac/ref/error_scenario_sim_en)。

### 订阅支付

在沙箱环境中，您可以创建、更新和取消订阅计划。沙箱会自动加快订阅扣款周期，以方便您的验证过程。下表说明了其工作原理。



| **periodRule.periodType** | **periodRule.periodCount** | **沙箱加速间隔（分钟）** | **加速频率** |
| --- | --- | --- | --- |
| `DAY` | `31` | 3 | 12 |
| `93` | 3 | 12 |
| `366` | 3 | 12 |
| `WEEK` | `1` | 3 | 12 |
| `MONTH` | `1` | 3 | 12 |
| `3` | 15 | 12 |
| `6` | 30 | 12 |
| `YEAR` | `1` | 60 | 12 |
|  | | | |



例如，创建一个订阅周期为31天的订阅计划。

```json
{
  "订阅请求ID": "REQUEST_20240409141836419",
  "订阅描述": "订阅测试",
  "支付方式类型": "GCASH",
  "环境": {
    "操作系统类型": "ANDROID",
    "终端类型": "APP"
  },
  "订单信息": {
    "订单金额": {
      "货币": "PHP",
      "值": "100"
    }
  },
  "支付金额": {
    "货币": "PHP",
    "值": "100"
  },
  "周期规则": {
    "周期数": 31,
    "周期类型": "DAY"
  },
  "结算策略": {
    "结算货币": "USD"
  },
  "订阅开始时间": "2024-04-09T14:18:36+08:00",
  "订阅结束时间": "2074-04-09T14:18:36+08:00",
  "订阅过期时间": "2024-04-09T14:48:36+08:00",
  "订阅通知URL": "https://www.baidu.com",
  "订阅重定向URL": "https://alipay.com/subscriptionNotify",
  "支付通知URL": "https://alipay.com/subscriptionPayNotify"
}
```

按照[如何测试Alipay+支付方式](https://global.alipay.com/docs/ac/ref/wallet)的指示在沙箱环境中完成存档过程，之后您将每3分钟收到一次扣款通知。第十三次扣款后，扣款周期停止加速。加速周期内的最后一次扣款通知详情如下：

```json
{
    "支付金额": {
        "货币": "PHP",
        "值": "100"
    },
    "支付创建时间": "2024-04-08T23:59:00-07:00",
    "支付ID": "202404091940108001001886J0299059200",
    "支付时间": "2024-04-08T23:59:03-07:00",
    "周期结束时间": "2025-05-16T23:18:36-07:00",
    "周期开始时间": "2025-04-15T23:18:36-07:00",
    "阶段编号": "13",
    "结果": {
        "结果代码": "SUCCESS",
        "结果消息": "success",
        "结果状态": "S"
    },
    "订阅ID": "202404091900000000000009D0000004046",
    "订阅请求ID": "REQUEST_20240409141836419",
    "订阅编号": "13"
}
```

要查看文档的最新更新，请访问[版本更新日志](https://global.alipay.com/docs/releasenotes)。

![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 本页内容

[如何使用沙箱](#p9X19 "如何使用沙箱")

[开始之前](#xh0P0 "开始之前")

[在沙箱中测试](#hgYcM "在沙箱中测试")
```

[支付结账/自动扣款](#A3VRp "支付结账/自动扣款")

[支付方式测试](#IyR8b "支付方式测试")

[模拟错误场景](#nijOn "模拟错误场景")

[订阅支付](#RcC5W "订阅支付")
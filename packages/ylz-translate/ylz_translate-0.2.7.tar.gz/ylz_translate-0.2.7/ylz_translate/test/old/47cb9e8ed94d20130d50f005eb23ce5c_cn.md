# 退款

## 退款概述

2023年8月31日 07:50

完成支付后，如果买家要求退款，您可以通过[**退款**](#xS4nJ)API或支付宝全球商家平台进行退款。

在退款前，您需要了解以下信息：

1. **手续费**：是否退还手续费取决于合同条款。
2. **退款汇率**：对于交易货币和结算货币不同的跨境结算，退款时会使用退款次日的支付宝汇率。
3. **部分退款**：是否允许部分退款取决于买家的支付方式，详情参见[支付方式的退款能力](https://global.alipay.com/docs/ac/cashierpay/payment_method_capabilities)。
4. **最低退款金额**：最低退款金额取决于买家的支付方式，详情参见[支付方式的退款能力](https://global.alipay.com/docs/ac/cashierpay/payment_method_capabilities)。
5. **退款期限**：退款期限取决于买家的支付方式，详情参见[支付方式的退款能力](https://global.alipay.com/docs/ac/cashierpay/payment_method_capabilities)。

## 通过API退款

您可以使用API发起退款并获取退款结果。退款流程如下图所示：

![001.png](https://ac.alipay.com/storage/2020/5/11/793a3d8d-5270-405b-9362-e6a670b9c842.png "001.png")

图1. 退款流程

### 发起退款

使用**退款**API发起退款请求时，需满足以下要求，否则支付宝将返回相应的错误代码：

| 项 | 要求 | 错误代码 |
| --- | --- | --- |
| 退款货币 | 请求中的`refundAmount.currency`参数值需与支付时的`paymentAmount.currency`参数值一致。 | CURRENCY_NOT_SUPPORT |
| 退款金额 | 请求中的`refundAmount.value`参数值需大于等于最低退款金额（通常与最低支付金额相同），且不超过可退款金额。 | REFUND_AMOUNT_EXCEED |
| 支付状态 | 只有当`paymentStatus`参数值为`SUCCESS`时，才允许退款。 | ORDER_STATUS_INVALID |
| 退款期限 | 退款需在对应支付方式的退款窗口期内进行。 | REFUND_WINDOW_EXCEED |
| 商家待结算账户余额 | 支付宝将从商家待结算账户余额中扣除退款金额，余额不足将导致退款失败。若合同规定手续费不退，首次全额退款将会失败。因此，建议在生产环境测试前保持足够的账户余额。 | MERCHANT_BALANCE_NOT_ENOUGH |

表1. 退款请求的要求

退款请求中的关键参数如下（详情参见**退款**API）：

| 参数 | 描述 |
| --- | --- |
| refundRequestId | 您为支付分配的唯一标识符。 |
| paymentId | 支付宝为待退款的原支付分配的唯一标识符。 |
| refundAmount | 退款金额需大于等于最低退款金额（通常与最低支付金额相同），且不超过可退款金额。 |
| refundNotifyUrl | 接收异步退款通知的URL。 |

表2. 退款请求的关键参数

### 获取退款结果

调用[**退款**](https://global.alipay.com/docs/ac/ams/refund_online)API后，支付宝会同步返回退款结果：

- 如果响应中的`result.resultStatus`值为`S`，则退款成功。
- 如果`result.resultStatus`值为`F`，则退款失败。参见[退款API的错误代码](https://global.alipay.com/docs/ac/ams/ir_online)进行故障排查。
- 如果由于网络问题未收到响应，或者`result.resultStatus`值为`U`，您可以调用[**查询退款**](https://global.alipay.com/docs/ac/ams/ir_online)API查询退款状态。响应中的`refundStatus`参数表示退款状态，如下表所示：

| refundStatus | 描述 |
| --- | --- |
| SUCCESS | 退款成功。 |
| PROCESSING | 退款处理中（也适用于错误代码`MERCHANT_BALANCE_NOT_ENOUGH`的情况）。 |
| FAIL | 退款失败。 |

表2. `refundStatus`参数解释

### 查询退款记录

您可以使用**查询退款**API查看交易的退款记录。如果交易已退款，`transactions`参数将显示交易的退款记录。

## 在支付宝商家平台上退款

您可以在[支付宝商家平台](https://intl-sea.alipay.com/ilogin/account_login.htm)上进行退款。有关如何退款以及查看退款结果的更多信息，请参阅[在支付宝商家平台上退款交易](https://global.alipay.com/docs/ac/merchant_service/transactions#QySzf)。

![](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)
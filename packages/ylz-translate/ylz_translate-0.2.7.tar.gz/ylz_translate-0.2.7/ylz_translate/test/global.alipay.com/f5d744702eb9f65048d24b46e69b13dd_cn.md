查询退款 | 产品API | 支付宝文档
==================

[![支付宝，中国领先的第三方在线支付解决方案](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![支付宝，中国领先的第三方在线支付解决方案](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fir_online)  
[返回首页](../../)

产品API  
[支付宝API](/docs/ac/ams/api)  
在线支付  
授权  
安全存储  
支付  
订阅  
争议  
退款  
[退款](/docs/ac/ams/refund_online)  
[通知退款](/docs/ac/ams/notify_refund)  
[查询退款](/docs/ac/ams/ir_online?pageVersion=14)  
声明  
店内支付  

查询退款
==========

2022年12月21日 02:39  
POST /v1/payments/inquiryRefund  
使用此API查询先前提交的退款请求的状态。

结构
======

消息由头和体组成。以下部分专注于体的结构。头的结构请参阅：

*   [请求头](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [响应头](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**注意**：除数组外，每个字段的数据类型应设置为字符串。这意味着必须使用双引号（" "）包围字段值。例如：

*   如果字段的数据类型为Integer，其值为20，则设置为"20"。
*   如果字段的数据类型为Boolean，其值为true，则设置为"true"。
### 请求参数  
#### refundRequestId 字符串  
商家为退款请求分配的唯一标识。_refundRequestId_ 和 _refundId_ 不能都为null。不支持特殊字符。如果同时指定了 _refundRequestId_ 和 _refundId_，则 _refundId_ 优先。
关于此字段的更多信息：  
*   最大长度：64个字符  
#### refundId 字符串  
支付宝为退款分配的唯一标识。_refundRequestId_ 和 _refundId_ 不能都为null。_refundId_ 与 _refundRequestId_ 存在一对一对应关系。如果同时指定了 _refundRequestId_ 和 _refundId_，则 _refundId_ 优先。
关于此字段的更多信息：  
*   最大长度：64个字符
### 响应参数  
显示全部  
#### result 结果对象 **必需**  
请求调用结果的信息。  
**注意：此字段不表示退款结果，仅表示调用查询退款接口是否成功。**  
显示子参数  
#### refundId 字符串  
支付宝为识别一次退款分配的唯一ID。退款Id与退款请求Id之间是一对一的关系。  
注：当API调用成功（result.resultStatus 的值为 `S`）时，此字段返回。  
更多关于此字段的信息  
*   最大长度：64 个字符  
#### refundRequestId 字符串  
商家为识别一次退款请求分配的唯一ID。  
注：当API调用成功（result.resultStatus 的值为 `S`）时，此字段返回。  
更多关于此字段的信息  
*   最大长度：64 个字符  
#### refundAmount 金额对象  
商家发起的退款金额。  
注：当API调用成功（result.resultStatus 的值为 `S`）时，此字段返回。  
显示子参数  
#### refundTime 日期时间  
退款在支付宝端达到最终成功状态的日期和时间。  
注：当退款成功（refundStatus 的值为 `SUCCESS`）时，此字段返回。  
更多关于此字段的信息  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式，例如 "2019-11-27T12:01:01+08:00"。  
#### refundStatus 字符串  
表示支付宝退款的最终状态。有效值为：  
*   `SUCCESS`：表示退款成功。
*   `PROCESSING`：表示退款处理中。
*   `FAIL`：表示退款失败。  
注：  
*   当API调用成功（result.resultStatus 的值为 `S`）时，此字段返回。
*   此字段仅标识支付宝侧的退款状态，不包括支付宝+移动支付提供商（Alipay+ MPP）侧的状态。  
更多关于此字段的信息  
*   最大长度：16 个字符  
#### grossSettlementAmount 金额对象  
退款结算金额，等于退款金额乘以`settlementQuote`的值。当交易时预先确定货币兑换且汇率锁定时，此字段返回。  
显示子参数  
#### settlementQuote 汇率对象  
结算货币与交易货币之间的汇率。当`grossSettlementAmount`返回时，此字段返回。  
显示子参数  
API 探索器  
示例代码在 沙箱中运行
### 请求  
URL  
北美地区  
https://open-na-global.alipay.com/ams/api/v1/payments/inquiryRefund  

请求体  
复制  
1  
2  
3  
4  
{  
"refundId": "2021080419401080130018866020092XXXX",  
"refundRequestId": "amsdemorefund_zhangyikai_zyk_20210804_165236_931"  
}  

请注意，以上内容是请求退款查询的示例。在请求中，提供了两个关键参数：

1. `refundId`：退款的唯一标识，此处为 "2021080419401080130018866020092XXXX"。
2. `refundRequestId`：退款请求的ID，示例值为 "amsdemorefund_zhangyikai_zyk_20210804_165236_931"。

其余的 "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" 部分在示例中没有提供具体信息，通常可能包含额外的请求头或查询参数，但在这个例子中未给出。
### 响应  
情况  
成功  
响应体  
复制  
1  
2  
3  
4  
5  
6  
7  
8  
9  
10  
11  
12  
13  
14  
15  
{  
"refundAmount": {  
"currency": "HKD",  
"value": "10000"  
},  
"refundId": "2021080419401080130018866020092XXXX",  
"refundRequestId": "amsdemorefund\_zhangyikai\_zyk\_20210804\_165236\_931",  
"refundStatus": "SUCCESS",  
"refundTime": "2021-08-04T01:52:37-07:00",  
"result": {  
"resultCode": "SUCCESS",  
"resultMessage": "Success",  
"resultStatus": "S"  
}  
}  
更多信息
----------------  
决定何时使用\_refundRequestId\_\_或\_refundId\_\_，请遵循以下规则：  
*   如果调用**退款**API后返回成功结果，使用\_refundId\_\_或\_refundRequestId\_\_查询原始退款结果。
*   如果在调用**退款**API后发生未知异常或超时，仅使用\_refundRequestId\_\_查询原始退款结果。  
结果处理逻辑
--------------------  
对于不同的请求结果，需要执行不同的操作。详情如下：  
*   如果\_result.resultStatus\_\_的值为`S`，退款查询成功。
*   如果\_result.resultStatus\_\_的值为`F`，退款查询失败。
*   如果\_result.resultStatus\_\_的值为`U`，请求结果未知。使用相同的请求参数重试查询请求。
### 结果/错误代码  
| 代码 | 值 | 消息 | 进一步行动 |
| --- | --- | --- | --- |
| SUCCESS | S | 成功 | 接口调用成功。从 `_refundStatus_` 获取退款状态。 |
| ACCESS\_DENIED | F | 访问被拒绝 | 联系支付宝技术支持获取详细原因。 |
| INVALID\_API | F | 调用的 API 无效或未激活 | 联系支付宝技术支持解决问题。 |
| KEY\_NOT\_FOUND | F | 支付宝或商家的私钥或公钥未找到 | 检查私钥或公钥是否存在。如果不存在，请在支付宝开发者中心上传私钥。 |
| NO\_INTERFACE\_DEF | F | API 未定义 | 检查 URL 是否正确。请参考 API 文档中的端点。 |
| ORDER\_NOT\_EXIST | F | 订单不存在 | 15 秒后再次调用接口。如果重试三次仍无结果，说明订单未创建。 |
| PARAM\_ILLEGAL | F | 必需参数未传递，或存在非法参数。例如，非数字输入、无效日期或参数长度和类型错误 | 检查并验证当前 API 的必需请求字段（包括头部字段和正文字段）是否正确传递并有效。 |
| PROCESS\_FAIL | F | 发生一般业务失败 | 不要重试，通常需要人工干预。建议联系支付宝技术支持解决问题。 |
| SYSTEM\_ERROR | F | 系统错误 | 不要重试，联系支付宝技术支持获取更多详情。 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | 请求流量超过限制 | 重新调用接口以解决问题。如果未解决，联系支付宝技术支持。 |
| UNKNOWN\_EXCEPTION | U | 由于未知原因，API 调用失败 | 重新调用接口以解决问题。如果未解决，联系支付宝技术支持。 |
### 退款结果代码  
| 代码 | 值 | 消息 | 进一步行动 |
| --- | --- | --- | --- |
| SUCCESS | S | 成功 | 退款成功，无需进一步操作。 |
| ACCESS\_DENIED | F | 访问被拒绝。 | 联系支付宝技术支持获取详细原因。 |
| API\_INVALID | F | API名称或调用格式错误。 | 检查请求时API名称、HTTP方法或请求格式是否正确。 |
| CURRENCY\_NOT\_SUPPORT | F | 货币不支持。 | 联系支付宝技术支持获取详细原因。 |
| INVALID\_MERCHANT\_STATUS | F | 商户状态异常，存在限制。 | 联系支付宝技术支持获取详细原因。 |
| KEY\_NOT\_FOUND | F | 支付宝或商户的私钥或公钥未找到。 | 检查私钥或公钥是否存在。如不存在，请在支付宝开发者中心上传私钥。 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | 商户余额不足。 | 商户余额充足后再次调用接口。重试时需更改_refundRequestId_字段。 |
| MULTIPLE\_REFUNDS\_NOT\_SUPPORTED | F | 合同限制，不支持多次退款。 | 检查是否存在多次退款，不要再调用退款接口。每次退款仅调用一次接口。 |
| NO\_INTERFACE\_DEF | F | API未定义。 | 检查URL是否正确。请参考API文档中的端点。 |
| ORDER\_IS\_CLOSED | F | 请求的_paymentRequestId_与已关闭交易相同。 | 使用新的_paymentRequestId_重新发起退款。 |
| ORDER\_NOT\_EXIST | F | 订单不存在。 | 检查_paymentId_是否正确。如果正确，请联系支付宝技术支持了解具体原因。 |
| ORDER\_STATUS\_INVALID | F | 订单状态无效，交易处理中或交易失败。 | 检查订单状态并采取相应行动。交易处理中时请等待，交易失败时不要发起退款。联系支付宝技术支持了解具体原因。 |
| PARAM\_ILLEGAL | F | 必要参数未传递，或存在非法参数。例如，非数字输入、无效日期或参数长度和类型错误。 | 检查并验证当前API的必要请求字段（包括头部和主体字段）是否正确传递并有效。 |
| PROCESS\_FAIL | F | 业务处理失败。 | 不要重试，通常需要人工干预。建议联系支付宝技术支持解决问题。 |
| REFUND\_AMOUNT\_EXCEED | F | 退款总额超过支付金额。 | 确认退款总额是否超过支付金额。创建新的退款，金额小于或等于支付金额，或联系支付宝技术支持。 |
| REFUND\_WINDOW\_EXCEED | F | 退款日期超过合同约定的退款期限。 | 确认退款日期是否超过退款期限。检查合同中的退款期限或联系支付宝技术支持获取具体退款期限。 |
| REPEAT\_REQ\_INCONSISTENT | F | 金额或货币与先前请求不一致。 | 确保所有请求字段相同，或使用新的_paymentRequestId_重新发起退款。 |
| RISK\_REJECT | F | 请求因风险控制被拒绝。 | 通知用户请求因风险控制失败而被拒绝。 |
| SYSTEM\_ERROR | F | 系统错误。 | 不要重试，联系支付宝技术支持获取更多详情。 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | 请求流量超过限制。 | 重新调用接口解决问题。如未解决，联系支付宝技术支持。 |
| UNKNOWN\_EXCEPTION | U | 由于未知原因，API调用失败。 | 重新调用接口解决问题。如未解决，联系支付宝技术支持。 |

要查看文档的最新更新，请访问 [发行说明](https://global.alipay.com/docs/releasenotes)。

![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面是否有帮助？
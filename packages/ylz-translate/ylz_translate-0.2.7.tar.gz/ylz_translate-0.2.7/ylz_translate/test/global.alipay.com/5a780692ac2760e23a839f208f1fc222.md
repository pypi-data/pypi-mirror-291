Integration | Retail Stores | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fretailstore%2Fintegration)

[Go to Homepage](../../)

Retail Stores

[Introduction](/docs/ac/retailstore/intro)

[Integration](/docs/ac/retailstore/integration)

[API list](/docs/ac/retailstore/api)

Integration
===========

2021-03-04 02:19

The following sections explain you can design your system and integrate with Alipay.

System architecture
-------------------

The following figure illustrates the solution system architecture. This architecture is for your reference only, and you may design your own system according to specific business requirements.

![Image 3: retail store.png](https://cdn.nlark.com/yuque/0/2020/png/561635/1587547899379-c62a7dec-d94d-4e0a-9195-950377911870.png)

Figure 1. Alipay retail store system architecture

The retail store solution might consist of two parts: the front end and the back end. Â Each part contains several modules that serve specific business requirements.

*   **Front end:** Besides Alipay payment service, front end might also contain modules such as digital coupons (to attract customers), membership sales (for example, membership card and membership benifits), and O2O cross-selling.
*   **Back end:** Based on data analysis, back end might contain modules to analyze business data for creating customer personas, build data models for precision marketing, and find clues for selling high-margin goods.

**Alipay-provided abilities cover the following** **modules**:

*   **Payment system, digital coupons, and membership sales:** Alipay provides various tailored payment related services to meet merchants' payment requirements.
*   **Business analysis & customer persona, data models and precision marketing, and data portal:** Alipay provides various data tools to facilitate the business analysis, and help merchants gain data insights. For example, merchants can then carry out precision marketing based on data model.

Integration mode
----------------

There are three ways to connect the ECR system to Alipay. Depending the hardware, software, and partner dependencies, select an integration mode that fits.

![Image 4: image](https://cdn.nlark.com/lark/0/2018/png/65509/1545444780416-198cf7ac-b673-4062-93a5-94702fdfaca7.png)

If development resources and a direct settlement model are available, a merchant can connect the ECR through its backend processing system directly to Alipay's Barcode Payment APIs.

![Image 5: image](https://cdn.nlark.com/lark/0/2018/png/65509/1545444812696-fe986e54-fe1b-45e2-ad61-bcf2b54f3e24.png)

An Acquirer or ISV can provide Alipay as a payment method to a merchant's ECR system through existing or new APIs. For example, a merchant's existing partner (for example, a loyalty card provider) can add payment feature to its existing integration.

![Image 6: image](https://cdn.nlark.com/lark/0/2018/png/65509/1545444845299-eab70036-5e16-4b11-8fdf-ca6ea563158f.png)

A payment card acquirer can reuse the POS Terminal infrastructure to provide Alipay as an additional payment method to merchants. After scanning the Alipay payment barcode, the ECR transfers the content of the payment barcode to the POS Terminal, and the POS Terminal uses a standard acquiring network to initiate the Alipay payment.

Integrating with Alipay
-----------------------

Before starting the integration, ensure that you meet the hardware requirements. For example, the scanners that are used for reading payment code. A laser gun, a mobile device with app, or an mPOS terminal with camera can be used in this solution as long as the scanner can read the Alipay payment barcode presented on the customer's Alipay app.

See [Barcode payment - Integration](https://global.alipay.com/doc/globalbarcode/introduction) for details of the integration steps, such as prepare keys, calling APIs, testing in sandbox environment, and going live.

Best practices
--------------

In most POS scenarios, such as in supermarkets or in convenient stores, payment processing speed is one of the main focus of merchants. To avoid long waiting queue behind the POS, certain usability optimizations are necessary.

**Initiate Alipay payment automatically**

To reduce cashier training, initiate Alipay payment from ECR software by letting the cashier scan the Alipay payment barcode. If a button is required in the ECR software, name the button in a way easy to understand (for example, Alipay). In addition, to ensure that the button is easy to be found, do not hide the button in the second-level menu.

**Timeout and cancel**

In the retail store solution, usually the timeout value is set at 30 seconds. Before the timeout is reached, ECR must query the transaction status and then followed by a cancel operation immediately (where applicable) before closing the payment transaction in the ECR.

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 7](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 8](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[System architecture](#ae52c2ef "System architecture")

[Integration mode](#0d438ff8 "Integration mode")

[Integrating with Alipay](#90729398 "Integrating with Alipay")

[Best practices](#c2ffe02d "Best practices")
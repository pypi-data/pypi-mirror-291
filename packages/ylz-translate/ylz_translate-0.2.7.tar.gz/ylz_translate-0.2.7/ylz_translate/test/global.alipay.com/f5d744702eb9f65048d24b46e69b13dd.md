inquiryRefund | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fir_online)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

Subscription

Dispute

Refund

[refund](/docs/ac/ams/refund_online)

[notifyRefund](/docs/ac/ams/notify_refund)

[inquiryRefund](/docs/ac/ams/ir_online?pageVersion=14)

Declaration

In-store payments

inquiryRefund
=============

2022-12-21 02:39

POST /v1/payments/inquiryRefund

Use this API to inquire about the refund status of a previously submitted refund request.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20".
*   If the data type of a field is Boolean and its value is true, set it as "true".

### Request parameters

#### refundRequestId String  

The unique ID assigned by a merchant to identify a refund request. _refundRequestId_ and _refundId_ cannot both be null. Special characters are not supported. If both _refundRequestId_ and _refundId_ are specified, _refundId_ takes precedence.

More information about this field

*   Maximum length: 64 characters

#### refundId String  

The unique ID assigned by Alipay to identify a refund. _refundRequestId_ and _refundId_ cannot both be null. A one-to-one correspondence between _refundId_ and _refundRequestId_ exists. If both _refundRequestId_ and _refundId_ are specified, _refundId_ takes precedence.

More information about this field

*   Maximum length: 64 characters

### Response parameters

Show all

#### result Result object REQUIRED

Information about the request call result.

**Note: This field does not indicate the refund result. This field only indicates whether the inquiryRefund interface is called successfully.**

Show child parameters

#### refundId String  

The unique ID assigned by Alipay to identify a refund. A one-to-one correspondence between _refundId_ and _refundRequestId_ exists.

Note: This field is returned when the API is called successfully (the value of r_esult.resultStatus_ is `S`).

More information about this field

*   Maximum length: 64 characters

#### refundRequestId String  

The unique ID assigned by the merchant to identify a refund request.

Note: This field is returned when the API is called successfully (the value of _result.resultStatus_ is `S`).

More information about this field

*   Maximum length: 64 characters

#### refundAmount Amount object 

The refund amount that is initiated by the merchant.

Note: This field is returned when the API is called successfully (the value of _result.resultStatus_ is `S`).

Show child parameters

#### refundTime Datetime  

The date and time when the refund reaches a final state of success on the Alipay side.

Note: This field is returned when the refund succeeds (the value of _refundStatus_ is `SUCCESS`).

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### refundStatus String  

Indicates the final status of the Alipay refund. Valid values are:

*   `SUCCESS`: Indicates the refund succeeded. 
*   `PROCESSING`: Indicates the refund is under processing. 
*   `FAIL`: Indicates the refund failed.

Notes:

*   This field is returned when the API is called successfully (the value of _result.resultStatus_ is `S`).
*   This field only identifies the refund status on the Alipay side and does not include the Alipay+ Mobile Payment Provider (Alipay+ MPP) side. 

More information about this field

*   Maximum length: 16 characters

#### grossSettlementAmount Amount object 

The refund settlement amount, which equals the refund amount multiplied by the value of _settlementQuote_. This field is returned when the currency exchange is predetermined and the exchange rate is locked at the time of the transaction.

Show child parameters

#### settlementQuote Quote object 

The exchange rate between the settlement currency and transaction currency. This field is returned when _grossSettlementAmount_ is returned.

Show child parameters

API Explorer

Sample CodesRun in Sandbox

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/inquiryRefund

Request Body

Copy

1

2

3

4

{

"refundId": "2021080419401080130018866020092XXXX",

"refundRequestId": "amsdemorefund\_zhangyikai\_zyk\_20210804\_165236\_931"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Case

Success

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

{

"refundAmount": {

"currency": "HKD",

"value": "10000"

},

"refundId": "2021080419401080130018866020092XXXX",

"refundRequestId": "amsdemorefund\_zhangyikai\_zyk\_20210804\_165236\_931",

"refundStatus": "SUCCESS",

"refundTime": "2021-08-04T01:52:37-07:00",

"result": {

"resultCode": "SUCCESS",

"resultMessage": "Success",

"resultStatus": "S"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

More Information
----------------

To decide when to use _refundRequestId_ or _refundId_, follow these rules:

*   If a successful result is returned after calling the **refund** API, use _refundId_ or _refundRequestId_ to inquire about the original refund result.
*   If an unknown exception or timeout occurs after calling the **refund** API, use only _refundRequestId_ to inquire about the original refund result.

Result process logic
--------------------

For different request results, different actions need to be performed. See the following list for details:

*   If the value of _result.resultStatus_ is `S`, the refund result inquiry is successful.
*   If the value of _result.resultStatus_ is `F`, the refund inquiry failed.
*   If the value of _result.resultStatus_ is `U`, the request result is unknown. Use the same request parameters to retry the inquiry request. 

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The interface is called successfully. Obtain the refund status from _refundStatus_.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_API | F | The called API is invalid or not active. | Contact Alipay Technical Support to resolve the issue.

 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | Check whether the private key or public key exists. If not, upload the private key in Alipay Developer Center.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Call the interface again after 15 seconds. If no results are returned after three retries, the order has not been placed.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | The request traffic exceeds the limit. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

### Refund result codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The refund is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| API\_INVALID | F | The API name or API call format is used incorrectly. | Check whether the API name, HTTP method, or request format is correct when sending the request.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_MERCHANT\_STATUS | F | The merchant status is abnormal because restrictions exist. | Contact Alipay Technical Support for detailed reasons.

 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | Check whether the private key or public key exists. If not, upload the private key in Alipay Developer Center.

 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is insufficient. | Call the interface again after the merchant has sufficient balance. The _refundRequestId_ field needs to be changed when you try again.

 |
| MULTIPLE\_REFUNDS\_NOT\_SUPPORTED | F | Multiple refunds are not supported because restrictions exist in the contract. | Check whether multiple refunds exist. Do not call the refund interface anymore. For each refund, only call the interface once.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| ORDER\_IS\_CLOSED | F | The request you initiated has the same paymentRequestId as that of the existed transaction, which is closed. | Use a new _paymentRequestId_ to initiate the refund again.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Check whether _paymentId_ is correct. If correct, contact Alipay Technical Support for specific reasons.

 |
| ORDER\_STATUS\_INVALID | F | The order status is invalid. The transaction is under process or the transaction is failed. | Check the order status and take corresponding actions. Wait if the transaction is under process. Do not initiate the refund if the transaction failed. Contact Alipay Technical Support for specific reasons.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| REFUND\_AMOUNT\_EXCEED | F | The total refund amount exceeds the payment amount. | Confirm whether the total refund amount exceeds the payment amount. Create a new refund by using an amount less than or equal to the payment amount, or contact Alipay Technical Support.

 |
| REFUND\_WINDOW\_EXCEED | F | The refund date exceeds the refundable period that is agreed in the contract. | Confirm whether the refund date exceeds the refundable period. Check the refundable period in the contract or contact Alipay Technical Support for the specific refundable period.

 |
| REPEAT\_REQ\_INCONSISTENT | F | The amount or currency is different from the previous request. | Ensure all the fields in the requests are the same or use a new _paymentRequestId_ to initiate the refund again.

 |
| RISK\_REJECT | F | The request is rejected because of the risk control. | Prompt the user that the request is rejected because the risk control failed.

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | The request traffic exceeds the limit. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
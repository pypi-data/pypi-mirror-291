用户体验 | 自动扣款 | 支付宝文档
===============

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fautodebitpay%2Fuser_ex)
[返回首页](../../)

自动扣款
[概览](/docs/ac/autodebitpay/overview)
[用户体验](/docs/ac/autodebitpay/user_ex)
开发
[最佳实践](/docs/ac/autodebitpay/best_practice)
其他资源
用户体验
===============

2023-08-01 07:39

本主题提供了关于发起授权、完成授权以及接收授权结果的完整用户体验信息。还包括了商家与支付方式之间可能的重定向过程的体验。用户可以在三种商家终端类型上发起授权：WEB、WAP 或 APP。用户发起授权后，会被重定向到支付方式客户端完成授权。由于支付方式支持WEB、WAP或APP客户端类型，存在多种从商家到支付方式的重定向体验。此外，根据支付方式的能力，每种商家终端类型后续的重定向模式和所支持的重定向页面类型也不同。

以下是不同类型的商家和支付方式客户端的用户体验：

*   [商家终端类型：WEB](#b4FbL)
*   [商家终端类型：WAP](#uAvcl)
*   [商家终端类型：APP](#gL4Zp)

不同情况下的授权结果如下：

*   [授权成功](#Fq3ar)
**授权失败**  
用户体验
==========

本部分提供了一个完整的用户授权体验，包括发起授权、完成授权和接收授权结果。

商户终端类型：WEB
------------------

如果用户在WEB商户终端上发起授权，用户将被重定向到一个WEB支付方式客户端。支付方式的网页会提供以下可能的用户完成授权的方法：

1.  扫码授权
2.  登录授权

在这种情况下，用户会被重定向到支付方式的网页，展示一个二维码供用户扫描并授权。例如：

![](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646189912617-133d95b3-be48-42f2-9e79-52c02a3c8c0e.jpeg)
图1. 扫码授权类型的网页

在这种情况下，用户会被重定向到支付方式的网页，需要账户和密码来完成授权。例如：

![](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190318324-c2b6af55-e342-45f2-b508-acc0797c823c.jpeg)
图2. 提示登录的网页

下表显示了当商户终端类型为WEB时，每种支付方式提供的体验类型：

| **支付方式** | **扫码授权** | **登录授权** |
| --- | --- | --- |
| GCash | ✅ |  |
| DANA |  | ✅ |
| Touch 'n Go |  | ✅ |
| AlipayHK | ✅ |  |
| KakaoPay | ✅ |  |
| TrueMoney |  | ✅ |
| AlipayCN | ✅ | ✅ |
| Naver Pay |  | ✅ |

表1. 当支付方式客户端类型为WEB时，每种支付方式支持的网页类型

商户终端类型：WAP
------------------
如果用户在WAP商户客户端发起授权，用户将被重定向到一个WAP支付方式客户端：登录授权WAP页面。  

#### 登录授权WAP页面  
用户从WAP商户页面重定向到一个需要账户和密码来完成授权的WAP支付方式页面。  
![图5: 1-3.jpg](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190351541-59d5a02c-5ab8-454e-9ec5-64a6f424a65b.jpeg)  
图3. 从商户WAP页面重定向到登录授权WAP页面  

> **注意：**
>
> *   在支付方式部分完成授权后，用户将通过默认浏览器被重定向回商户页面，并带有_authCode_值。
> *   支付方式授权页面必须是WAP页面。如果支付方式不提供WAP授权页面，不支持从WAP商户客户端到支付方式的重定向。

下表显示了当商户终端类型为WAP时，每种支付方式提供的体验：  

| **支付方式** | **登录授权WAP页面** | **备注** |
| --- | --- | --- |
| GCash | ✅ |  |
| DANA | ✅ |  |
| AlipayHK | ✅ |  |
| KakaoPay |  | 需要安装支付方式应用来授权。 |
| Touch 'n Go | ✅ |  |
| TrueMoney | ✅ |  |
| AlipayCN |  | 需要下载支付方式应用来授权。 |
| Naver Pay | ✅ |  |  
表2. 当商户终端类型为WAP时，每种支付方式支持的重定向体验  

商户终端类型：APP
---------------------------  
如果用户在APP类型的终端页面发起授权，用户将被重定向到以下可能的终端之一：  
登录授权WAP页面  
支付方式应用  
用户从商户应用重定向到一个需要账户和密码完成授权的WAP支付方式页面。
![图4：从商户应用到WAP支付方式页面的重定向](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190371092-0a88bbc6-1be1-41f5-9749-ac3b83c674d2.jpeg)  
图4. 从商户应用到WAP支付页面的重定向  
用户从商户应用被重定向到支付方式应用以完成支付：  
*   如果用户已安装支付方式应用，将打开支付方式应用。
*   如果用户未安装支付方式应用，用户将被重定向到以下其中一个WAP页面：  
    *   用于授权的登录WAP页面
    *   下载支付方式应用的WAP页面  

**已安装支付方式应用**  
如果用户已安装支付方式应用，用户将从商户应用被重定向到支付方式应用，通过以下三种可能的方式之一完成授权：  
*   通过通用链接或应用链接：用户被重定向到打开支付方式应用以完成授权。  
![图5：通过通用链接或应用链接从商户应用到支付方式应用的重定向](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190389954-e9ee70b1-f566-4586-8feb-2ac8a73fe55c.jpeg)  
图5. 通过通用链接或应用链接从商户应用到支付方式应用的重定向  
*   通过中间页面：用户首先被重定向到打开中间页面，然后打开支付方式应用以完成授权。  
![图6：通过中间页面从商户应用到支付方式应用的重定向](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190413144-fb674e56-d22a-4168-b28d-542ed2de32c0.jpeg)  
图6. 通过中间页面从商户应用到支付方式应用的重定向  
*   通过动态链接：仅适用于GCash，通过动态链接打开支付方式应用。  
![图7：通过动态链接从商户应用到支付方式应用的重定向](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190431833-28af9a62-a98c-4bdb-b7af-cb6ef0d813e2.jpeg)  
图7. 通过动态链接从商户应用到支付方式应用的重定向  

**未安装支付方式应用**
如果用户未安装支付方式应用，用户将被重定向到以下其中一个WAP页面：

1.  下载支付方式应用的WAP页面：
    ![图片10：1-8.jpg](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190471981-9b812630-ed7a-4c4d-bb23-a6db93204090.jpeg)
    图8. 引导用户下载支付方式应用的WAP页面

2.  登录授权的WAP页面：
    ![图片11：1-9.jpg](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1646190483974-47108d4f-8a14-492b-aef2-23789638e433.jpeg)
    图9. 登录授权的WAP页面

**注意**：

*   如果用户已安装支付方式应用，应用将通过以下方式之一打开：

    *   通过通用链接或应用链接
    *   通用链接：允许用户在iOS系统中智能地跟随链接到您的应用内的内容或网站。更多信息请参阅[iOS通用链接](https://developer.apple.com/ios/universal-links/)。
    *   应用链接：当点击时，直接将用户带到特定应用内的页面。更多信息请参阅[Android App Links](https://developer.android.com/training/app-links)。

    *   通过中间页面
    *   通过动态链接（仅限GCash）

*   用户被重定向到哪种类型的支付方式客户端取决于目标支付方式的能力以及商家的[集成方法](https://global.alipay.com/docs/ac/autodebitpay/redirect_merchant-wallet#UWtzO)。在[**consult**](https://global.alipay.com/docs/ac/ams/authconsult)响应中，_authUrl_ 值返回的三种类型的URL，每种类型将引导用户到不同的支付方式重定向体验：

    *   如果_authUrl_ 值是一个普通的WAP地址，用户将被重定向到登录授权的WAP页面。
> * 如果`authUrl`是一个URL方案（WAP方案），用户会被重定向先打开浏览器，然后打开支付方式应用。
> * 如果`authUrl`是一个通用链接或应用链接，用户会被直接重定向到打开支付方式应用。
> 
> 下表展示了当商家终端类型为APP时，每种支付方式提供哪种体验：
> 
> | **支付方式** | **登录授权WAP页面** | **支付方式应用** |
> | --- | --- | --- |
> | **已安装** | | **未安装** |
> | **先打开中间页面，然后打开** | **通过通用链接或应用链接打开** | **打开WAP页面** |
> | GCash |  | ✅ |  | ✅ 登录授权WAP页面 |
> | DANA | ✅ |  |  |  |
> | AlipayHK |  |  | ✅ | ✅ 登录授权WAP页面 |
> | KakaoPay |  | ✅ |  | ✅ 支付方式应用下载WAP页面 |
> | Touch 'n Go |  |  | ✅ | ✅ 登录授权WAP页面 |
> | TrueMoney |  |  | ✅ | ✅ 支付方式应用下载WAP页面 |
> | AlipayCN |  |  | ✅ | ✅ 支付方式应用下载WAP页面 |
> | Naver Pay | ✅ |  |  |  |
> 表3. 商家客户端类型为APP时，支持的重定向体验
> 
> 授权结果
> ===========
> 
> 不同情况下的授权结果如下：
> 
> 授权成功
> ------------
> 
> 如果用户成功完成授权，不同客户端类型的显示授权结果页面如下：
> 
> | **页面** | **WEB到WEB** | **WAP到WAP** | **APP到WAP** | **APP到APP** |
> | --- | --- | --- | --- | --- |
> | **授权结果（商家页面）** | 图像 | 图像 | 图像 | 图像 |
> 表4. 不同客户端类型的成功授权结果页面
> 
> 授权失败
> ------------

请注意，上述文本中的"图像"表示在实际文档中会有相应的图片展示，翻译文本中无法包含这些图片。
通常，用户因授权超时或主动退出而无法完成授权。以下是根据以下失败原因，针对不同支付方式的授权结果页面：

**授权超时**

| 支付方式 | GCash | AlipayCN | KakaoPay | DANA / AlipayHK / Touch 'n Go / TrueMoney |
| --- | --- | --- | --- | --- |
| 页面 | 用户体验 | 用户体验 | 不支持授权超时功能 | 支持 |
| 商家重定向 | 不支持 | 不支持 |  | 支持 |

表5. 超时的授权结果页面

**用户主动退出**

| 钱包 | GCash | DANA | AlipayHK | KakaoPay | Touch 'n Go | TrueMoney | AlipayCN |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 页面 | 用户体验 | 不支持主动退出功能 | 用户体验 |  | 用户体验 | 用户体验 | 用户体验 |
| 商家重定向 | 不支持 | 不支持 | 不支持 | 不支持 | 不支持 | 支持 | 不支持 |

表6. 用户主动退出的授权结果页面

**注意**：对于每种支付方式的不同集成任务，您可能会使用各种交易金额和货币。详细信息请参阅[Amount对象的使用规则](https://global.alipay.com/docs/ac/ref/cc)。

更多信息：

* [从商家重定向到支付方式](https://global.alipay.com/docs/ac/autodebitpay/redirect_merchant-wallet)
* [从支付方式重定向到商家](https://global.alipay.com/docs/ac/autodebitpay/redirect_wallet-merchant)
* 查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。
请注意，由于Markdown格式的限制，图片无法直接翻译，但我会提供文字内容的翻译。以下是文档的中文版：

---

### 阿里巴巴集团 © 2024 蚂蚁金服 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 在此页面上

[用户体验](#GsYWD "用户体验")  
[商户终端类型：WEB](#b4FbL "商户终端类型：WEB")  
[商户终端类型：WAP](#uAvcl "商户终端类型：WAP")  
[登录授权WAP页面](#EM7TS "登录授权WAP页面")  
[商户终端类型：APP](#gL4Zp "商户终端类型：APP")  
[授权结果](#YK0z5 "授权结果")  
[授权成功](#Fq3ar "授权成功")  
[授权失败](#GUdqV "授权失败")  
[更多信息](#eqLhf "更多信息")

---

请注意，上述内容是基于提供的Markdown格式文档中的标题翻译的。如果文档中还有其他详细信息或内容，需要提供完整的Markdown源代码才能进行全面翻译。
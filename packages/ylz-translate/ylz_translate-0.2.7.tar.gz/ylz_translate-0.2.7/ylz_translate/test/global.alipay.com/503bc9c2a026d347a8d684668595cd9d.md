Card vaulting | Checkout Payment | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fcvsdk)

[Go to Homepage](../../)

Checkout Payment

[Overview](/docs/ac/cashierpay/overview)

Accept payments

After payments

Payment methods

Other resources

Advanced features

[Pre-front solutionAPI](/docs/ac/cashierpay/prefront)

[Buy now pay laterAPI](/docs/ac/cashierpay/bnpl)

[Card vaultingAPI](/docs/ac/cashierpay/cv)

[Card vaultingSDK](/docs/ac/cashierpay/cvsdk)

[Card payment featuresAPISDK](/docs/ac/cashierpay/mf?pageVersion=7)

Card vaulting
=============

2024-05-11 10:13

Antom SDK is a pre-built UI component designed to collect card information and manage 3D authentication processes for merchants. Integration of the component does not require merchants to be PCI-eligible, making it ideal for those who prefer to entrust Antom to collect card information.

Payment flow
============

For each payment method, the payment flow is composed of the following steps:

![Image 3: 下载.svg](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1712894644625-8b82f0cf-c338-4c96-8dc4-c840456bca76.svg)

*   The buyer lands on the checkout page.
*   Your server creates a vaulting session.
*   Your client creates and invokes the Component with the vaulting session.
*   The component collects payment elements from the buyer.
*   Your server receives vaulting result notifications.

Integration steps
=================

Start your integration by taking the following steps.

1.  Create a vaulting session
2.  Create and invoke the SDK
3.  Obtain vaulting result

Step 1: Create a vaulting session Server-side
---------------------------------------------

When a buyer selects a payment method provided by Antom, you need to collect key information such as the vaulting request ID, vaulting redirect page URL, vaulting result notification URL, etc. and call the **createVaultingSession** API to create a vaulting session and return the vaulting session to the client.

Antom provides a multi-language server-side API library and follow the steps below with Java (Java 6 or higher) as an example.

### Install an API library

You can find the latest version on [GitHub](https://github.com/alipay/global-open-sdk-java).

copy

    <dependency>
      <groupId>com.alipay.global.sdk</groupId>
      <artifactId>global-open-sdk-java</artifactId>
      <version>2.0.21</version>
    </dependency>

### Initialize request instance

Create a singleton resource to make a request to Antom.

copy

    import com.alipay.global.api.AlipayClient;
    import com.alipay.global.api.DefaultAlipayClient;
    
    String merchantPrivateKey = "YOUR PRIVATE KEY";
    String alipayPublicKey = "ALIPAY PUBLIC KEY"
    AlipayClient defaultAlipayClient = new DefaultAlipayClient(EndPointConstants.SG,
                    merchantPrivateKey, alipayPublicKey);

### Create a vaulting session

Creating a vaulting session involves the following parameters:

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="668c91187cdc5ae71659f7f6474c4766" id="ue38567b6" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="6c834291bcc4f2a4e7fa3f3bb0f4c461" id="uf08cd1d4" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="43ced9e6f1ad8783be7f45f70f94a629" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="6c6acf4fb180c5accb2d84b5f710a929" id="u13e60852" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">paymentMethodType</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="e7eb090100bd231eaddc1b4b61d0d56a" id="ubad826e0" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="84089eaeaaadbd07944f0253dcee49a2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The payment method that you needs to bind.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="fd14681e9545a4140e67cbe7de7836ab" id="u86726a03" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">vaultingRequestId</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="53ec2abab5b797a89ed8f30b5f97df02" id="uf44a1a4c" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span></p></td><td style="text-align:left;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="d67b0509f2eabae8397807f3c1b79755" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Unique ID generated by the merchant, a new ID is required each time a vaulting session is initiated.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="595f3ac063bed42eb61ea88eb26e4752" id="u4e6ff591" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">vaultingNotificationUrl</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="0823d26ea1a87d017e2a4a772cb9fbe9" id="udcf296a7" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="269fdef4a6c0a84e2374a16184c038e4" id="u68dc3529" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The notification address of the vaulting result.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="47cb4f154d3915cb299964a271239ac8" id="uef5976f3" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">redirectUrl</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="45e56193679064fbe5178fcea3661db2" id="u7c87723b" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="9e144f7644f10b911db56ef82fcced02" id="u72b0107d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The URL to jump to after the vaulting is completed.</span></p></td></tr></tbody></table>

The above parameters are the basic parameters for creating a payment session, for full parameters and additional requirements for certain payment methods please refer to [**createVaultingSession**](https://global.alipay.com/docs/ac/ams/vaulting_session)**.**

#### Sample codes of calling the createVaultingSession API

The following sample code shows how to call the **createVaultingSession** API:

copy

    AlipayVaultingSessionRequest alipayVaultingSessionRequest = new AlipayVaultingSessionRequest();
    alipayVaultingSessionRequest.setPath("/ams/api/v1/vaults/createVaultingSession");
    
    // replace to your paymentRequestId
    alipayVaultingSessionRequest.setVaultingRequestId("vaultingRequestId_001");
    
    alipayVaultingSessionRequest.setPaymentMethodType("CARD");
    alipayVaultingSessionRequest.setVaultingNotificationUrl("http://www.yourNotifyUrl.com");
    alipayVaultingSessionRequest.setRedirectUrl("http://www.yourRedirectUrl.com");
    
    AlipayVaultingSessionResponse alipayVaultingSessionResponse;
    
    try{
        alipayVaultingSessionResponse = defaultAlipayClient.execute(alipayVaultingSessionRequest);
    }catch (AlipayApiException e){
        String errorMsg = e.getMessage();
    }

The following code shows a sample of the request message:

copy

    {
      "paymentMethodType": "CARD",
      "vaultingRequestId": "vaultingRequestId_001",
      "vaultingNotificationUrl": "http://www.yourNotifyUrl.com",
      "redirectUrl": "http://www.yourRedirectUrl.com"
    }

The following code shows a sample of the response, which contains the following parameters:

*   _vaultingSessionData_: the vaulting session to be returned to the frontend
*   _vaultingSessionExpiryTime_: the expiration time of the vaulting session.

copy

    {
      "vaultingSessionData": "WxJmmCKNyIh2UOSxcMM52ljZKHpQdVVeZf7AqTB4ZywITFwBt6BfAvkCoac/OlrJdX+o7kZZ25q1iZ5t7555Xw==&&SG&&188&&eyJleHRlbmRJbmZvIjoie1widmVyc2lvbk1hcFwiOntcIndlYlwiOntcIjEuMS4wXCI6e1widGFyZ2V0V2ViVmVyaXNvblwiOlwiMS4xLjBcIn0sXCIxLjIuMFwiOntcInRhcmdldFdlYlZlcmlzb25cIjpcIjEuMi4wXCJ9fSxcImlPU1wiOntcIjEuMS4wXCI6e1widGFyZ2V0V2ViVmVyaXNvblwiOlwiMS4xLjBcIn0sXCIxLjIuMFwiOntcInRhcmdldFdlYlZlcmlzb25cIjpcIjEuMi4wXCJ9fSxcIkFuZHJvaWRcIjp7XCIxLjEuMFwiOntcInRhcmdldFdlYlZlcmlzb25cIjpcIjEuMS4wXCJ9LFwiMS4yLjBcIjp7XCJ0YXJnZXRXZWJWZXJpc29uXCI6XCIxLjIuMFwifX19fSIsInBheW1lbnRTZXNzaW9uQ29uZmlnIjp7InBheW1lbnRNZXRob2RDYXRlZ29yeVR5cGUiOiJDQVJEIiwicHJvZHVjdFNjZW5lIjoiVkFVTFRJTkciLCJwcm9kdWN0U2NlbmVWZXJzaW9uIjoiMS4wIn19",
      "vaultingSessionExpiryTime": "2023-11-22T17:47:08+08:00",
      "vaultingSessionId": "WxJmmCKNyIh2UOSxcMM52ljZKHpQdVVeZf7AqTB4ZyyidRSREbL0YHpqq/hjPUaE",
      "result": {
        "resultCode": "SUCCESS",
        "resultMessage": "success.",
        "resultStatus": "S"
      }
    }

### FAQs

#### How to set the vaulting result notification address?

The vaulting result will be [notified](https://global.alipay.com/docs/ac/ams/paymentrn_online) to you via [**notifyVaulting**](https://global.alipay.com/docs/ac/ams/notify_vaulting) API. The URL can be passed in through the _vaulting__NotifyUrl_ parameter in the **createVaultingSession** API.

Step 2: Create and invoke the SDK Client-side
---------------------------------------------

The Antom SDK is a component used for handling vaulting processes. You initiate the SDK by creating a vaulting session to collect information and switch between apps based on the payment method specified in **createVaultingSession** API.

### Install

Before beginning the integration, make sure that you have completed the following environment preparations:

*   Properly handle compatibility issues: Provide corresponding polyfills for Internet Explorer and other old browser versions. We recommend that you use [babel-preset-env](https://babeljs.io/docs/en/babel-preset-env) to address browser compatibility issues when you build a project.
*   Use the following recommended browser versions:

*   For mobile browsers:

*   iOS 11 and later.
*   Android 5.0 and later.

*   For computer browsers, use the following recommended versions:

<table id="DXgZ7" style="width:747px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="113" span="1"><col width="123" span="1"><col width="130" span="1"><col width="126" span="1"><col width="125" span="1"><col width="130" span="1"></colgroup><tbody><tr id="u08e6b074" style="height:127px"><td id="u12d12d70" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="08731d91aeb19bb4ddf3ccf0312fdae7" id="u442907d9" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="zH80i"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143117412-8322ebf3-b84b-48d1-a696-5cc5703d1006.png" data-raw-src="" title="image" data-height="51px" style="visibility:visible;width:51px" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143117412-8322ebf3-b84b-48d1-a696-5cc5703d1006.png" loading="lazy"></a></span><strong><span id="u7e40d0e4" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Edge</span></strong></p><p data-lake-id="23f19fbf373f76b0fb6295aaa95f13e4" id="u6af6f0af" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u0ebc1a3f" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span></p></td><td id="u2ddfe253" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a913ab34b951bd6729daf00b5aa8acf5" id="uaf1ab9f7" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u4841717a" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="fLjSJ"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143117377-62f319d6-72e5-4555-aacd-f0efc434ef9e.png" data-raw-src="" title="image" style="visibility:visible" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143117377-62f319d6-72e5-4555-aacd-f0efc434ef9e.png" loading="lazy"></a></span><strong><span id="u500f6867" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Firefox</span></strong><span id="uac75678e" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p><p data-lake-id="311d804969b42a42ceb26da69ec0441c" id="u5dbea113" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u834edd1d" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span><span id="u8462bae1" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p></td><td id="u545b2fa9" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="4684e9500d64ad9a7662bf63dbdffec8" id="u5d843aa2" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u6ac90e6e" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="Y6kff"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118111-1392b868-4947-4d0f-941c-53d54c655c8d.png" data-raw-src="" title="image" style="visibility:visible" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118111-1392b868-4947-4d0f-941c-53d54c655c8d.png" loading="lazy"></a></span><strong><span id="u51c80cf2" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Chrome</span></strong><span id="u2406b4d2" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p><p data-lake-id="682fdfce0acb405d66a81d2eeab81548" id="ud3822dcf" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u116746d0" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span><span id="u69cd60f5" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p></td><td id="u85b33924" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="7c19b33adbabe7f8fe4128f38142d679" id="u609f1a7a" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="ub5e061d0" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="l4Dxu"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118162-1fc223a0-8a35-488f-91aa-5833f5d7726a.png" data-raw-src="" title="image" style="visibility:visible" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118162-1fc223a0-8a35-488f-91aa-5833f5d7726a.png" loading="lazy"></a></span><strong><span id="ue316f93d" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Safari</span></strong><span id="u9af61bba" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p><p data-lake-id="e922eb98e493ac2977fd680416c53f15" id="u9dfa907f" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="uc15a7cab" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span><span id="u7e2aed56" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p></td><td id="u68afb414" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="ff67082b915d6b65c085ed0a92bb8a55" id="u390dabcf" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u63fd0592" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="AhSm3"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118154-fc609c28-81bf-4442-985b-fdf4d1c3554d.png" data-raw-src="" title="image" style="visibility:visible" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118154-fc609c28-81bf-4442-985b-fdf4d1c3554d.png" loading="lazy"></a></span><strong><span id="uda388252" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Opera</span></strong><span id="uba17d0f2" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p><p data-lake-id="a993609c3bd73d5ca18426eaa6a33820" id="uf8ee6932" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u0c1abf2a" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span><span id="u9cac1b24" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p></td><td id="u64e703fd" style="background-color:rgb(246, 249, 254);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b69583a1c8dfd603789463320679dc4b" id="u7b586175" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="u2b170feb" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="Aw7jF"><a href="http://godban.github.io/browsers-support-badges/" target="_blank"><img alt="image" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118867-73ee0c65-fbf2-4ff3-b18e-8fa092801c30.png" data-raw-src="" title="image" style="visibility:visible" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1680143118867-73ee0c65-fbf2-4ff3-b18e-8fa092801c30.png" loading="lazy"></a></span><strong><span id="u8b4e4e2c" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">Electron</span></strong><span id="u5456649a" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p><p data-lake-id="369a30e31e0f97d604706254140293a4" id="ua57ff78e" style="text-align:left;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span id="uf1d296ae" style="color:rgba(4, 15, 36, 0.85);background-color:#F6F9FE">Last 2 versions</span><span id="u740743fb" class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px"></span></p></td></tr></tbody></table>

You can integrate the SDK resource package via CDN or npm.

copy

    <script src="https://sdk.marmot-cloud.com/package/ams-checkout/1.10.1/dist/umd/ams-checkout.min.js"></script>

copy

    npm install @alipay/ams-checkout

### Instantiate the SDK

Create the SDK instance by using the `AMSVaulting` and specify basic configurations. Configuration objects includes the following parameters:

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a2202a1df3a6feefd6d7f903dbbb8247" id="ua2a765f8" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="3674d98823d7e9d9630bf2709895a006" id="uf8415561" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="11e99cc0e88897108ec795b680dd8c4e" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="f4bdbd1840f93cee2893881cb8d0fbfb" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">locale</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="712a3c6d61c451e0c14ff18ee290d5a6" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>It is used to pass in language information. Valid values are listed as follows. You can choose the value to pass based on the region of the payment method. If other values are passed, the local language is used by default:</span></p><ul data-lake-id="99f0f17e04f860ac69715862ba5cb1d1" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="ac335fe9360c316d04df359e7be65ed4" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>en_US</span></code><span>: English</span></li><li data-lake-id="08abac6f5463e84e41eb8c49f89f6918" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>pt_BR</span></code><span>: Portuguese</span></li><li data-lake-id="adf6750dc19125804418a70802b224b9" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>ko_KR</span></code><span>: Korean</span></li><li data-lake-id="6c5ef657889862f1b5b47ced19cfa979" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>es_ES</span></code><span>: Spanish</span></li><li data-lake-id="1f78f65d4e1fdb203750f6f05aa6f01d" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>ms_MY</span></code><span>: Malay</span></li><li data-lake-id="59ad0ff437ef9edd5c8a6804a18af8f6" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>in_ID</span></code><span>: Indonesian</span></li><li data-lake-id="ec870e80a5ecd961aafc699d436e7ddd" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>tl_PH</span></code><span>: Tagalog</span></li><li data-lake-id="bab8d4727393328dce9dd8db07642a2f" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>th_TH</span></code><span>: Thai</span></li><li data-lake-id="27737a24b0b5fa127fe74c1aa3333828" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>vi_VN</span></code><span>: Vietnamese</span></li><li data-lake-id="1af5ce824af79e181eee76a038697f2f" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>fr_FR</span></code><span>: French</span></li><li data-lake-id="d50e6157f72e3483b7539e7d372ef295" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>nl_NL</span></code><span>: Dutch</span></li><li data-lake-id="65fba6dacd93bfff04aff246a6f54ccf" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>it_IT</span></code><span>: Italian</span></li><li data-lake-id="a7bc574dcbddf2cdbbe4a42aa192053e" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>de_DE</span></code><span>: German</span></li><li data-lake-id="747905ff26f47d332817f210f2e231d7" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>zh_CN</span></code><span>: Simplified Chinese</span></li><li data-lake-id="8b51e06ab2b104f72e75bfd6d38d7807" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>zh_HK</span></code><span>: Traditional Chinese</span></li></ul></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="50b82a83efe7c5bd9985cdf74d1cc28f" id="ua5425306" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:#20304C">enviroment</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a314d6ffef0bc493c89d7be7e48f8a61" id="uef026342" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="0d931500634dd6e25ae88b01c73e831d" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>It is used to pass in environmental information. Valid values are:</span></p><ul data-lake-id="092a61ab004786b78f9c6d5e5f07ed8e" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="ebc20c3a067b6359761b62eef19c41fb" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>sandbox</span></code><span>: Sandbox environment</span></li><li data-lake-id="3c26588c365fe0f941f6f583c02691d4" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>prod</span></code><span>: Production environment</span></li></ul></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="ccec61988a8e365836d94c270bc3a3d1" id="u79865c0c" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:rgba(4, 15, 36, 0.85)">analytics</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="54161a490b98fe38cad7f0aa7396e933" id="ua7af57e1" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="0a65034961b01605a4c4efae0f65ca1b" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">It is used to configure and analyze data. It contains a value below:</span></p><ul data-lake-id="4591e377ea9010cef6b0354bd853254e" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="965cc0e57a974300c3b782bb03390bba" style="text-align:left"><em><span>enabled</span></em><span>: Optional Boolean. It defaults to true, which indicates that you allow the SDK to upload and analyze operational data to deliver a better service. If you do not allow the data to be uploaded and analyzed, specify it as </span><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>false</span></code><span>.</span></li></ul></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="acc3f75be655cb8f23144915860b49ac" id="u6fd5a75b" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:rgba(4, 15, 36, 0.85)">onLog</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="5f76c6e156f64c50d6f50dd508b49818" id="uac294f93" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a010911695b74322c46ad87403ae2a02" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">It is a callback method that is used to generate the error information about logs and API exceptions during the execution of the SDK.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="351940c5f9676d7bf53fd873fe1dea34" id="u0711d502" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:rgba(4, 15, 36, 0.85)">onEventCallback</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="d9516a550c6310841eed257d16c59119" id="u3f631d62" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8cdc36fae519f0fe41bd0fa8a9bea2ca" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">A callback function returns a specific event code when a payment event happens during SDK runtime, like payment result or a form submission error. For further information, please refer to the References.</span></p></td></tr></tbody></table>

The following sample code shows how to obtain the browser language:

copy

    let language = navigator.language || navigator.userLanguage;
    language = language.replace("-", "_"); // Replace "-" with "_"

The following sample code shows how to instantiate the SDK:

copy

    const checkoutApp = new window.AMSCashierPayment({
      environment: "sandbox",
      locale: "en_US",
      onLog: ({code, message}) => {},
      onEventCallback: ({code, message}) => {},
    });
    

### Invoke the SDK

After buyers select a payment method on the page, you need to create the vaulting session to invoke the SDK.

Use the `createComponent` or `mountComponent` function in the instance object to create a payment component:

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="36b84adae99557cf344062a295b3fce2" id="ud05300ff" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="38da946b120cc5ec8b4fe4a721bf6dc9" id="u72a34d69" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8384ac03df3a3455b74bfc237d29e646" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b5dc68e0136d0874677b66106784734a" id="ub37bee04" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:rgba(4, 15, 36, 0.85)">sessionData</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="3d7f95a7636dc996fd69724db94852a8" id="ubfbb275a" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="cc6d132fc29af80251603ecb6526f72c" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>Create a configuration object by using the </span><em><span>sessionData</span></em><span> parameter: Pass the complete data in the </span><em><span>paymentSessionData</span></em><span> parameter obtained in the response through the </span><strong><span>createVaultingSession&nbsp;</span></strong><span>API to the </span><em><span>sessionData </span></em><span>parameter.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="0e76a8add703ad626a089833bec3b9e7" id="u91ffbf88" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span style="color:rgba(4, 15, 36, 0.85)">appearance</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="d5c75039aa87a992c03935df739399ce" id="u0292d368" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b315fe5f0602b44a9133e7ba4a5aea87" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Customized appearance theme configuration, and it contains the following child parameters:</span></p><ul data-lake-id="4279c83ea11ddea95d1f17ab7b10e183" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="dcb54789cf79b31b39d0ec05f7d0db60" style="text-align:left"><em><span>showLoading</span></em><span>: Optional. Boolean type. The default value is </span><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>true</span></code><span>, which shows the default loading animation. If you don't use the default loading animation, you need to specify this value as </span><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>false</span></code><span>.</span></li><li data-lake-id="e15b5fcce4fb9dd67471103a9f452bb5" style="text-align:left"><span class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">showSubmitButton: Optional. Boolean type. The default value is </span><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">false</span></code><span class="lake-fontsize-11" data-mce-style="font-size: 11px" style="font-size:14px">, which disables the button to render payment page.</span></li></ul></td></tr></tbody></table>

**Embedded experience vs. Popup experience**

There are different ways in which you can make the Component display on a page through a pop-up window or embedded on a page.

<table id="zeOLV" style="width:750px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="375" span="1"><col width="375" span="1"></colgroup><tbody><tr id="ud611ac8a" style="height:33px"><td id="u8b5ed462" style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="1ac4d80f260c21675b3cd48c6e7c1009" id="ubbd22e9b" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span id="u99215d8c" class="lake-fontsize-12" data-mce-style="font-size: 12px" style="font-size:16px">Embedded experience</span></strong></p></td><td id="u0e5d3352" style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="d67ce6ac754ce89b895b20bfb8a75f5a" id="u2828956d" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span id="u8d9a11da">Popup experience</span></strong></p></td></tr><tr id="u0725a7ac" style="height:33px"><td id="uf2efe5e5" style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="c94058bbe84f6e6902d585fd709a8f26" id="ue825bdce" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="wS4l2" style="display:block"><img alt="image.png" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711004209329-7acacb6e-2af6-4e93-8a9f-3edb2f277b3c.png" data-raw-src="" title="image.png" data-height="591px" style="visibility:visible;width:926.667px" class="docs-image loaded showImg" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711004209329-7acacb6e-2af6-4e93-8a9f-3edb2f277b3c.png" loading="lazy"></span></p></td><td id="u6d15834c" style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="98701d8047e7a682091f7d0c471c0d62" id="u10f1c61f" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span data-card-type="inline" data-lake-card="image" contenteditable="false" id="AnNS6" style="display:block"><img alt="image.png" data-role="image" src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711005118975-de070b73-45cb-4395-a85a-13a70582d9c7.png" data-raw-src="" title="image.png" data-height="225px" style="visibility:visible;width:311.111px" class="docs-image loaded showImg" data-src="https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711005118975-de070b73-45cb-4395-a85a-13a70582d9c7.png" loading="lazy"></span></p></td></tr></tbody></table>

**Popup experience**

Popup experience offers the advantage of low impact on page style and relatively independent flow.

After the buyer selects a payment method on the page and clicks submit, the Component needs to be evoked, and the interaction popup will be rendered after loading.

copy

    async function create(sessionData) {
      await checkoutApp.createComponent({ 
        sessionData: sessionData, 
        appearance:{
          showLoading: true, // Set as true by default to enable the default loading pattern
        },
         notRedirectAfterComplete: true,
      });
    }

**Embedded experience**

The embedded experience involves rendering embedded element content within the designated view, so it's essential to focus on styling adjustments for the payment list. Our embedded content's width adjusts automatically to fit the parent container, while the height dynamically updates with view changes.

copy

    async function create(sessionData) {
      await checkoutApp.mountComponent({ 
        sessionData: sessionData, 
        appearance:{
          showLoading: true, // Default is true, allowing configuration of whether to display a loading animation.
          showSubmitButton: false, // Configure whether the payment button is rendered by the component.
        }, 
        notRedirectAfterComplete: true,
      },'#ContainerNodeId');
    }

**Embedded Submit**

When using embedded rendering and a custom submit button, remember to actively call the submit function to initiate the submission process.

copy

    // Execute when the buyer completes the form and clicks the submit button.
    checkoutApp.submit().then(({code, message})=>{})

Call the `unmount` method to free SDK component resources in the following situations:

*   When the buyer switches views to exit the checkout page, free the component resources created in the **createPaymentSession**.
*   When the buyer initiates multiple payments, free the component resources created in the previous **createPaymentSession**.
*   When the buyer completes the payment and sets _notRedirectAfterComplete_ to `true`, free the component resources after obtaining specific payment result codes.

copy

    // Free SDK component resources
    checkoutApp.unmount();

#### FAQs

##### What can I do when I receive the `SDK_CREATEPAYMENT_PARAMETER_ERROR`?

When you receive this event code, please check if the sessionData passed in is correct and complete.

##### What can I do when I receive the `SDK_PAYMENT_ERROR` or Rendering View Error?

When you receive this event code, please check the network request. There may be an exception in the initialization interface, and you need to make sure that the environment of the payment session creation request is consistent with the environment parameters of the instantiated SDK. Check whether the payment session creation parameters are passed correctly. If the interface exception still exists, you can contact us for troubleshooting.

##### What can I do when I receive the `SDK_FORM_VERIFICATION_FAILED`?

The reason could be that the buyer did not fill in all the required elements. Upon submission, an error code indicating form verification failure may be returned. It is recommended to guide the buyer on enhancing the form content.

### Display vaulting results

If you set _notRedirectAfterComplete_ to `false`, the buyer will be redirected to the vaultingRedirectUrl that you provided in **createVaultingSession** API after completing the vaulting. You can obtain the vaulting result by active query in that URL and show it to the buyer.

If _notRedirectAfterComplete_ is `true`, the vaulting result will be given through the `onEventCallback` function. The vaulting result here is only for front-end display, and the final order status is subject to the server side.

You need to customize the processing flow you want for each vaulting result through the data in the result of `onEventCallback`.

The following are the possible event codes of the vaulting result returned by `onEventCallback`:

<table style="width:873px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="264" span="1"><col width="230" span="1"><col width="379" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8b57394228ff7fd2287e54e2d9a00468" id="uf0152b64" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span>Event code</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="96d1b28fb0d8b37a1a1f0f6db5cf801e" id="ufaa01749" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span>Message</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="e86caaf7ce590a8f0b724598cf9c6dbb" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span>Solution</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="6eef44385ae229c2a6b8ab5b6ff36187" id="uf460cda0" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>SDK_ASSET_BINDING_SUCCESSFUL</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="75a86f28d6387c6337337221879cba31" id="uc9ce92b1" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Vaulting was successful.</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="d5a4aee7fec9a046d271d3ef5f0ed5e8" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Suggest redirecting </span>buyer<span style="color:rgba(4, 15, 36, 0.85)">s to the vaulting result page.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="2e6b3fcfa017bdcbb30fa6833173a655" id="u1bacb2b3" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>SDK_ASSET_BINDING_PROCESSING</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a2e9331a5f98f709d1e79ccf37c78ba6" id="u9fdceede" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Vaulting was being processed.</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="c0d3f43c437a17679ec5a85c7a11a1e2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Guide </span>buyer<span style="color:rgba(4, 15, 36, 0.85)">s to retry the vaulting based on the provided information.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="63d97eba07c5c8e11051385f6ffe360b" id="u9c93417e" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>SDK_ASSET_BINDING_FAIL</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="6f03449f8ae1827afd73d38768e4ad5d" id="u12b861da" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">Vaulting failed.</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="9c76cfef900750a0f424b6a17cd42c0e" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>You can follow the vaultingResultCode error code prompt message and redirect the </span>buyer<span> to bind the card.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="37e8494b15807697788159f0b7fe22c0" id="u332d10fa" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>SDK_ASSET_BINDING_CANCEL</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="f1397c2161b8cdfbcc0b9aa902aa8029" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>The </span>buyer<span> exits the </span><span style="color:rgba(4, 15, 36, 0.85)">vaulting</span><span> page without submitting the order.</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="44f12586065698b08764ec627e4c1bd5" id="u66fa09a2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>The SDK can be re-invoked with a </span><em><span style="color:rgba(4, 15, 36, 0.85)">vaulting</span></em><em><span>SessionData</span></em><span> within the validity period; if it has expired, the </span><em><span style="color:rgba(4, 15, 36, 0.85)">vaulting</span></em><em><span>SessionData</span></em><span> needs to be re-requested.</span></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b705793559261856c45b78ec25536d99" id="u2f14c9e4" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>SDK_ASSET_BINDING_ERROR</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="bc3b8999212715fa55e5642da3a7bfd6" id="u1dd47992" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The vaulting status was abnormal.</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="822c7fe4cc76edcd95a7aacf7d2a74f0" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>You can wait for the notification of the card binding result or re-direct the </span>buyer<span> to bind the card.</span></p></td></tr></tbody></table>

The following sample code shows how to process the `onEventCallback`:

copy

    function onEventCallback({ code, result }) {
      switch (code) {
        case code:
          'SDK_ASSET_BINDING_SUCCESSFUL';
          // Vaulting successful, free the SDK component and redirect to the vaulting result page.
          break;
        case code:
          'SDK_ASSET_BINDING_FAIL';
          // Vaulting failed. You can follow the vaultingResultCode error code prompt message and redirect the buyer to bind the card.
          break;
        case code:
          'SDK_ASSET_BINDING_ERROR';
          // Card binding is abnormal. You can wait for the notification of the card binding result or re-direct the buyer to bind the card.
          break;
        case code:
          'SDK_ASSET_BINDING_CANCEL';
          // Guide buyers to retry vaulting.
          break;
        default:
          break;
      }
    }

Step 3: Obtain vaulting result Server-side
------------------------------------------

When the buyer completes the vaulting or the vaulting timeout, Antom will send the corresponding vaulting result to the merchant through the server-side interaction, you can obtain the payment result by one of the following methods:

*   Receive the asynchronous notification
*   Inquire about the result

### **Receive the asynchronous notification**

Merchants need to implement a server-side [**notifyVaulting**](https://global.alipay.com/docs/ac/ams/notify_vaulting) API; when the vaulting is completed, or vaulting failure, Antom will send asynchronous notification through this URL.

The following code shows a sample of the notification request:

copy

    {
      "result": {
        "resultStatus": "S",
        "resultCode": "SUCCESS",
        "resultMsg": "success"
      },
      "acquirerInfo": {
        "acquirerName": "ADYEN",
        "acquirerTransactionId": "******",
        "referenceRequestId": "********"
      },
      "paymentMethodDetail": {
        "card": {
          "avsResultRaw": "4",
          "billingAddress": {
            "address1": "address1",
            "address2": "address2",
            "city": "Madrid",
            "region": "ES",
            "state": "Madrid",
            "zipCode": "280**"
          },
          "brand": "VISA",
          "cardToken": "******",
          "cvvResultRaw": "1",
          "expiredMonth": "02",
          "expiredYear": "27",
          "funding": "DEBIT",
          "issuingCountry": "BR",
          "lastFour": "0000",
          "bin": "409280",
          "issuerName": "BANCO ITAUCARD, S.A."
        },
        "paymentMethodType": "CARD"
      },
      "vaultingCreateTime": "2023-10-16T01:07:22-07:00",
      "vaultingRequestId": "requestId1697443641665"
    }

The following sample code shows how to verify the signature of the notification and make a response to the notification:

copy

    @RequestMapping(path = "/payResult", method = RequestMethod.POST)
    public ResponseEntity<AlipayResponse> paymentNotifyProcessor(HttpServletRequest request,
                                                                 @RequestBody String body) {
    
        // retrieve the required parameters from the request header.
        String requestTime = request.getHeader("request-time");
        String clientId = request.getHeader("client-id");
        String rawSignature = request.getHeader("signature");
        String signature = "";
    
        // get valid part from raw signature
        if(rawSignature==null||rawSignature.isEmpty()){
            throw new RuntimeException("empty notify signature");
        }else {
            String[] parts = rawSignature.split("signature=");
            if (parts.length > 1) {
                signature = parts[1];
            }
        }
    
        // verify payment result notify's signature
        boolean verifyResult = SignatureTool.verify(request.getMethod(), request.getRequestURI(),
                clientId, requestTime, body, signature,
                ALIPAY_PUBLIC_KEY);
        if (!verifyResult) {
            throw new RuntimeException("Invalid notify signature");
        }
    
        // update the record status with notify result
    
        // respond the server that we accept the notify
        Result result = new Result("SUCCESS", "success", ResultStatusType.S);
        AlipayResponse response = new AlipayResponse();
        response.setResult(result);
        return ResponseEntity.ok().body(response);
    }

#### FAQs

##### When will the notification be sent?

It depends on whether the payment is completed:

*   If the payment is successfully completed, Antom will usually send you an asynchronous notification within 3 to 5 seconds. For some payment methods like OTC, the notification might take a bit longer.
*   If the payment is not completed, Antom needs to close the order first before sending an asynchronous notification. The time it takes for different payment methods to close the order varies, usually defaulting to 14 minutes.

##### Will the asynchronous notification be re-sent?

If you receive an asynchronous notification from Antom, you are required to return the response in the [Sample code](https://global.alipay.com/docs/ac/cashier_payment_cn/notification) format. If you do not respond to the asynchronous notification as required, or the asynchronous notification is not delivered due to network reasons, the notification will be automatically resent within 24 hours. The notification can be resent up to 8 times or until a correct response is received to terminate delivery. The sending intervals are as follows: 0 minutes, 2 minutes, 10 minutes, 10 minutes, 1 hour, 2 hours, 6 hours, and 15 hours.

##### Do I need to add a digital signature to the response?

If you receive an asynchronous notification from Antom, you are required to return the response in the [Sample code](https://global.alipay.com/docs/ac/cashier_payment_cn/notification) format, but you do not need to add a digital signature to your response.

##### How do I understand the meaning of the following key fields?

*   _result_: the vaulting result of the order.
*   _paymentMethodDetail:_ the vaulting key information such as `cardToken`.

### **Inquire about the result**

The merchant can call the [**inquireVaulting**](https://global.alipay.com/docs/ac/ams/inquire_vaulting) API to initiate a query on the result of an order.

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="72ff6931768a8c47b2316d5df78e37d2" id="ue21c967f" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="7f38f31a0530cadd98bf10ec37e31fb6" id="u84887414" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="41e10cf2ea96babaea20c23fee727521" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="7e49e0d53f5e69ec25b0653247dd969e" id="u6e9473cf" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>vaultingRequestId</span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="11191f2737dbbf15630363be9bea7295" id="ue5a82a97" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span><span></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="7e7143a7cc6c4f13763bc4855021b727" id="ub536f85e" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The vaulting request ID generated by the merchant.</span></p></td></tr></tbody></table>

The following sample code shows how to call the **inquiryVaulting** API:

copy

    AlipayClient defaultAlipayClient = new DefaultAlipayClient(EndPointConstants.SG,
            merchantPrivateKey, alipayPublicKey);
    
    AlipayPayQueryRequest alipayPayQueryRequest = new AlipayPayQueryRequest();
    alipayPayQueryRequest.setClientId(CLIENT_ID);
    alipayPayQueryRequest.setPath("/ams/api/v1/payments/inquiryPayment");
    
    AlipayPayQueryResponse alipayPayQueryResponse;
    try {
        alipayPayQueryResponse = defaultAlipayClient.execute(alipayPayQueryRequest);
    } catch (AlipayApiException e) {
        String errorMsg = e.getMessage();
        // handle error condition
    }

The following code shows a sample of the request message:

copy

    {
      "vaultingRequestId": "123456789206"
    }

The following code shows a sample of the response message:

copy

    {
      "paymentMethodDetail": {
        "card": {
          "brand": "VISA",
          "cardToken": "ALIPAY9CGwsAeMBug+G2dSKDV6AIsNKTxAFNkOMoj8Gxvt8h0eDUbd6nO5CwMFIjEFERWxCAo/b1OjVTvtl1zspyMGcg==",
          "maskedCardNo": "************8764"
        },
        "paymentMethodType": "CARD"
      },
      "vaultingRequestId": "123487889889",
      "vaultingStatus": "SUCCESS",
      "result": {
        "resultCode": "SUCCESS",
        "resultMessage": "success.",
        "resultStatus": "S"
      }
    }

#### FAQs

##### How do I understand the meaning of the following key fields?

*   _result_: the result of the API call. It only indicates the result of the **inquiryPayment** API call. The order result should be determined based on the _paymentStatus_. `SUCCESS` and `FAIL` indicate final results, while `PROCESSING` indicates that the transaction is still in progress.
*   _paymentAmount_: amount verification. If there is a need for amount verification, this field can be used.

##### How frequently should I initiate the query?

It is recommended to initiate a round-robin query at an interval of 2 seconds until either the final payment result is retrieved or an asynchronous payment notification is received.

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 12](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 13](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[Payment flow](#eLZVd "Payment flow")

[Integration steps](#nbBeY "Integration steps")

[Step 1: Create a vaulting session](#d7WfL "Step 1: Create a vaulting session")

[Install an API library](#d3kyo "Install an API library")

[Initialize request instance](#WLui0 "Initialize request instance")

[Create a vaulting session](#Cwfah "Create a vaulting session")

[Sample codes of calling the createVaultingSession API](#cCfDw "Sample codes of calling the createVaultingSession API")

[FAQs](#lr4ng "FAQs")

[How to set the vaulting result notification address?](#rHmht "How to set the vaulting result notification address?")

[Step 2: Create and invoke the SDK](#xhgER "Step 2: Create and invoke the SDK")

[Install](#39v5P "Install")

[Instantiate the SDK](#cJVO5 "Instantiate the SDK")

[Invoke the SDK](#rJC4B "Invoke the SDK")

[FAQs](#ARgvG "FAQs")

[Display vaulting results](#UJQ0j "Display vaulting results")

[Step 3: Obtain vaulting result](#Mo7TZ "Step 3: Obtain vaulting result")

[Receive the asynchronous notification](#WDV7j "Receive the asynchronous notification")

[FAQs](#esw1y "FAQs")

[Inquire about the result](#wlAb8 "Inquire about the result")

[FAQs](#tkpZO "FAQs")
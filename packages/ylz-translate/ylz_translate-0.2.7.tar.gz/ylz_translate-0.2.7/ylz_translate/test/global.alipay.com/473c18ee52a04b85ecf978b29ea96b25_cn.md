取消 | 结账支付 | 支付宝文档
===============

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg) ![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fcancel)  
[返回首页](../../)  

结账支付
[概览](/docs/ac/cashierpay/overview)  
接受支付  
支付后  
[通知](/docs/ac/cashierpay/notifications)  
[取消](/docs/ac/cashierpay/cancel)  
[退款](/docs/ac/cashierpay/refund?pageVersion=8)  
[争议](/docs/ac/cashierpay/dispute)  
[对账](/docs/ac/cashierpay/reconcile)  
支付方式  
其他资源  
高级功能  
[预前台解决方案API](/docs/ac/cashierpay/prefront)  
[先买后付API](/docs/ac/cashierpay/bnpl)  
[卡存储API](/docs/ac/cashierpay/cv)  
[卡存储SDK](/docs/ac/cashierpay/cvsdk)  
[卡支付功能API/SDK](/docs/ac/cashierpay/mf)  

取消
======

2024-04-24 10:39

您可以使用[**取消**](https://global.alipay.com/docs/ac/ams/paymentc_online) API 来取消交易。取消期限受合同约束。

在发起取消之前，您需要了解以下信息：

*   未支付的交易在取消后，买家无法继续支付。
*   已支付的交易在取消后，支付金额将退回到买家的账户。
*   **手续费**：取消的交易将退还手续费。
*   **部分取消**：仅支持全额取消。
*   **取消期限**：取消期限取决于买家支付时使用的支付方式。详细信息见下表：
| **支付方式** | **取消期限** |
| --- | --- |
| 印尼本地支付方式及JKOPay | 不允许取消。 |
| 泰国在线银行、移动银行APP和银行转账支付方式 | * 在提交订单的支付完成前可以取消交易。 * 已支付的交易不能取消。 |
| 卡支付方式 | * 交易支付后7天内可以取消。 * 已完成支付的交易不能取消。 |
| Mercado Pago（巴西、智利、墨西哥、秘鲁） | 交易支付后7天内可以取消。 |
| 其他支付方式 | 已支付的交易在T+1日00:15前（UTC+8:00）可以取消。 |
| 表1. 支付方式的取消期限 |
**何时取消交易**
----------------
如果您有需要取消交易的业务场景（例如限时促销、酒店预订服务、票务销售服务），可以使用[**cancel**](https://global.alipay.com/docs/ac/ams/paymentc_online) API 来取消交易。交易取消后，支付状态变为`CANCELLED`。即使在交易取消后收到支付成功的通知，支付状态仍保持为`CANCELLED`。在以下场景中可以取消交易，Antom 将相应处理取消操作：
| **场景** | **结果** |
| --- | --- |
| 交易已支付且在取消期限内发出取消请求。 | 全额退款，不收取手续费。 |
| 交易未支付且在支付有效期（14分钟）内发出取消请求。 | 取消交易。如果交易在取消后被支付，将全额退款且不收取手续费。 |
| 当交易已支付，但收到Antom异步通知或使用[**查询支付**](https://global.alipay.com/docs/ac/ams/paymentri_online)API后支付结果仍未知时，发起取消请求。 | 交易被取消。如果收到已取消交易的支付成功通知，将进行全额退款且不收取手续费。 |
| 对于信用卡支付，当支付已授权但尚未扣款时，发起取消请求。 | 已授权的交易被取消。 |
**表2. 不同场景下取消请求的处理**

> **注意**：
>
> * 无法取消已退款的交易，包括全额退款和部分退款。尝试取消已退款的交易会导致`PROCESS_FAIL`错误代码。
> * 一旦信用卡支付的资金被扣款，无法取消。但可以发起退款操作。
> * 对于巴西、智利、墨西哥和秘鲁的Mercado Pago支付方式，如果设置了支付过期时间早于支付启动后7天，需要调用**cancel** API来关闭交易，以防止买家进一步支付。

**如何取消交易**

**步骤1：调用取消API**
-----------------------

可以通过[**cancel**](https://global.alipay.com/docs/ac/ams/paymentc_online) API来取消交易。请求中必须传入以下参数之一：

| **参数** | **是否必需** | **描述** |
| --- | --- | --- |
| paymentId | 可选 | Antom为交易分配的唯一标识符。 |
| paymentRequestId | 可选 | 你为请求分配的唯一标识符。 |

**表3. **cancel** API请求参数详情**

**步骤2：获取取消结果**
------------------------
在调用[**取消**](https://global.alipay.com/docs/ac/ams/paymentc_online) API 后，Antom 会通过 _result.resultStatus_ 同步返回取消结果：

| **resultStatus** | **解释** |
| --- | --- |
| S | 取消成功。*cancelTime* 表示取消成功的时间。 |
| F | 取消失败。请参考[**取消**](https://global.alipay.com/docs/ac/ams/paymentc_online) API 的[错误代码](https://global.alipay.com/docs/ac/ams/paymentc_online)进行问题排查。 |
| U | 取消状态未知。使用相同的 *paymentRequestId* 重新发送 API 请求。*paymentRequestId* 是取消操作的唯一标识，使用相同参数值重发请求不会触发多次取消。如果连续重试三次后 *result.resultStatus* 的值仍为 `U`，请联系Antom技术支持。 |

**表4. _result.resultStatus_ 的解释**

![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 本页内容

[何时取消交易](#i72v6 "何时取消交易")  
[如何取消交易](#ujrNd "如何取消交易")  
[步骤1：调用取消API](#NDy3c "步骤1：调用取消API")  
[步骤2：获取取消结果](#lOYZi "步骤2：获取取消结果")
Integration guide | EasySafePay | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Feasypay_en%2Fsdk)

[Go to Homepage](../../)

EasySafePay

[Overview](/docs/ac/easypay_en/overview_en)

Accept payments

After payments

Integration guide
=================

2024-04-30 06:18

This article provides guidance on how to integrate EasySafePay to enable password-free payment for your buyers. By integrating EasySafePay, you will no longer need to manually obtain buyer authorization, refresh payment tokens on a regular basis, or handle redirections between different clients.

Deployment
==========

EasySafePay provides two payment flows, however, the integration process for both remains the same.

Payment flows
-------------

The two payment flows offered by EasySafePay are differentiated by whether the buyer is redirected to the payment method side:

*   **Seamless experience**
*   **Redirection experience**

**Seamless payment experience**

The seamless payment experience frees buyers from redirection to the payment method client. The following graphic shows the seamless payment experience for the first-time payment and future payments.

![Image 3: 350949baddc53268cbe4f2aba31a9e84.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1689323540360-7abb49a8-5363-4587-b2ea-2eda1f89c2c1.png)

Figure 1. Payment process for a seamless experience

> **Note**: For seamless payments on computer websites, the first-time payment without account linking is not supported.

**Redirection payment experience**

The redirection payment experience requires buyers to be redirected to the payment method client for the first-time payment. The following graphic shows the redirection payment experience for the first-time payment and future payments.

![Image 4: redirection.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1688981866534-0c22462f-3d5c-4141-922c-83718335cd5a.png)

Figure 2. Payment process for a redirection experience

Prerequisites
-------------

Before integrating the SDK, familiarize yourself with the [_Integration guide_](https://global.alipay.com/docs/integration_guide_en) and [_API Overview_](https://global.alipay.com/docs/ac/ams/api_fund). This will enable you to understand the steps for integrating server APIs and notes for calling the APIs. Also, ensure that you have completed the following tasks:

*   Obtain a client ID in [Antom Dashboard](https://global.alipay.com/docs/dashboard_en).
*   Properly configure keys in Antom Dashboard.
*   Configure a URL for receiving an asynchronous notification of an authorization result and a revoked authorization result. For details, see [Notifications](https://global.alipay.com/docs/ac/cashierpay/notifications).

Implementation steps
--------------------

When implementing an EasySafePay integration, two parties are involved:

*   Server-side: Your sever sends a single API call that creates payment sessions, and obtain the authorization result and payment result.
*   Client-side: The EasySafePay component uses payment session data to manage actions such as obtaining payment account authorization and handling redirections.

Follow these steps to complete the integration:

1.  Client-side**Create an SDK instance**:  
    After your client creates the payment method page and implements the monitoring of the payment button click event, run the `AMSEasyPay` method to create the SDK instance.
2.  Server-side**Call the createPaymentSession API**:  
    After a buyer selects a payment method for payment, your server uses the buyer's order information to send a [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) request to the Alipay server. For future payments, when calling this API, you must specify the _paymentMethod.paymentMethodId_ parameter with the token obtained from [**notifyAuthorization**](https://global.alipay.com/docs/ac/ams/notifyauth) during the first-time payment.
3.  Client-side **Call the SDK**:  
    Run the `createComponent` method by using the response parameter _paymentSessionData_ of the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) API to call the SDK.
4.  **The buyer links their account and makes the payment**:  
    The buyer confirms to authorize on the authorization page and links the payment method after passing the identity verification.
5.  Server-side **(Only when the buyer agrees to the authorization during the first-time payment)** **Obtain and display the authorization result**:  
    You server obtains the authorization result and the token used for future payments via [**notifyAuthorization**](https://global.alipay.com/docs/ac/ams/notifyauth). You must display the authorization result along with the payment result on your payment result page.
6.  Server-side **Obtain and display the payment result**:  
    Your server obtains the payment result by receiving asynchronous notifications via [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online) or calling the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) API. You must display the payment result on your payment result page.

For more detailed information about EasySafePay integration on Web/WAP, Android, or iOS clients, learn the following topics:

*   [Web/Wap](https://global.alipay.com/docs/ac/easypay_en/webwap_en)
*   [Android](https://global.alipay.com/docs/ac/easypay_en/android_en)
*   [iOS](https://global.alipay.com/docs/ac/easypay_en/ios_en)

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 5](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 6](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[Deployment](#Rq8qK "Deployment")

[Payment flows](#gvnBp "Payment flows")

[Prerequisites](#gzjkF "Prerequisites")

[Implementation steps](#8ZT1Z "Implementation steps")
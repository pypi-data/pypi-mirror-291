notifyAuthorization | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fnotifyauth)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

[consult](/docs/ac/ams/authconsult)

[notifyAuthorization](/docs/ac/ams/notifyauth)

[applyToken](/docs/ac/ams/accesstokenapp)

[revoke](/docs/ac/ams/authrevocation)

Vault

Payment

Subscription

Dispute

Refund

Declaration

In-store payments

notifyAuthorization
===================

2024-04-24 07:15

> Alipay uses **notifyAuthorization** to send the authorization result to the merchant when the authorization succeeds or when the authorization cancellation succeeds.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20".
*   If the data type of a field is Boolean and its value is true, set it as "true".  

### Request parameters

Show all

#### authorizationNotifyType String  REQUIRED

Authorization notification type. Valid values are:

*   `AUTHCODE_CREATED` (for Auto Debit only): indicates that the user agrees to authorize an Auto Debit payment. After the user agrees to authorize, the wallet-generated authorization code can be obtained from this notification and be used in the **applyToken** API to obtain the access token.
*   `TOKEN_CREATED`: indicates that the user initiated authorization on the merchant's client successfully. 
*   `TOKEN_CANCELED`: indicates that the user has successfully canceled the authorization on the payment method side. 

More information about this field

*   Maximum length: 32 characters

#### authClientId String  

The unique ID of the secondary merchant to which the user grants resource access permission. The value is specified by the acquirer and needs to be registered in Alipay.

Notes:

*   This field is returned when the **consult** API is initiated by the Alipay+ MPP.
*   For an Alipay+ MPP, the value of this field is the same as the value of _referenceMerchantId_ in the [pay (Cashier Payment)](https://global.alipay.com/docs/ac/ams/payment_cashier) API.  

More information about this field

*   Maximum length: 64 characters

#### accessToken String  

The access token that is used to access the corresponding scope of the user resource.

Note: This field is returned when the value of _authorizationNotifyType_ is `TOKEN_CANCELED` or `TOKEN_CREATED`.

More information about this field

*   Maximum length: 128 characters

#### authState String  

A string that is generated by the acquirer to represent the consult request. The value of this field is to be used for validating whether being consistent with the value of _authState_ specified in the **consult** request.

Note: This field is returned when _authorizationNotifyType_ is `AUTHCODE_CREATED` and `TOKEN_CREATED`.

More information about this field

*   Maximum length: 256 characters

#### authCode String  

The authorization code, used for getting an access token. This value is obtained by the application from the reconstructed redirection URL returned by the wallet after the user is redirected to the reconstructed redirection URL.

Note: This field is returned when _authorizationNotifyType_ is `AUTHCODE_CREATED`.

More information about this field

*   Maximum length: 64 characters

#### reason String  

The reason why the authorization is canceled. This field is sent to the merchant when the user provides the reason for authorization cancellation.

Note: This field is returned when _authorizationNotifyType_ is `TOKEN_CANCELED`.

More information about this field

*   Maximum length: 256 characters

#### result Result object REQUIRED

The authorization result. Alipay returns the authorization notification only when the authorization succeeds or the authorization cancellation succeeds. Therefore, only the result of a successful authorization is provided.

Show child parameters

#### userLoginId String  

The login ID that the user used to register in the wallet. The login ID can be the user's email address or phone number.

Specify this parameter to remove the need for manual entry of the login ID by users.

More information about this field

*   Maximum length: 64 characters

#### userId String  

The ID assigned by the payment method provider to identify a user.

More information about this field

*   Maximum length: 64 characters

### Response parameters

Show all

#### result Result object REQUIRED

A fixed value that you need to send to Alipay to acknowledge that the notification is received.

Show child parameters

API Explorer

### Request

Case

A canceled authorization result

Request Body

Copy

1

2

3

4

5

6

7

8

9

{

"authorizationNotifyType": "TOKEN\_CANCELED",

"accessToken": "28100103\_20215703001538122119",

"result": {

"resultCode": "SUCCESS",

"resultMessage": "success",

"resultStatus": "S"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "Success"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Result process logic

Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:

Sample Code

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

If no such message is returned to Alipay due to operation issues or network issues, Alipay will intermittently send the notification until the required message is returned by the merchant. Resending of the notification will be performed within 24 hours after the first notification is sent. The notification will be resent up to eight times, with an interval of 0s, 2min, 10min, 10min, 1h, 2h, 6h, and 15h.

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
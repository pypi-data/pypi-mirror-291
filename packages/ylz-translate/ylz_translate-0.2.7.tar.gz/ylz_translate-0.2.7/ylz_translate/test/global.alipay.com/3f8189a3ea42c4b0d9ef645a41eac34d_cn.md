交易详情报告 | 对账 | 支付宝文档
===============

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Freconcile%2Ftransaction_details)

[返回首页](../../)

对账
[概览](/docs/ac/reconcile/overview)
[结算规则](/docs/ac/reconcile/rules)
[结算生命周期](/docs/ac/reconcile/lifecycle)
[执行对账](/docs/ac/reconcile/perform)
[交易详情报告](/docs/ac/reconcile/transaction_details)
[结算详情报告](/docs/ac/reconcile/settlement_details)
[结算汇总报告](/docs/ac/reconcile/settlement_summary)
[报告字段摘要](/docs/ac/reconcile/field_summary)

交易详情报告
==========================

2023年9月8日 02:54

交易详情报告提供了T日成功交易的详细记录，并在T+1日生成。您可以通过[SFTP服务器](https://global.alipay.com/docs/ac/reconcile/perform#LYsyS)或[支付宝全球商家门户](https://global.alipay.com/docs/ac/reconcile/perform#jfNCL)获取此报告。

报告详情
==============

交易详情报告由三部分组成：头部信息、交易详情以及报告最后一行出现的文件结束标记<END>。头部信息由参数名称表示，交易详情由参数的相应值表示。

下表列出了交易详情报告中的参数及其描述：

| **参数** | **描述** |
| --- | --- |
| 客户ID | **必填** 字符串（64）由收单方分配的，用于识别商户的唯一ID。 |
| 收单方 | **必填** 字符串（64）处理交易的收单方名称。这里的收单方特指为商户提供收单和资金结算服务的机构。 |
| 收单方参考号 | **可选** 字符串（64）非支付宝收单方为交易分配的唯一ID。当交易由非支付宝收单方结算时，指定此参数。 |
| 参考商户ID | **可选** 字符串（64）直接向用户提供服务或商品的商户的唯一ID，由主商户分配给二级商户。此参数的值需要与原始支付或授权请求中的*referenceMerchantId* 参数相同。 |
| 参考门店ID | **可选** 字符串（64）属于商户的门店的唯一ID，由主商户分配给二级商户。 |
| 交易ID | **必填** 字符串（64）支付宝分配的用于识别交易的唯一ID。此参数的值遵循以下规则：* 当*transactionType*为`PAYMENT`，`CANCEL`或`AUTHORIZATION`时，此参数的值与*paymentId*相同。* 当*transactionType*为`CAPTURE`时，此参数的值与*captureId*相同。* 当*transactionType*为`REFUND`时，此参数的值与*refundId*相同。* 当*transactionType*为`DISPUTE`时，此参数的值与*disputeId*相同。 |
| originalTransactionId | **可选** 字符串 (64) 原始交易的标识符。* 当 *transactionType* 为 `PAYMENT`, `CANCEL` 或 `AUTHORIZATION` 时，此参数值为空。* 当 *transactionType* 为 `VOID` 时，此参数值与原始授权的 *paymentId* 相同。* 当 *transactionType* 为 `REFUND` 时，此参数值与原始支付或授权的 *paymentId* 相同。* 当 *transactionType* 为 `CAPTURE` 时，此参数值与原始授权的 *paymentId* 相同。* 当 *transactionType* 为 `DISPUTE` 时，此参数值与原始授权的 *paymentId* 相同。 |
| transactionRequestId | **必填** 字符串 (64) 商家为识别交易请求分配的唯一ID。此参数值与支付时的 *paymentRequestId* 或退款时的 *refundRequestId* 相同。当 *transactionType* 为 `DISPUTE` 时，此参数值为空。 |
| referenceTransactionId | **可选** 字符串 (64) 商家直接向用户提供服务或商品时，为识别交易分配的唯一ID。此参数值与支付时的 *referenceOrderId* 相同。当 *transactionType* 为 `CANCEL`, `CAPTURE` 或 `DISPUTE` 时，此参数值为空。 |
| orderDescription | **可选** 字符串 (256) 订单的描述。此参数值与原始支付或授权的 *orderDescription* 相同。 |
| paymentMethodType | **必填** 字符串 (64) 处理支付的支付方式。查看 [支付方式](https://global.alipay.com/docs/ac/ref/payment_method) 以检查有效值。此参数值与原始支付或授权请求的 *paymentMethodType* 相同。 |
| pspName | **可选** 字符串 (64) | 支付宝+移动支付提供商的名称，例如 GCash。此参数的值与原始支付或授权请求中的 *pspName* 相同。 |
| transactionType | **必填** 字符串 | 交易类型。可能的值包括：* `PAYMENT`：表示支付过程。 * `REFUND`：表示退款过程。 * `CANCEL`：表示取消过程。 * `AUTHORIZATION`：表示授权过程。 * `CAPTURE`：表示扣款过程。 * `VOID`：表示撤销授权。 * `DISPUTE`：表示争议过程。 |
| paymentTime | **必填** 字符串 (64) | 对应交易达到最终成功状态的日期和时间，格式为 ISO 8601 标准定义的 `YYYY-MM-DDTHH:MM:SS+hh:mm`。 |
| productCode | **必填** 字符串 | 阿里巴巴与商家之间签订的支付产品类型。有效值包括：* `AGREEMENT_PAYMENT`：表示自动扣款支付。 * `CASHIER_PAYMENT`：表示收银台支付。此参数的值与原始支付或授权请求中的 *productCode* 相同。 |
| transactionAmountValue | **必填** 字符串 (16) | 交易金额的主单位（例如，对于 USD 为美元，对于 JPY 为日元）。 |
| transactionCurrency | **必填** 字符串 (3) | *transactionAmountValue* 的货币，用 ISO 4217 标准定义的 3 位货币代码表示。 |
| originalTransactionRequestId | **可选** 字符串 (64) | 交易类型为 `REFUND`、`CANCEL` 或 `CAPTURE` 时，原始交易请求的 ID。否则，此参数的值为空。 |
| installmentsNum | **可选** 字符串 (8) | 表示分期付款的次数。 |
| 发行国家 | **可选** 字符串 (2) 卡片的发行国家或地区。参数遵循 [ISO 3166 国家代码](https://www.iso.org/obp/ui/#search) 标准的 2 位国家或地区代码。此参数在 *paymentMethodType* 为 `CARD` 时指定。此参数的值与原始支付或授权请求中的 *issuingCountry* 相同。 |
| 卡品牌 | **可选** 字符串 (256) 卡片的品牌。此参数在 *paymentMethodType* 为 `CARD` 时指定。此参数的值与原始支付或授权请求中的 *cardBrand* 相同。 |
| 资金来源 | **可选** 字符串 (20) 支付方法的资金类型。当 *paymentMethodType* 的值为 `CARD`、`GRABPAY_MY` 或 `GRABPAY_SG` 时返回。当 *paymentMethodType* 为 `CARD` 时，有效值包括：* `CREDIT`：表示信用卡支付。 * `DEBIT`：表示借记卡支付。 当 *paymentMethodType* 为 `GRABPAY_MY` 或 `GRABPAY_SG` 时，有效值包括：* `WALLETS`：表示使用钱包余额的常规钱包支付。 * `BNPL_POSTPAID`：表示先买后付，用户支付全额。 * `BNPL_INSTALLMENT`：表示先买后付，用户分期付款。 此参数的值与原始支付或授权请求中的 *funding* 相同。 |

表 1. 交易详情报告中的参数和描述

> **注意**：使用头部参数解析交易详情报告。从 SFTP 服务器和支付宝全球商户门户下载的报告中的参数顺序可能与表 1 中显示的参数顺序不匹配。

报告示例
==========

示例 1（标准报告）
---------------------
在2018年12月25日的交易日，商户ID为102218800000000\*\*\*\*的商家发生了两笔交易，一笔是支付，另一笔是退款。2018年12月26日，支付宝生成了一份CSV格式的交易详情报告。报告内容如下：

```
customerId,acquirer,acquirerReferenceNo,referenceMerchantId,referenceStoreId,transactionId,originalTransactionId,transactionRequestId,referenceTransactionId,orderDescription,paymentMethodType,pspName,transactionType,paymentTime,productCode,transactionAmountValue,transactionCurrency,originalTransactionRequestId,issuingCountry,cardBrand,funding
102218800000000****,,,,201812251907410100000000011****,,20190326L64842300****,,,KAKAOPAY,KaKaoPay,PAYMENT,2018-12-25T10:00:00+08:30,AGREEMENT_PAYMENT,18000,KRW,,,,,
102218800000000****,,,,201812251907410200000000004****,201812251907410100000000011****,20190326L64842300****,,,KAKAOPAY,KaKaoPay,REFUND,2018-12-25T10:00:00+08:30,AGREEMENT_PAYMENT,-9000,KRW,20190326L64842300****,,,,
```
[附件：交易详情报告-样例1.csv](https://idocs.yuque.com/attachments/yuque/0/2023/csv/12884741/1691562019486-6be12518-e25a-4016-bcd2-773625548ba9.csv?x-yuque-pt-expires=4826829174612&x-yuque-pt-id=35944&x-yuque-pt-signature=c7xWfAGMi5Ov7xgfG2rwbqbj8sQ%3D)

在这个样本中，支付和退款的关键信息如下：

**支付信息：**
*   **交易ID**：交易ID为201812251907410100000000011\*\*\*\*，与原始支付中的**paymentId**值相同。
*   **交易金额**：交易金额为18000（韩元），与原始支付中的**paymentAmount.value**值相同。

**退款信息：**
*   **交易ID**：交易ID为201812251907410200000000004\*\*\*\*，与原始支付中的**refundId**值相同。
*   _交易金额值(transactionAmountValue)_: 交易金额为9000（韩元），与原始退款中的 _refundAmount.value_ 值相同。
*   _原始交易ID(originalTransactionId)_: 原始交易ID为201812251907410100000000011\*\*\*\*，与原始支付请求中的 _paymentId_ 相同。

示例2（无交易）
-------------------------

2018年12月25日没有交易。2018年12月26日，Alipay生成了一个空的CSV文件，仅包含参数名称和文件结束字符，如下所示：

```
customerId,acquirer,acquirerReferenceNo,referenceMerchantId,referenceStoreId,transactionId,originalTransactionId,transactionRequestId,referenceTransactionId,orderDescription,paymentMethodType,pspName,transactionType,paymentTime,productCode,transactionAmountValue,transactionCurrency,originalTransactionRequestId,issuingCountry,cardBrand,funding
<END>
```

[📎交易详情报告-示例2.csv](https://idocs.yuque.com/attachments/yuque/0/2023/csv/12884741/1691562027243-4b603cc0-71f0-4611-a6c2-480d1a8e23dd.csv?x-yuque-pt-expires=4826829174613&x-yuque-pt-id=35944&x-yuque-pt-signature=KwIm4PkQcEJKzT3fxazVa%2FUIB38%3D)

**注意**：如果没有交易，SFTP服务器和Alipay Global Merchant Portal不会生成交易详情报告。如果您需要无交易的空报告，可以联系Alipay商户服务技术支持（[overseas\_support@service.alibaba.com](mailto:overseas_support@service.alibaba.com)）在SFTP服务器上进行配置。

要查看文档的最新更新，请访问[版本说明](https://global.alipay.com/docs/releasenotes)。

![图片3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？
#### 在此页面  
[报告详情](#WuC5z "报告详情")  
[报告样例](#To4FS "报告样例")  
[样例1（标准报告）](#zNTFQ "样例1（标准报告）")  
[样例2（无交易）](#Lv4JL "样例2（无交易）")
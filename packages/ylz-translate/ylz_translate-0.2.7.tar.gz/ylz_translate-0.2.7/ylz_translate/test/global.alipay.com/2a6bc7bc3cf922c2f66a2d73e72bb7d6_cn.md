前端解决方案 | 结算支付 | 支付宝文档
===============

[![图片 1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![图片 2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashierpay%2Fprefront)  
[返回首页](../../)  

结算支付  
[概述](/docs/ac/cashierpay/overview)  
接收支付  
支付后操作  
支付方式  
其他资源  
高级功能  
[前端解决方案API](/docs/ac/cashierpay/prefront)  
[先买后付API](/docs/ac/cashierpay/bnpl)  
[卡存储API](/docs/ac/cashierpay/cv)  
[卡存储SDK](/docs/ac/cashierpay/cvsdk)  
[卡支付功能API SDK](/docs/ac/cashierpay/mf?pageVersion=7)  

前端解决方案
==================  
2024-04-24 10:39  
前端解决方案的最佳实践
=====================================  

在标准集成体验中，买家需要被重定向到支付方式页面来完成某些操作，例如选择特定的银行支付方式、输入支付详情或扫描/复制支付密码。以下最佳实践指南帮助您在自己的页面上展示银行列表、支付详情、二维码或支付密码，减少支付过程中的页面重定向，从而提升买家体验。

银行前端解决方案
-----------------------  

在标准集成方案中，买家需要在支付方式页面上选择特定的在线银行选项，然后被重定向到在线银行页面。然而，这个过程可能耗时且常常导致较高的买家流失率。为解决这个问题，银行前端解决方案允许买家直接在商家页面上选择特定银行完成支付，优化他们的在线银行支付体验。
### 用户体验  
这项预前端能力支持在Web、WAP和应用平台上的集成。下图比较了在商家应用平台上使用iDEAL支付方式时，标准解决方案和优化解决方案的买家用户体验。

| **标准解决方案** | **优化解决方案** |
| --- | --- |
| ![标准解决方案示意图](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1698922019618-4a1ad482-f872-4f71-abc8-6372a1cd424c.png) | ![优化解决方案示意图](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1698922019491-4bbce7ce-d77d-4435-8f88-7cd15ea53ecb.png) |

**表1. 标准解决方案与银行预前端解决方案的用户体验比较**

标准解决方案与优化解决方案的区别在于：
* **标准解决方案**：买家需要被重定向到一个中间的iDEAL页面来选择特定的银行。
* **优化解决方案**：买家可以直接在商家页面上选择银行，无需重定向到中间的iDEAL页面，从而减少了买家流失的可能性。
### 集成考量
该解决方案的集成步骤与标准集成流程一致，只需对API的输入和输出参数进行微小调整。

1. 当调用[**consult**](https://global.alipay.com/docs/ac/ams/consult) API 获取支付方式列表时，对于支持银行预前台解决方案的支付方式，`paymentOptionDetail` 字段会返回 `_supportBanks` 列表。以支付方式 iDeal 为例，该支付方式可用的银行列表会显示在 `paymentOptionDetail.supportBanks` 的子参数 `_bankIdentifierCode` 和 `_bankShortName` 中。此外，您可以联系技术支持获取相应的银行标识logo。
2. 调用[**pay**](https://global.alipay.com/docs/ac/ams/payment_cashier) API 进行支付时，需要传递支付方式并指定银行。例如，对于iDEAL支付方式，如果买家在iDEAL渠道中选择了Rabobank银行，您需要在**pay** API 的输入参数中包含以下内容：
   * `_paymentMethod.paymentMethodType`: `_IDEAL_`
   * `_paymentMethod.paymentMethodMetaData.bankIdentifierCode`: `_RABONL2U_`
### 支持的支付方式  
下表列出了银行预前端解决方案所支持的支付方式的枚举值、银行简称以及对应的特定银行枚举值。  
| **支付方式枚举值** | **银行简称** | **特定银行枚举** |
| --- | --- | --- |
| `paymentMethodType` | `bankShortName` | `bankIdentifierCode` |
| IDEAL | Rabobank | RABONL2A |
| IDEAL | ABN AMRO | ABNANL2A |
| IDEAL | Van Lanschot | FVLBNL21 |
| IDEAL | Bunq | BUNQNL2A |
| IDEAL | Revolut | REVOLT21 |
| IDEAL | ING Bank | MYING |
| IDEAL | Bank Islam | MYBIM |
| IDEAL | Maybank | MYPBB |
| IDEAL | CIMB Bank | MYCIMB |
| IDEAL | Public Bank | MYBPB |
| IDEAL | Affin Bank | MYAFB |
| IDEAL | Kuwait Finance House | MYKFH |
| IDEAL | OCBC Bank | MYOCBC |
| IDEAL | Standard Chartered Bank | MYSCB |
| IDEAL | UOB Bank | MYUOB |
| ONLINEBANKING_FPX | Maybank | MYMAYB |
| ONLINEBANKING_FPX | CIMB Bank | MYCIMB |
| ONLINEBANKING_FPX | RHB Bank | MYRHB |
| ONLINEBANKING_FPX | Public Bank | MYBPB |
| ONLINEBANKING_FPX | Hong Leong Bank | MYPBB |
| ONLINEBANKING_FPX | Affin Bank | MYAFB |
| ONLINEBANKING_FPX | AmBank | MYAMB |
| ONLINEBANKING_FPX | Bank Muamalat | MYBMMB |
| ONLINEBANKING_FPX | Bank of China | MYBOC |
| ONLINEBANKING_FPX | Standard Chartered Bank | MYSCB |
| ONLINEBANKING_FPX | OCBC Bank | MYOCBC |
| ONLINEBANKING_FPX | UOB Bank | MYUOB |

**表2. 银行预前端解决方案支持的支付方式**

**支付元素预前端解决方案**
------------------------

在标准集成方案中，买家需要在支付页面输入支付元素（如登录凭据、动态密码等）才能完成支付。这个过程可能耗时且往往导致较高的买家流失率。为了避免这种情况，您可以在商家页面上收集支付元素，并通过**pay** API将其传递给支付编排平台（POP），从而避免重定向，减少买家流失。
### 用户体验  
这种预前端能力也支持在Web、WAP和应用平台上的集成。下图比较了在商家应用中使用OVO支付方式时，标准解决方案和优化解决方案的买家用户体验。

| **标准解决方案** | **优化解决方案** |
| --- | --- |
| 买家需要重定向到一个中间的Antom页面来输入他们的OVO账户信息。 | 买家可以直接在商家页面上输入账户信息，无需重定向到中间的Antom页面，减少了买家流失。 |

表3. 标准解决方案与支付元素预前端解决方案的用户体验比较  

标准解决方案与优化解决方案的主要区别在于：
- **标准解决方案**：买家必须被重定向到一个Antom的中间页面来输入他们的OVO账户详情。
- **优化解决方案**：买家可以在商家的页面上直接输入账户信息，避免了重定向步骤，从而减少了用户流失的可能性。
### 集成考量  
该解决方案的集成步骤与标准集成流程一致，只需进行少量调整：  
在调用[**pay**](https://global.alipay.com/docs/ac/ams/payment_cashier) API 时，需要传递支付方式及相应的支付要素。例如，对于BLIK支付方式，如果在商户端收集了BLIK代码，需要在[**pay**](https://global.alipay.com/docs/ac/ams/payment_cashier) API中包含相应的支付要素。请参考支持的支付方式列表以获取支付要素的参数名称。
### 支持的支付方式  
下表列出了预前端支付元素解决方案所支持的支付方式、收集的支付元素、支付元素对应的参数名称以及实施此解决方案的最佳实践。  

| 支付方式 | 收集的支付元素 | 支付元素参数名称 | 最佳实践 |
| --- | --- | --- | --- |
| OVO | OVO 移动账户 | order.buyer.buyerPhoneNo | 引导买家在商户页面输入OVO移动账户，建议提示：请手动打开OVO应用并在55秒内完成支付。 |
| BLIK | BLIK 6位动态密码 | paymentMethodMetaData.blikCode | env.clientIp | env.browserInfo.userAgent | 引导买家在商户页面输入BLIK代码，建议提示：如何获取BLIK代码：请在BLIK应用中查找；如何支付：请手动打开BLIK应用并在15秒内完成支付。 |
| Przelewy24 | 买家的电子邮件 | paymentMethodMetaData.payerEmail | 引导买家在商户页面输入电子邮件或使用之前存储的买家电子邮件。使用支付接口返回的支付方法链接将买家重定向到支付方法页面。 |
| Mercado Pago（巴西） | 巴西个人税号 | paymentMethodMetaData.cpf | 引导买家在商户页面输入巴西个人税号，并手动打开Mercado Pago应用完成支付。 |
| Mercado Pago（巴西、墨西哥、智利、秘鲁） | 买家的电子邮件 | paymentMethodMetaData.payerEmail | 引导买家在商户页面输入电子邮件，并手动打开Mercado Pago应用完成支付。 |

表4. 预前端支付元素解决方案支持的支付方式

**二维码/密码预前端解决方案**
-----------------------------------

在标准集成解决方案中，买家需要导航到支付方法页面扫描二维码或输入支付密码来完成支付。然而，这个过程可能耗时且常常导致较高的买家流失率。为了缓解这个问题，你可以在商户页面上显示支付二维码或支付密码，减少重定向需求，从而降低买家流失。
### 用户体验  
此预前端能力支持在Web、WAP和App平台上集成。下图比较了买家在商户网页平台使用AlipayHK二维码预前端模式支付和在商户App平台上使用银行转账密码预前端模式支付时的用户体验、最佳实践以及标准解决方案和优化解决方案。

| **预前端模式** | **标准解决方案** | **优化解决方案** | **最佳实践** |
| --- | --- | --- | --- |
| 二维码预前端解决方案 | ![标准解决方案图片](链接) | ![优化解决方案图片](链接) | 1. 建议设置`orderCodeForm.expireTime`参数以设定超时时间，并在商户页面显示支付二维码的倒计时。 <br> 2. 建议使用浮层展示支付二维码。 <br> 3. 对于AlipayHK、AlipayCN、GCash、Touch'n Go、KakaoPay、Rabbit LINE Pay、TrueMoney、Akulaku PayLater支付方式，需根据品牌规范在浮层中展示二维码，并在代码页面底部显示“powered by A+”。 <br> 4. Qris、PayNow和PromptPay支付方式在Web、WAP和App三个平台上都有扫码体验，建议在所有三个平台上提供此功能。 <br> 5. 其他支付方式建议仅在Web上显示二维码，WAP和App上使用唤起App支付或密码支付体验。 |
| 密码预前端解决方案 | ![标准解决方案图片](链接) | ![优化解决方案图片](链接) | 1. 建议设置`orderCodeForm.expireTime`参数以设定超时时间，并在商户页面显示支付二维码的倒计时。 <br> 2. 建议使用浮层展示支付密码，浮层支持买家复制密码，并为买家提供操作提示。 |

**表5.** 标准解决方案与二维码/密码预前端解决方案用户体验对比

标准解决方案与优化解决方案的区别：
* **标准解决方案**：买家需要重定向到一个中间的Antom页面来扫描二维码或获取密码。
* **优化解决方案**：买家可以直接在商户页面上扫描二维码或获取密码，无需重定向到中间的Antom页面，减少了买家流失。
### 集成考量
尽管此解决方案的集成步骤与标准集成过程一致，但有几点重要差异需要注意：

1. 在支付请求的响应中，可以通过`orderCodeForm.codeDetails.codeValue`字段获取支付二维码或支付密码。
2. 支付二维码可以以文本格式（`displayType` = `TEXT`）或图像格式（`displayType` = `MIDDLEIMAGE/SMALLIMAGE/BIGIMAGE`）提供。支付密码则以文本格式提供。
3. 根据需要，商家可以在其页面上展示支付二维码或支付密码。

请注意，根据实际情况选择合适的显示类型以适应商户的用户体验。
### 支持的支付方式  
下表列出了二维码/密码预前台解决方案支持的支付方式以及推荐的商家端实现类型。  

| 预前台模式 | 支持的支付方式 | 推荐的商家端实现类型 |
| --- | --- | --- |
| 二维码预前台方案 | QRis, PayNow, PromptPay | Web, WAP, App |
| | AlipayHK, AlipayCN, GCash, Touch'n Go, KakaoPay, Rabbit LINE Pay, TrueMoney, Akulaku Paylater PH, ShopeePay | Web |
| 密码预前台方案 | Pix | Web, WAP, App |
| | Maybank | Web |
| | BNI | Web |
| | Permata | Web |
| | CIMBNiaga | Web |
| | Mandiri | Web |
| | BSI | Web |
| | ATMtransfer_ID | Web |
| | Bangkok Bank | Web |
| | Siam Commercial Bank | Web |
| | Bank of Ayudhya | Web |
| | Krungthai Bank | Web |
| | Kasikorn Bank | Web |
| | Government Savings Bank | Web |

**表6. 二维码和密码预前台解决方案支持的支付方式**

要查看文档的最新更新，请访问[版本说明](https://global.alipay.com/docs/releasenotes)。

[图片11](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) [图片12](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这个页面有帮助吗？

#### 本页内容

- [预前台解决方案的最佳实践](#XcoVx "预前台解决方案的最佳实践")
- [银行预前台解决方案](#GK7ay "银行预前台解决方案")
- [用户体验](#Jy6Tq "用户体验")
- [集成考虑因素](#ZOc7v "集成考虑因素")
- [支持的支付方式](#IqRnV "支持的支付方式")
- [支付元素预前台解决方案](#cfUcW "支付元素预前台解决方案")
- [用户体验](#uBvOI "用户体验")
- [集成考虑因素](#n2XOA "集成考虑因素")
- [支持的支付方式](#WGw7D "支持的支付方式")
- [二维码/密码预前台解决方案](#b2zaW "二维码/密码预前台解决方案")
- [用户体验](#QkxgQ "用户体验")
- [集成考虑因素](#dvjE5 "集成考虑因素")
- [支持的支付方式](#B8drJ "支持的支付方式")
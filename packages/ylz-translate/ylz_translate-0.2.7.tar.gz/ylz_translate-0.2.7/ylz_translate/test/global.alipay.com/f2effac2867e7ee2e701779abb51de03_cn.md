iDiagnose | 服务与工具 | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg) ![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Ftool%2Fidiagnose)  
[返回首页](../../)

服务与工具
----------

[沙箱](/docs/ac/tool/sandbox)  
[服务模拟](/docs/ac/tool/mocking)  
[iDiagnose](/docs/ac/tool/idiagnose)  
[iValidate](/docs/ac/tool/ivalidate)  
[密钥对生成与验证](/docs/ac/tool/key_pair)  
[小程序](/docs/ac/tool/miniapp)

iDiagnose
---------

2021-02-26 07:47

iDiagnose 是支付宝沙箱提供的一项功能，用于帮助您在集成过程中遇到特定错误代码时定位问题。通过 iDiagnose，您可以提高集成效率和质量，降低集成成本，提供更好的用户体验。

目前，iDiagnose 支持以下错误代码：

*   `ILLEGAL_SIGN`
*   `INVALID_PARAMETER`

在使用 iDiagnose 之前，您必须拥有一个支付宝商户账户。如果没有，请访问 [支付宝门户](https://global.alipay.com/) 进行注册。以下视频解释了如何创建支付宝商户账户：

ILLEGAL\_SIGN
-------------

当出现 `ILLEGAL_SIGN` 错误时，您可以尝试以下步骤进行诊断：

1.  首先登录 [iSandbox](https://isandbox.alipaydev.com/user/intlAccountDetails.htm)，进入 **全球产品**，然后在 **沙箱工具** 下选择 **iDiagnose**。选择错误代码 `ILLEGAL_SIGN`，产品，API，然后点击 **开始**。按照以下步骤定位错误。您可以在每个步骤中根据诊断结果调整您的集成。

**注意：**
*   当前步骤中的错误修复后，才能进入下一步。
*   确保传递了所有必需的参数。详细信息请参阅[API 文档](https://global.alipay.com/doc/global/spot_pay)。
*   如果`ILLEGAL_SIGN`的错误原因仍未找到，请联系技术支持 overseas_support@service.alibaba.com 寻求帮助。
**步骤1. 验证私钥**
此步骤检查使用的私钥是否正确。开始前，请上传与要验证的私钥配对的公钥。
如果私钥错误，请在进入下一步之前更正。
**步骤2. 检查预签名字符串**
此步骤检查预签名字符串是否正确。除了`sign`和`sign_type`，所有用于签名的参数都必须包含。
如果预签名字符串错误，请在进入下一步之前更正预签名字符串。
**步骤3. 检查签名**
此步骤检查签名是否正确生成。如果不正确，请在进入下一步之前更正签名结果。
**步骤4. 检查最终URL**（如果使用POST方法则跳过此步）
此步骤检查请求URL是否正确，特别是所有参数是否以正确的格式连接。
INVALID_PARAMETER
------------------
当出现INVALID_PARAMETER错误时，可以尝试以下步骤进行诊断。
登录[iSandbox](https://isandbox.alipaydev.com/user/intlAccountDetails.htm)，进入**全球产品**，然后在**沙箱工具**下选择**iDiagnose**。选择错误代码`INVALID_PARAMETER`，以及API（如果选择**自动匹配**，API会自动匹配）。然后输入请求URL以定位错误。诊断结果将显示出来，你可以据此调整请求。

请注意，以上翻译已尽可能简洁明了，确保没有遗漏。
### 结果示例  
#### 成功示例  
复制  
alipay.acquire.overseas.spot.pay 的请求是有效的  
请求包含所有必需参数，且请求格式正确  
#### 缺少必需参数示例  
复制  
请求中缺少一个或多个必需参数  
["service","sign_type","sign"]  
#### 格式无效示例  
复制  
alipay.acquire.overseas.spot.pay 的请求格式无效  
["trans_amount"]  
要查看文档的最新更新，请访问 [发行说明](https://global.alipay.com/docs/releasenotes)。  
![图片 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)  
#### 这个页面有帮助吗？  
#### 本页内容  
[ILLEGAL_SIGN](#yZEyl "ILLEGAL_SIGN")  
[INVALID_PARAMETER](#xhUvP "INVALID_PARAMETER")  
[结果示例](#FvCsY "结果示例")  
[成功示例](#HgDWz "成功示例")  
[缺少必需参数示例](#0pbmq "缺少必需参数示例")  
[格式无效示例](#V1b0l "格式无效示例")
测试用例 | 开发参考 | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg) ![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fref%2Ftest_case_en)  
[返回首页](../../)

开发参考
---------

[沙箱环境](/docs/ac/ref/sandbox)  
[集成模式](/docs/ac/ref/oy9921)  
[安全文件传输](/docs/ac/ref/xgcpey)  

常见问题
---------

蚂蚁通仪表盘
工具
[API 密钥配置](/docs/ac/ref/key_config_en)  
[API 调用模拟](/docs/ac/ref/api_call_sim_en)  
[错误场景模拟](/docs/ac/ref/error_scenario_sim_en)  
[测试用例](/docs/ac/ref/test_case_en)  

其他参考
---------

[MCC 代码](/docs/ac/ref/mcccodes)  
[Amount 对象使用规则](/docs/ac/ref/cc)  
[支付方式](/docs/ac/ref/payment_method)  
[风险管理方法](/docs/ac/ref/risk_methods)  
[品牌资产](/docs/ac/ref/brandasset)  

测试用例
---------

2024年4月3日 10:23

在迁移到生产模式之前，使用验收测试工具在测试模式下完成验收测试过程。验收测试基于蚂蚁通的集成规范，用于以下验证：

1.  验证调用蚂蚁通服务的请求是否符合规范。
2.  验证来自蚂蚁通的响应是否处理正确。

完成验收测试将增强您开发系统的稳定性和可用性。要进行验收测试，请登录蚂蚁通仪表盘，找到“开发者”下的“测试用例”，然后按照提示进行测试。
# 测试用例示例：支付成功
图1. 测试用例  
以“支付成功”为例，验收测试帮助开发者模拟支付的主要流程。开发者启动支付，输入认证信息，并成功完成支付。要开始此测试，点击**开始**，并按照每个步骤的指示进行。在测试运行过程中，也可以取消测试。验收测试包括5个步骤。在每个步骤中，**指令**说明所需的操作，**预期结果**是操作后的检查点。

#### 步骤1：上传结账页面的图片
首先，开发者发起支付请求。选择产品后进入结账页面。然后，开发者需要上传结账页面的图片。请注意，上传的图片需要满足数量、大小、格式等要求。图片上传后，点击**确认**，等待Antom进行检查。Antom会检查支付方式中是否存在带有本地钱包图标的Antom支付方法。图片验证通过后，开发者可以继续进行验收测试。

![图2. 上传结账页面的图片](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1638252624635-ad580a3b-3ab8-421f-8c42-267b9f9fa212.png)

#### 步骤2：选择支付方式并提交支付请求
开发者通过点击本地钱包图标提交支付请求。当显示本地钱包的收银台页面时，开发者可以继续进行验收测试。

![图3. 选择支付方式并提交支付请求](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1638252612394-3189c206-1691-4463-952c-bfc6f8307d2d.png)
#### 步骤 3：上传成功结果页面的图片  
开发者输入认证信息并成功完成支付。开发者可以输入任意认证信息，沙箱环境会默认返回成功结果。支付完成后，开发者会被重定向到商户页面。接下来，开发者需要上传成功结果页面的图片。请注意，上传的图片需要满足数量、大小、格式等要求。图片验证通过后，开发者可以继续进行验收测试。  
![图片 6：image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1638252588680-a077d70b-006b-45e2-9909-d69eb68ded72.png)  
图 4. 上传成功结果页面图片  
#### 步骤 4：接收支付通知  
支付成功后，商户在服务器端接收到 SUCCESS 通知，返回的 _resultStatus_ 为 `S`。Antom 需要检查商户在服务器端是否接收到 SUCCESS 通知，并返回正确签名的 `/v1/payments/notifyPayment` 响应。  
![图片 7：image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1638252568402-295a22ed-194a-4171-87b4-db58584eac6e.png)  
图 5. 接收支付通知  
#### 步骤 5：上传订单状态页面的图片  
商户在收到成功支付通知后更新状态为发货。接下来，开发者需要上传订单状态页面的图片。同样请注意，上传的图片需要满足数量、大小、格式等要求。图片上传后，点击 **确认** 并等待 Antom 进行检查。Antom 需要检查商户是否已将订单状态更新为 **已发货**。至此，您完成了“支付成功”场景的所有验收测试步骤。
图6. 上传订单状态页面图片  
验收测试提供了检查您的处理逻辑是否正确处理Antom的正常和异常响应的测试用例。正常响应包括成功的支付和退款结果，异常响应包括支付和退款失败的结果。完成所有验收测试是必要的，这将增加您开发系统的健壮性和可用性。测试用例也按不同产品分为不同的集合。具体的验收测试步骤，请参考验收平台上的测试用例。如果在验收测试过程中有任何问题，请联系[Antom技术支持](https://global.alipay.com/docs/ac/general/getting-support)。  
要查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。  
![图9](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图10](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)  
#### 这个页面是否有帮助？  
#### 在这个页面上  
[步骤1：上传结账页面图片](#CJrvs "步骤1：上传结账页面图片")  
[步骤2：选择支付方式并提交支付请求](#0wmeJ "步骤2：选择支付方式并提交支付请求")  
[步骤3：上传成功结果页面图片](#7AXRc "步骤3：上传成功结果页面图片")  
[步骤4：接收支付通知](#So7hu "步骤4：接收支付通知")  
[步骤5：上传订单状态页面图片](#YlnUa "步骤5：上传订单状态页面图片")
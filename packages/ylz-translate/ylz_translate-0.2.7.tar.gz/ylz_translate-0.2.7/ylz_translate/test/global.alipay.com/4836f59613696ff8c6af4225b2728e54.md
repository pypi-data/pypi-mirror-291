EasySafePay (Android) | EasySafePay | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Feasypay_en%2Fandroid)

[Go to Homepage](../../)

EasySafePay

[Overview](/docs/ac/easypay_en/overview_en)

Accept payments

[EasySafePay (Web/WAP)](/docs/ac/easypay_en/WW)

[EasySafePay (Android)](/docs/ac/easypay_en/android)

[EasySafePay (iOS)](/docs/ac/easypay_en/ios)

After payments

EasySafePay (Android)
=====================

2024-05-16 03:26

This article introduces the integration solution to support accepting payments from a desktop browser or mobile browser. After integration, you can access various payment methods like digital wallets, bank cards, and bank transfers.

User experience
===============

The following screenshots show the user experience of wallet and bank transfer. During the first-time payments, buyers can enable password-free payment for subsequent payments. The entire payment process for subsequent payments will be performed on your website or application.

Wallet
------

With the entire payment process remaining within your website or application, buyers are allowed to pay and enable password-free payments during their first-time payments and make subsequent payments without the need to enter the payment password.

First-time payment

Subsequent payments

### First-time payment

During the first-time payments, the buyer completes the authorization process to pay and enable subsequent password-free payments.

![Image 3: Android.webp](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715066141268-925d42d4-0b0f-4bdf-9fa8-2dc94b506a23.webp)

### Subsequent payments

Subsequent payments can be made without the need for a password. For larger payment amounts, you can specify the minimum payment amount that requires an additional verification step for added security.

**Small-value payment**

For small-value orders, buyers can simply submit the order and make the payment without needing any further confirmation.

![Image 4: Android1.webp](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715066206219-f337a73f-609d-4418-8497-b489ce81a73c.webp)

**Large-value payment**

To enhance payment security, you can require buyers to confirm payments that exceed a predetermined amount.

![Image 5: Android2.webp](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715066225750-7713f324-6c67-48f7-9bd7-5ed9f680ac5d.webp)

Bank transfer
-------------

For bank transfer payment methods, the following graphics show the user experience for the first-time and subsequent payments.

First-time payment

Subsequent payments

### First-time payment

During the first-time payments, users need to input the payment password and verification number.

![Image 6: image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715069804934-925728a4-ba26-47eb-9454-d34689b29116.png)

### Subsequent payments

Subsequent payments can be made without the need for a verification number.

![Image 7: image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715069845024-5cde5fb3-5c1b-4d95-829c-9b9ab9a273e5.png)

Payment flow
============

First-time payment

Subsequent payments

First-time payment
------------------

When a buyer selects a payment method provided by Antom, you need to collect key information such as the payment request ID, order amount, payment method, order description, payment redirect page URL, and payment result notification URL. Call the **createPaymentSession** API to make orders and pull up page via SDK.

![Image 8: Easy Pay 首次支付流程图@3x.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715579445358-24330701-5ace-4c1c-ace5-f08522f4de4b.png)

1.  **The** **buyer lands on the checkout page.**
2.  **Create the** [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) **request**  
    After the buyer selects a payment method and submits the order, you can obtain the payment session by calling the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) interface.
3.  **Invoke the client SDK**  
    On the client side, invoke the SDK through the payment session. The SDK will collects payment elements, displays code information, redirects, invokes, and guides the buyer to complete the payment based on the payment method's characteristics.
4.  **Get th****e** **authorization** **result**

*   Asynchronous Notification: When the authorization is successful, Antom sends you the asynchronous notification through the [**notifyAuthorization**](https://global.alipay.com/docs/ac/ams/notifyauth) API.
*   Synchronous Inquiry: Call the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) interface to check the authorization status.

5.  **Get the payment result**  
    Obtain the payment result by using one of the following two methods:

*   Asynchronous Notification: Specify the _paymentNotifyUrl_ in the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) interface to set the address for receiving asynchronous notifications. When the payment is successful or expires, Antom will use [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online) to send asynchronous notifications to you.
*   Synchronous Inquiry: Call the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) interface to check the payment status.

Subsequent payments
-------------------

When a buyer selects a payment method provided by Antom, you need to collect key information such as the payment request ID, order amount, payment method, order description, payment redirect page URL, and payment result notification URL. Call the **createPaymentSession** API to make orders and pull up page via SDK.

![Image 9: Easy Pay 再次支付流程图@3x.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1715579477973-ea1eb575-af1a-4918-a9ae-8ef6b56e7251.png)

1.  **The** **buyer lands on the checkout page.**
2.  **Create the** [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) **request**  
    After the buyer selects a payment method and submits the order, you can obtain the payment session by calling the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) interface.
3.  **Invoke the client SDK**  
    On the client side, invoke the SDK through the payment session. The SDK will collects payment elements, displays code information, redirects, invokes, and guides the buyer to complete the payment based on the payment method's characteristics.
4.  **Get the payment result**  
    Obtain the payment result by using one of the following two methods:

*   Asynchronous Notification: Specify the _paymentNotifyUrl_ in the [**createPaymentSession**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay) interface to set the address for receiving asynchronous notifications. When the payment is successful or expires, Antom will use [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online) to send asynchronous notifications to you.
*   Synchronous Inquiry: Call the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) interface to check the payment status.

Integration steps
=================

You can obtain the buyer's authorization and conduct the EasySafePay by completing the following integration steps:

1.  Create a payment session
2.  Invoke the SDK  
    
3.  Obtain authorization or payment result

Step 1: Create a payment session Server-side
--------------------------------------------

When a buyer selects a payment method provided by Antom, you need to collect key information such as the payment request ID, order amount, payment method, order description, payment redirect page URL, and payment result notification URL. Call the **createPaymentSession** API to create a payment session and return the payment session to the client.

Antom provides server-side API libraries for multiple languages. The following codes use Java as an example. You need to install Java 6 or higher.

### Install an API library

You can find the latest version on [GitHub](https://github.com/alipay/global-open-sdk-java).

copy

    <dependency>
      <groupId>com.alipay.global.sdk</groupId>
      <artifactId>global-open-sdk-java</artifactId>
      <version>2.0.21</version>
    </dependency>

### Initialize request instance

Create a singleton resource to make a request to Antom.

copy

    import com.alipay.global.api.AlipayClient;
    import com.alipay.global.api.DefaultAlipayClient;
    
    String merchantPrivateKey = "YOUR PRIVATE KEY";
    String alipayPublicKey = "ALIPAY PUBLIC KEY"
    AlipayClient defaultAlipayClient = new DefaultAlipayClient(EndPointConstants.SG,
                    merchantPrivateKey, alipayPublicKey);

### Create a payment session

First-time payment

Subsequent payments

#### First-time payment

Creating a payment session involves the following parameters:

<table style="width:748px" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td><p data-lake-id="968c94e21d9c92c1357b4beea85efcb5"><span>Parameter name</span></p></td><td><p data-lake-id="84e59900ba11cb4de132baf5c7bc75a3"><span>Required</span></p></td><td><p data-lake-id="3636d921f8ff9bbc04145a64e266f2d0"><span>Description</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="fa3e818081193243c2ec4f6f34b967db"><span>paymentRedirectUrl</span></p></td><td><p data-lake-id="26265678b7bcd6a67255db248df5111f"><span>✅</span><span></span></p></td><td><p data-lake-id="441a6e293ef02bb24b89996b3e1e742d"><span style="color:rgba(4, 15, 36, 0.85)">The merchant page URL that the </span>buyer<span style="color:rgba(4, 15, 36, 0.85)"> is redirected to after the payment is completed.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="114732cbbfd781119274be21aa578698"><span>authState</span></p></td><td><p data-lake-id="1c4370918146fb6ac9492b22da5e8610"><span>✅</span><span></span></p></td><td><p data-lake-id="2235481ea9ee0ef4be01b152505595ae"><span>The unique identifier assigned by you to initiate the authorization, which is used to obtain tokens for subsequent secret-free payments. This parameter must be passed only for the first payment, you do not need to pass this parameter for subsequent payments.</span></p></td></tr><tr style="height:37px"><td><p data-lake-id="5e59436d39ba266d6f461d82a4784f2a"><span>paymentNotifyUrl</span></p></td><td><p data-lake-id="332b3265d891c4f32d3f6ebf0dc775a3"><span>✅</span><span></span></p></td><td><p data-lake-id="732b12a759f0715f9e2f938e44c41575"><span>Payment result notification address. This address must be HTTPS.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="de81d779d850b578ab19c4db8ffe4f25"><span>paymentSessionExpiryTime</span></p></td><td><p data-lake-id="cad3ddf6be1a932bc9155d4f4cc2a37e"><span>✅</span><span></span></p></td><td><p data-lake-id="37d35a4df862717da6745e5096f04c7a"><span>Timeout for payment session. Default is 1 hour, can be set to a timeout within 1 hour, the format of the value follows the </span><a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank"><span>ISO 8601</span></a><span> standard. For example, 2019-11-27T12:01:01+08:00.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="40be184e65a612792a077eea8f8dace1"><span>userLoginId</span></p></td><td><p data-lake-id="347f1470135651bbd6adb20efa3bff67"><span>✅</span><span></span></p></td><td><p data-lake-id="3cd0d9548fc0f8c6e47eaa8a25033d0c"><span>The buyer's wallet side login account, which can be the buyer's email address or phone number.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="678457b66791e9781b2976d2ecb6cdd8"><span>order.buyer: referenceBuyerId/buyerPhoneNo/buyerEmail</span></p></td><td><p data-lake-id="8bacbe7b7a845a9029b66e5d84fd5806"><span>✅</span><span></span></p></td><td><p data-lake-id="7168e04d9e3d48728526c95032d23e70"><span>Pass in buyer information for risk decisions. Pass in referenceBuyerId, buyerPhoneNo, buyerEmail One of these parameters is sufficient.</span></p></td></tr></tbody></table>

Above parameters are basic parameters for creating a payment session. For full list of parameters and additional requirements for payment methods, see [**createPaymentSession (EasySafePay)**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay)**.**

The following sample code shows how to call the **createPaymentSession** API:

copy

    AlipayPaymentSessionRequest alipayPaymentSessionRequest = new AlipayPaymentSessionRequest();
    alipayPaymentSessionRequest.setClientId(clientId);
    alipayPaymentSessionRequest.setPath("/ams/sandbox/api/v1/payments/createPaymentSession");
    alipayPaymentSessionRequest.setProductCode(ProductCodeType.AGREEMENT_PAYMENT);
    alipayPaymentSessionRequest.setProductScene(ProductSceneConstants.EASY_PAY);
    
    // replace to your paymentRequestId
    alipayPaymentSessionRequest.setPaymentRequestId("paymentRequestId001");
    
    Amount amount = new Amount();
    // set amount
    amount.setCurrency("CNY");
    amount.setValue("100");
    alipayPaymentSessionRequest.setPaymentAmount(amount);
    
    //set settlement currency
    SettlementStrategy settlementStrategy = new SettlementStrategy();
    settlementStrategy.setSettlementCurrency("USD");
    alipayPaymentSessionRequest.setSettlementStrategy(settlementStrategy);
    
    // set agreementInfo
    AgreementInfo agreementInfo = new AgreementInfo();
    agreementInfo.setAuthState("authState001");
    agreementInfo.setUserLoginId("userLoginId001");
    alipayPaymentSessionRequest.setAgreementInfo(agreementInfo);
    
    // set paymentMethod
    PaymentMethod paymentMethod = new PaymentMethod();
    paymentMethod.setPaymentMethodType("ALIPAY_CN");
    
    // set order Info
    Order order = new Order();
    order.setReferenceOrderId("referenceOrderId001");
    order.setOrderDescription("orderDescription001");
    order.setOrderAmount(amount);
    Buyer buyer = new Buyer();
    buyer.setReferenceBuyerId("referenceBuyerId001");
    order.setBuyer(buyer);
    order.setOrderAmount(amount);
    alipayPaymentSessionRequest.setOrder(order);
    
    // replace to your redirect url
    alipayPaymentSessionRequest.setPaymentNotifyUrl("https://www.yourNotifyUrl");
    alipayPaymentSessionRequest.setPaymentRedirectUrl("https://www.yourMerchantWeb.com");
    
    AlipayPaymentSessionResponse alipayPaymentSessionResponse = defaultAlipayClient
            .execute(alipayPaymentSessionRequest);

The following code shows a sample of the request message:

copy

    {
        "settlementStrategy": {
            "settlementCurrency": "USD"
        },
        "productCode": "AGREEMENT_PAYMENT",
        "productScene": "EASY_PAY",
        "paymentNotifyUrl": "https://www.yourNotifyUrl",
        "paymentRequestId": "paymentRequestId001",
        "paymentRedirectUrl": "https://www.yourMerchantWeb.com",
        "paymentMethod": {
            "paymentMethodType": "ALIPAY_CN"
        },
        "agreementInfo": {
            "authState": "authState001",
            "userLoginId":"userLoginId001"
        },
        "paymentAmount": {
            "currency": "CNY",
            "value": "100"
        },
        "order": {
            "orderAmount": {
                "currency": "CNY",
                "value": "100"
            },
            "referenceOrderId": "referenceOrderId001",
            "orderDescription": "orderDescription001",
            "buyer":{
              "referenceBuyerId":"referenceBuyerId001"
            }
            
        }
    }

The following code shows a sample of the response, which contains the following parameters:

*   _paymentSessionData_: the payment session to be returned to the frontend
*   _paymentSessionExpiryTime_: the expiration time of the payment session.

copy

    {
      "paymentSessionData": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Kvvmsdk+akdLvoShW5avHX8e8J15P8uNVEf/PcCMyXg==&&SG&&111",
      "paymentSessionExpiryTime": "2023-04-06T03:28:49+08:00",
      "paymentSessionId": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Ikyj9FPVUOpv+DjiIZqMe",
      "result": {
        "resultCode": "SUCCESS",
        "resultMessage": "success.",
        "resultStatus": "S"
      }
    }

#### Subsequent payments

Creating a payment session involves the following parameters:

<table style="width:738px" class="lake-table"><colgroup><col width="211" span="1"><col width="87" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td><p data-lake-id="b2a03238929c3050e9fb0ccfcebccf56"><span>Parameter name</span></p></td><td><p data-lake-id="ef7fd870a257c3a72d0e26b9ce4daaeb"><span>Required</span></p></td><td><p data-lake-id="172d55b65e082e1dfe3f01c02e66d721"><span>Description</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="503fd0903fb7cbecd18f2ae349f18432"><span>paymentMethod.paymentMethodId</span></p></td><td><p data-lake-id="4ff75ded4572acea5158d5f74f93adb7"><span>✅</span><span></span></p></td><td><p data-lake-id="64f65f219e88f160e1dcbcca10cc1452"><span>Pass in the value of </span><em><span>accessToken</span></em><span> in the </span><a href="https://global.alipay.com/docs/ac/ams/notifyauth" target="_blank"><strong><span>notifyAuthorization</span></strong></a><span> API received after the first payment.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="8566d6c356dc1f8e7493b042501e1e7f"><span>paymentRedirectUrl</span></p></td><td><p data-lake-id="e1e5b0154a52e73837cbd146382cc4c1"><span>✅</span><span></span></p></td><td><p data-lake-id="be3d7eb608c8a789cec1e7b8b13b74d4"><span style="color:rgba(4, 15, 36, 0.85)">The merchant page URL that the buyer is redirected to after the payment is completed.</span></p></td></tr><tr style="height:37px"><td><p data-lake-id="1a8b2caa401e1b30f5c462f77bfb189c"><span>paymentNotifyUrl</span></p></td><td><p data-lake-id="f919e2efd5ab4a2ee9013b5a43b4a197"><span>✅</span><span></span></p></td><td><p data-lake-id="0211c89446e07ea861fff3b0e4f01198"><span>Payment result notification address. This address must be HTTPS.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="aa5b0702f58671db539d8571d38c7fd9"><span>paymentSessionExpiryTime</span></p></td><td><p data-lake-id="a5bf19cf6b9a09cbf9f086b35929f861"><span>✅</span><span></span></p></td><td><p data-lake-id="4f445b34e8f6cc77e024a4e7d94d3b63"><span>Timeout for payment session. Default is 1 hour, can be set to a timeout within 1 hour, the format of the value follows the </span><a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank"><span>ISO 8601</span></a><span> standard. For example, 2019-11-27T12:01:01+08:00.</span></p></td></tr><tr style="height:33px"><td><p data-lake-id="f6ea70814e0bfab01eafdf27abc1b653"><span>order.buyer: referenceBuyerId/buyerPhoneNo/buyerEmail</span></p></td><td><p data-lake-id="4d058057b20e7ffe4befef3aa5426233"><span>✅</span><span></span></p></td><td><p data-lake-id="5700152a7330fd76e2403d7a4cf49475"><span>Pass in buyer information for risk decisions. Pass in referenceBuyerId, buyerPhoneNo, buyerEmail One of these parameters is sufficient.</span></p></td></tr></tbody></table>

Above parameters are basic parameters for creating a payment session. For full list of parameters and additional requirements for payment methods, see [**createPaymentSession (Easy Pay)**](https://global.alipay.com/docs/ac/ams/createpaymentsession_easypay)**.**

The following sample code shows how to call the **createPaymentSession** API:

copy

    AlipayPaymentSessionRequest alipayPaymentSessionRequest = new AlipayPaymentSessionRequest();
    alipayPaymentSessionRequest.setClientId(clientId);
    alipayPaymentSessionRequest.setPath("/ams/sandbox/api/v1/payments/createPaymentSession");
    alipayPaymentSessionRequest.setProductCode(ProductCodeType.AGREEMENT_PAYMENT);
    alipayPaymentSessionRequest.setProductScene(ProductSceneConstants.EASY_PAY);
    
    // replace to your paymentRequestId
    alipayPaymentSessionRequest.setPaymentRequestId("paymentRequestId002");
    
    Amount amount = new Amount();
    // set amount
    amount.setCurrency("CNY");
    amount.setValue("100");
    alipayPaymentSessionRequest.setPaymentAmount(amount);
    
    //set settlement currency
    SettlementStrategy settlementStrategy = new SettlementStrategy();
    settlementStrategy.setSettlementCurrency("USD");
    alipayPaymentSessionRequest.setSettlementStrategy(settlementStrategy);
    
    // set paymentMethod
    PaymentMethod paymentMethod = new PaymentMethod();
    paymentMethod.setPaymentMethodType("ALIPAY_CN");
    paymentMethod.setPaymentMethodId("*****************************");
    
    // set order Info
    Order order = new Order();
    order.setReferenceOrderId("referenceOrderId002");
    order.setOrderDescription("orderDescription001");
    order.setOrderAmount(amount);
    Buyer buyer = new Buyer();
    buyer.setReferenceBuyerId("referenceBuyerId001");
    order.setBuyer(buyer);
    order.setOrderAmount(amount);
    alipayPaymentSessionRequest.setOrder(order);
    
    // replace to your redirect url
    alipayPaymentSessionRequest.setPaymentNotifyUrl("https://www.yourNotifyUrl");
    alipayPaymentSessionRequest.setPaymentRedirectUrl("https://www.yourMerchantWeb.com");
    
    AlipayPaymentSessionResponse alipayPaymentSessionResponse = defaultAlipayClient
            .execute(alipayPaymentSessionRequest);

The following code shows a sample of the request message:

copy

    {
        "settlementStrategy": {
            "settlementCurrency": "USD"
        },
        "productCode": "AGREEMENT_PAYMENT",
        "productScene": "EASY_PAY",
        "paymentNotifyUrl": "https://www.yourNotifyUrl",
        "paymentRequestId": "paymentRequestId002",
        "paymentRedirectUrl": "https://www.yourMerchantWeb.com",
        "paymentMethod": {
            "paymentMethodId": "*****************************",
            "paymentMethodType": "ALIPAY_CN"
        },
        "paymentAmount": {
            "currency": "CNY",
            "value": "30000"
        },
        "order": {
            "orderAmount": {
                "currency": "CNY",
                "value": "30000"
            },
            "referenceOrderId": "referenceOrderId002",
            "orderDescription": "orderDescription002",
             "buyer":{
              "referenceBuyerId":"referenceBuyerId002"
            }
        }
    }

The following code shows a sample of the response, which contains the following parameters:

*   _paymentSessionData_: the payment session to be returned to the frontend
*   _paymentSessionExpiryTime_: the expiration time of the payment session.

copy

    {
      "paymentSessionData": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Kvvmsdk+akdLvoShW5avHX8e8J15P8uNVEf/PcCMyXg==&&SG&&111",
      "paymentSessionExpiryTime": "2023-04-06T03:28:49+08:00",
      "paymentSessionId": "UNvjVWnWPXJA4BgW+vfjsQj7PbOraafHY19X+6EqMz6Ikyj9FPVUOpv+DjiIZqMe",
      "result": {
        "resultCode": "SUCCESS",
        "resultMessage": "success.",
        "resultStatus": "S"
      }
    }

### FAQs

#### Can Chinese characters be used in the request?

Do not use Chinese characters for the fields in the request including _paymentRequestId_, _referenceOrderId_, _orderDescription_, and _goods_ to avoid incompatible payment methods, such as QRIS and Mastercard.

#### How to set the payment result notification address?

Antom will send the payment result through the [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online), which you can specify in the **createPaymentSession** API via the _paymentNotifyUrl_ parameter. If the address of each payment is the same, you can also configure it in the Antom Dashboard. If you have configured the address and set the parameter in the API, Antom will use the address set in the API.

Step 2: Invoke the SDK Client-side
----------------------------------

### Install

Version Requirements: target at least Android 4.4 (API level 19) or higher.

To integrate the SDK package, please refer to [Integrate the SDK Package](https://global.alipay.com/docs/ac/antom_sdk/android_en).

### Instantiate the SDK

Create an SDK instance and specify basic configurations. Creating a configuration object includes the following methods:

<table style="width:747px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="439" span="1"></colgroup><tbody><tr style="height:33px"><td style="text-align:center;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b8cbe7b424b5f40cea0fd9ffad2eec5c" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Parameter name</span></strong><span><br></span></p></td><td style="text-align:center;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8046518238f0a0f9a2f5abb7cc0a7fb4" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Required</span></strong><span><br></span></p></td><td style="text-align:center;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="e30a6454a643e02e31106de83d85b2ea" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Description</span></strong><span><br></span></p></td></tr><tr style="height:33px"><td style="text-align:center;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="ff1871b6053ac9a69e52afff40c67278" id="u1808f836" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span class="lake-fontsize-11" style="color:rgba(4, 15, 36, 0.85);font-size:14px" data-mce-style="font-size: 11px">setLocale</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="5192afd16c7746fe0a2e21c6d24295bf" id="u5c84ccb8" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8d2d3bd7004f314e71505f4b28381db1" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>It is used to pass in language information. Valid values are listed as follows. You can choose the value to pass based on the region of the payment method. If other values are passed, the local language is used by default:</span></p><ul data-lake-id="14ece4fd4e0ea933f482eb3d1e313f76" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="d33cde2fd07e45c355fdb3adc9f31004" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>en_US</span></code><span>: English</span></li><li data-lake-id="1730fe7eac0b3645e7a7ed0a562c2d7d" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>in_ID</span></code><span>: Indonesian</span></li><li data-lake-id="b926242c0351ba2d64e86d9f01cdc156" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>th_TH</span></code><span>: Thai</span></li><li data-lake-id="9ba539294f48404a297a6bb4a139cea0" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>ms_MY</span></code><span>: Malay</span></li><li data-lake-id="be8ffdabb2939cc663005c39ff106615" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>tl_PH</span></code><span>: Filipino</span></li><li data-lake-id="595430bbceab56782e83b7a5c7b90d05" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>ko_KR</span></code><span>: Korean</span></li><li data-lake-id="18c7274a85a6703991368b4324703a3a" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>vi_VN</span></code><span>: Vietnamese</span></li><li data-lake-id="89577415acc70d4077fe0261927950e1" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>zh_HK</span></code><span>: Traditional Chinese</span></li></ul></td></tr><tr style="height:33px"><td style="text-align:center;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="87d6aea9730a99a9098522406f0fa8b8" id="u5264c4bf" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span class="lake-fontsize-11" style="color:rgba(4, 15, 36, 0.85);font-size:14px" data-mce-style="font-size: 11px">setOption</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="f57aa33eafeb2da0cef605c823cd13ba" id="u03d15dc0" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="1fe86f406c1d857ed2b8c0176d45fe9f" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">It is used to specify whether to use the default loading pattern and the sandbox environment. Valid values are:</span></p><ul data-lake-id="451bf04b7c9f78552731ae5a82841583" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="49cd3a35f7c8f789a22e0106e6b71714" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"sandbox", "true"</span></code><span>: Sandbox environment</span></li><li data-lake-id="fc63977c4d2d62a3de6af8d2e5b8c889" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"sandbox", "false"</span></code><span>: Production environment</span></li><li data-lake-id="8a875deab26d81c40518fd35a5f6a854" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"showLoading", "true"</span></code><span>: Use the default loading pattern.</span></li><li data-lake-id="1eb2ddf8522178779e2cded2a0c6f02b" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"showLoading", "false"</span></code><span>: Do not use the default loading pattern.</span></li><li data-lake-id="e1c4332fad91b85a8c01c428b18d27af" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"windowGravity","LANDSCAPE_CENTER"</span></code><span>: Center the window in landscape mode.</span></li><li data-lake-id="289c39d524424f1a2dc6f824774ef99f" style="text-align:left"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>"windowGravity","LANDSCAPE_RIGHT"</span></code><span>: Align the window to the right in landscape mode.</span></li></ul></td></tr></tbody></table>

The following sample code shows how to instantiate the SDK:

copy

    // Step 1: Create the AMSEasyPayConfiguration type.
    AMSEasyPayConfiguration configuration = new AMSEasyPayConfiguration();
    configuration.setLocale(new Locale("en", "US"));
    // Specify showLoading as true (default value) to use the default loading pattern. Specify it as false to customize the loading animation based on onEventCallback.
    configuration.setOption("showLoading", "true");
    // Set the sandbox environment. If you leave it empty, the production environment is used by default.
    configuration.setOption("sandbox", "true");
    // Set the callback to monitor payment events on the checkout page.
    configuration.setOnCheckoutListener(new OnCheckoutListener() {
        @Override
        public void onEventCallback(String eventCode, AMSEventResult eventResult) {
            if("SDK_PAYMENT_CANCEL".equals(eventCode)){
                // Add interactive prompts.
            }
            Toast.makeText(activity, "eventCode=" + eventCode + " message=" + message, Toast.LENGTH_SHORT).show();
        }
    });
    
    // Instantiate AMSEasyPay. Create a new AMSEasyPay component before each createPaymentSession API request.
    AMSEasyPay checkout = new AMSEasyPay.Builder(activity, configuration).build();

### Invoke the SDK

Call the `createComponent` method:

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8b1d868b17b54a35e4c658f04e7e9b21" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="19b8adfde9759549213d7fa9d759abdb" id="u31c41301" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="ba87030ee8aee2ccc6f7ac156e521595" id="u85a3aa96" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span class="lake-fontsize-11" style="color:rgb(32, 48, 76);font-size:14px" data-mce-style="font-size: 11px">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="83f2eecdc13037bc55dcddc2c7ff14b3" id="ue98caa71" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span class="lake-fontsize-11" style="color:rgba(4, 15, 36, 0.85);font-size:14px" data-mce-style="font-size: 11px">sessionData</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="4ee446b852b3a3fa1cde1ee3bdd76194" id="ucda7a3a1" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>✅</span><span style="color:#20304C"></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b894b733b23fbdbe238659c70350d81a" id="u73d19127" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>Create a configuration object by using the </span><em><span>sessionData</span></em><span> parameter: Pass the complete data in the </span><em><span>paymentSessionData</span></em><span> parameter obtained in the response through the </span><strong><span>createpaymentSession (Checkout Payment) </span></strong><span>API to the </span><em><span>sessionData </span></em><span>parameter.</span></p></td></tr></tbody></table>

Call the `onDestroy` method to free SDK component resources in the following situations:

*   When the buyer exits the checkout page, free the component resources created in the **createPaymentSession**.
*   When the buyer initiates multiple payments, free the component resources created in the previous **createPaymentSession**.

The following sample code shows how to invoke the SDK:

copy

    checkout.createComponent(activity, sessionData);
    
    //Free SDK component resources
    checkout.onDestroy();

Step 3: Obtain authorization or payment result Server-side
----------------------------------------------------------

You can obtain the authorization and payment results for first-time payments, and a payment result only for subsequent payments. You can obtain the authorization or payment result by one of the following methods:

*   Receive the asynchronous notification
*   Inquire about the result

### **Receive the asynchronous notification**

Obtain an authorization result

Obtain a payment result

#### Obtain the authorization result

When the authorization is successful, Antom sends you the asynchronous notification through the [**notifyAuthorization**](https://global.alipay.com/docs/ac/ams/notifyauth) API. When you receive the notification, you must return a response as instructed in [Requirements](https://global.alipay.com/docs/ac/ams/paymentrn_online). Meanwhile, you must update the authorization status of the buyer in your system and display the buyer's desensitized account obtained from the notification on your authorization management page.

The following code shows a sample of the notification request:

copy

    {
      "accessToken": "2810123456789012345678901234567890",
      "authState": "AUTHSTATE_SAMPLE_1234567890",
      "authorizationNotifyType": "TOKEN_CREATED",
      "userLoginId": "852-52***184",
      "result": {
        "resultCode": "SUCCESS",
        "resultMessage": "success.",
        "resultStatus": "S"
      }
    }

The following sample code shows how to verify the signature of the notification and make a response to the notification:

copy

    @RequestMapping(path = "/authResult", method = RequestMethod.POST)
    public ResponseEntity<AlipayResponse> authNotifyProcessor(HttpServletRequest request,
                                                              @RequestBody String body) {
        // retrieve the required parameters from the request header.
        String requestTime = request.getHeader("request-time");
        String clientId = request.getHeader("client-id");
        String rawSignature = request.getHeader("signature");
        String signature = "";
    
        // get valid part from raw signature
        if(rawSignature==null||rawSignature.isEmpty()){
            throw new RuntimeException("empty notify signature");
        }else {
            String[] parts = rawSignature.split("signature=");
            if (parts.length > 1) {
                signature = parts[1];
            }
        }
    
        // verify auth result notify's signature
        boolean verifyResult = SignatureTool.verify(request.getMethod(), request.getRequestURI(),
                clientId, requestTime, body, signature,
                ALIPAY_PUBLIC_KEY);
        if (!verifyResult) {
            throw new RuntimeException("Invalid notify signature");
        }
    
        // update the record status with notify result
    
        // respond the server that we accept the notify
        Result result = new Result("SUCCESS", "success", ResultStatusType.S);
        AlipayResponse response = new AlipayResponse();
        response.setResult(result);
        return ResponseEntity.ok().body(response);
    }

#### Obtain the payment result

When the payment reaches a final status of success or failure, Antom sends an asynchronous notification to the _paymentNotifyUrl_ specified in the **createPaymentSession** API through the [notifyPayment](https://global.alipay.com/docs/ac/ams/paymentrn_online) API. When you receive the notification from Antom, you are required to return a response as instructed in [Requirements](https://global.alipay.com/docs/ac/cashier_payment_cn/notification).

The following code shows a sample of notification request:

copy

    {
      "notifyType": "PAYMENT_RESULT",
      "result": {
        "resultCode": "SUCCESS",
        "resultStatus": "S",
        "resultMessage": "success"
      },
      "paymentRequestId": "2020010123456789XXXX",
      "paymentId": "2020010123456789XXXX",
      "paymentAmount": {
        "value": "4200",
        "currency": "SGD"
      },
      "paymentCreateTime": "2020-01-01T12:01:00+08:30",
      "paymentTime": "2020-01-01T12:01:01+08:30"
    }

The following sample code shows how to verify the signature of the notification and make a response to the notification:

copy

    @RequestMapping(path = "/payResult", method = RequestMethod.POST)
    public ResponseEntity<AlipayResponse> paymentNotifyProcessor(HttpServletRequest request,
                                                                 @RequestBody String body) {
    
        // retrieve the required parameters from the request header.
        String requestTime = request.getHeader("request-time");
        String clientId = request.getHeader("client-id");
        String rawSignature = request.getHeader("signature");
        String signature = "";
    
        // get valid part from raw signature
        if(rawSignature==null||rawSignature.isEmpty()){
            throw new RuntimeException("empty notify signature");
        }else {
            String[] parts = rawSignature.split("signature=");
            if (parts.length > 1) {
                signature = parts[1];
            }
        }
    
        // verify payment result notify's signature
        boolean verifyResult = SignatureTool.verify(request.getMethod(), request.getRequestURI(),
                clientId, requestTime, body, signature,
                ALIPAY_PUBLIC_KEY);
        if (!verifyResult) {
            throw new RuntimeException("Invalid notify signature");
        }
    
        // update the record status with notify result
    
        // respond the server that we accept the notify
        Result result = new Result("SUCCESS", "success", ResultStatusType.S);
        AlipayResponse response = new AlipayResponse();
        response.setResult(result);
        return ResponseEntity.ok().body(response);
    }

#### FAQs

##### When will the notification be sent?

It depends on whether the payment is completed:

*   If the payment is successfully completed, Antom will usually send you an asynchronous notification within 3 to 5 seconds. For some payment methods like OTC, the notification might take a bit longer.
*   If the payment is not completed, Antom needs to close the order first before sending an asynchronous notification. The time it takes for different payment methods to close the order varies, usually defaulting to 14 minutes.

##### Will the asynchronous notification be re-sent?

If you receive an asynchronous notification from Antom, you are required to return the response in the [Sample code](https://global.alipay.com/docs/ac/cashier_payment_cn/notification) format. If you do not respond to the asynchronous notification as required, or the asynchronous notification is not delivered due to network reasons, the notification will be automatically resent within 24 hours. The notification can be resent up to 8 times or until a correct response is received to terminate delivery. The sending intervals are as follows: 0 minutes, 2 minutes, 10 minutes, 10 minutes, 1 hour, 2 hours, 6 hours, and 15 hours.

##### Do I need to add a digital signature to the response?

If you receive an asynchronous notification from Antom, you are required to return the response in the [Sample code](https://global.alipay.com/docs/ac/cashier_payment_cn/notification) format, but you do not need to add a digital signature to your response.

##### How do I understand the meaning of the following key fields in notifyAuthorization API?

*   _result_: represents the payment result of the order.
*   _authState_: the vaulting request ID generated by the merchant.
*   _accessToken_: the auto debit ID generated by Antom used for subsequent payment.
*   _userLoginId_: the user's desensitized account number.

##### How do I understand the meaning of the following key fields in nofifyPayment API?

*   _result_: the payment result of the order.
*   _paymentRequestId_: the payment request ID generated by the merchant used for querying, canceling, and reconciliation.
*   _paymentId_: the payment order ID generated by Antom used for refund and reconciliation.
*   _paymentAmount_: if there is a need for amount reconciliation, you can consume this field.

### Inquire about the result

You can call the **inquiryPayment** API to initiate a query on the result of an order.

<table style="width:748px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col width="211" span="1"><col width="97" span="1"><col width="440" span="1"></colgroup><tbody><tr style="height:33px"><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="518599c021c333e5160e7f0d8dd0b99e" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Parameter name</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="e88e180d521d44e57191755f74fc42a2" id="uf17d3dbd" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Required</span></strong></p></td><td style="background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="5bae7a0e3675f17f360e93aad0acf8e6" id="u7aa93d8a" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong><span style="color:#20304C">Description</span></strong></p></td></tr><tr style="height:33px"><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a75c74082901163c56dd41ff92a18a45" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><em><span>paymentRequestId</span></em></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="41c561664ce2baba0cf995f2332497b9" id="u76f7c8a3" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span></span></p></td><td style="min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="3a793d52847d265358c3fabb640b85a2" style="text-align:center;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span style="color:rgba(4, 15, 36, 0.85)">The payment request ID generated by you.</span></p></td></tr></tbody></table>

The parameter is not a full set of parameters, please refer to the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) API for full set of parameters and additional requirements for certain payment methods.

The following sample code shows how to call the **inquiryPayment** API:

copy

    
    AlipayClient defaultAlipayClient = new DefaultAlipayClient(EndPointConstants.SG,
                    merchantPrivateKey, alipayPublicKey);
    
    AlipayPayQueryRequest alipayPayQueryRequest = new AlipayPayQueryRequest();
    alipayPayQueryRequest.setClientId(CLIENT_ID);
    alipayPayQueryRequest.setPath("/ams/sandbox/api/v1/payments/inquiryPayment");
    
    AlipayPayQueryResponse alipayPayQueryResponse;
        try {
            alipayPayQueryResponse = defaultAlipayClient.execute(alipayPayQueryRequest);
        } catch (AlipayApiException e) {
           String errorMsg = e.getMessage();
                // handle error condition
        }

The following code shows a sample of the request message:

copy

    {
      "paymentRequestId": "2019060811401080010018882020035****"
    }

The following code shows a sample of the response message:

copy

    {
      "result": {
        "resultCode": "SUCCESS",
        "resultStatus": "S",
        "resultMessage": "Success"
      },
      "paymentStatus": "SUCCESS",
      "paymentRequestId": "pay_1089760038715669_10277574507XXXX",
      "paymentId": "2019060811401080010018882020035XXXX",
      "paymentAmount": {
        "value": "4200",
        "currency": "SGD"
      },
      "paymentCreateTime": "2019-06-01T12:01:01+08:30",
      "paymentTime": "2019-06-01T12:01:01+08:30",
      "transactions": null
    }

#### FAQs

##### How do I understand the meaning of the following key fields?

*   _result_: the result of the API call. It only indicates the result of the **inquiryPayment** API call. The order result should be determined based on the _paymentStatus_. `SUCCESS` and `FAIL` indicate final results, while `PROCESSING` indicates that the transaction is still in progress.
*   _paymentAmount_: amount verification. If there is a need for amount verification, this field can be used.

##### How frequently should I initiate the query?

It is recommended to initiate a round-robin query at an interval of 2 seconds until either the final payment result is retrieved or an asynchronous payment notification is received.

Sample codes
============

Full sample codes for front-end:

copy

    // Step 1: Create the AMSEasyPayConfiguration type.
    AMSEasyPayConfiguration configuration = new AMSEasyPayConfiguration();
    configuration.setLocale(new Locale("en", "US"));
    // Specify showLoading as true (default value) to use the default loading pattern. Specify it as false to customize the loading animation based on onEventCallback.
    configuration.setOption("showLoading", "true");
    // Set the sandbox environment. If you leave it empty, the production environment is used by default.
    configuration.setOption("sandbox", "true");
    // Center the window in landscape mode, or align it to the right if not set.
    configuration.setOption("windowGravity", "LANDSCAPE_CENTER");
    // Set the callback to monitor payment events on the checkout page.
    configuration.setOnCheckoutListener(new OnCheckoutListener() {
        @Override
        public void onEventCallback(String eventCode, AMSEventResult eventResult) {
            if("SDK_PAYMENT_CANCEL".equals(eventCode)){
                // Add interactive prompts.
            }
            Toast.makeText(activity, "eventCode=" + eventCode + " message=" + message, Toast.LENGTH_SHORT).show();
        }
    });
    // Instantiate AMSEasyPay. Create a new AMSEasyPay component before each createPaymentSession API request.
    AMSEasyPay checkout = new AMSEasyPay.Builder(activity, configuration).build();
    
    // Step 2: Call createPaymentSession API.
    String sessionData = createSessionData()
    
    // Step 3: Initialize the payment and pass the sessionData to the front-end component.
    checkout.createComponent(activity,sessionData);
    
    //Step 4: Call onDestroy() method when the buyer exits the merchant page.
    checkout.onDestroy(activity,sessionData);

Event codes
===========

You might see two types of event codes:

*   Status codes: Returned by `onEventCallback` during the component's runtime lifecycle.
*   Error codes: Returned by `onEventCallback` or `onError` during the component initialization phase.

<table style="width:775px;outline:none;border-collapse:collapse;border:1px solid rgb(217, 217, 217)" class="lake-table"><colgroup><col span="1"><col span="1"><col span="1"><col span="1"></colgroup><tbody><tr style="height:33px"><td style="text-align:left;vertical-align:top;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="3a1d3b575ff421b5dc335214b48ebd3e" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong>Type</strong></p></td><td style="text-align:left;vertical-align:top;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="53a3da88c78de698dc6378fb2686cf8b" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong>Code</strong></p></td><td style="text-align:left;vertical-align:top;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="4005fffe39d28086b81617d06b1a8c18" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong>Description</strong></p></td><td style="text-align:left;vertical-align:top;background-color:rgb(212, 238, 252);min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="16d5699b168584807a5f35d25d84d965" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><strong>Further action</strong></p></td></tr><tr style="height:33px"><td rowspan="3" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="8e46e211e9d225b7013567274945602c" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">Status codes</p></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="54e3fd53fd1f91bbb844ed77d2231c32" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_START_OF_LOADING</p></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="69bf3ff21bd695cc2dae1f08d491f1d1" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">The loading animation starts to be shown when the component is created. When configured to hide loading and use a custom animation, the custom animation can be rendered at this time.</p></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="389cc44ab9359545076d92711a7ca173" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>No further action.</span></p></td></tr><tr style="height:33px"><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a9380bbbe3d269504c55c8adc570b547" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_END_OF_LOADING</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>The loading animation ends when the component is created. When configured to hide loading and use custom animation, the animation can be hidden at this time.</span></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="1273609bc364a5382ca06915c761f10e" id="ue11491d6" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>No further action.</span></p></td></tr><tr style="height:33px"><td style="color:rgba(4, 15, 36, 0.85);text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="5c98da8031f48cc0c00208bf22c0b4df" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_CALL_URL_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><ul data-lake-id="ad543b704609ef1bae2aa4fe1ca214d1" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="4eee8439a0199c35a51f8fd9ff87a59d"><span>This event code represents one of the following situations in the event information:</span></li></ul><ul data-lake-id="c07cdeab68c41c8311a818cc847f35aa" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="aecfe361173e6954cf75f53f20b951f9"><ul data-lake-id="9cddbcef01230b987c2b935ab30c6847" lake-indent="0" style="list-style-type:disc;padding-left:23px;margin:0px;font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word"><li data-lake-id="135dd8451d93ccae090e843692d5e933"><span>Failed to redirect to merchant page.</span></li><li data-lake-id="35c13f34203465714c30df5990194970"><span>Failed to redirect to the 3D challenge page.</span></li><li data-lake-id="d063527ad8ce7a3e0a3123cce63e5aae"><span>The</span> <em><span>paymentRedirectUrl</span></em> <span>parameter is not specified or is not correctly specified when calling the</span> <strong><span>createPaymentSession</span></strong> <span>request.</span></li></ul></li></ul><p data-lake-id="76eb5662301a153615b3676dce19ee51" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>In the Web or WAP scenario, redirecting links is usually not abnormal. It is recommended that you verify the redirected link. In the app scenario, if this exception frequently occurs, contact </span><span>Antom</span><span> Technical Support to troubleshoot redirection or calling issues.</span></p></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="81a844c8cbcd0dec3e1c69cc8c06d972" id="ue11491d6" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px"><span>No further action.</span></p></td></tr><tr style="height:33px"><td rowspan="5" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="a122734bec7410d1eed395bce2c68c4b" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">Error codes</p></td><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="c66183b363a9fbd7d9429cf9e9f3bebb" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_INTERNAL_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>SDK internal error.</span></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Contact&nbsp;</span><span>Antom</span> Technical Support<span>.</span></td></tr><tr style="height:33px"><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="5d69cc35da97011c323b416810495569" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_CREATEPAYMENT_PARAMETER_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span>mountComponent</span></code> <span>method specified parameter abnormally.</span></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Check if the parameters are correct and reinitialize the component.</span></td></tr><tr style="height:33px"><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="0031f982fa61c29db84b2bbb8e3feab2" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_INIT_PARAMETER_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><code style="font-family:monospace;font-size:inherit;background-color:rgba(0, 0, 0, 0.06);padding:0px 2px;border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;line-height:inherit;overflow-wrap:break-word;text-indent:0px"><span style="color:rgba(4, 15, 36, 0.85)">AMSEasyPay</span></code> <span>method specified parameter abnormally.</span></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Check if the parameters are correct and re-instantiate the SDK.</span></td></tr><tr style="height:33px"><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="b8332d8bfab6bdd28eb3a0841f3eebde" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_CREATECOMPONENT_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Component initialization exception.</span></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Contact&nbsp;</span><span>Antom</span> Technical Support<span>.</span></td></tr><tr style="height:33px"><td style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><p data-lake-id="3065e0b62cfebdf1717e96aec6a62055" style="font-size:14px;color:rgb(38, 38, 38);line-height:1.74;letter-spacing:0.05em;outline-style:none;overflow-wrap:break-word;margin-top:0px;margin-bottom:0px">SDK_SUBMIT_NETWORK_ERROR</p></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Interface call failed due to network reasons. It may occur in submit method submission.</span></td><td rowspan="1" colspan="1" style="text-align:left;vertical-align:top;min-width:90px;font-size:14px;white-space:normal;overflow-wrap:break-word;border:1px solid rgb(217, 217, 217);padding:4px 8px;cursor:default"><span>Try to submit it again.</span></td></tr></tbody></table>

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 10](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 11](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[User experience](#2Rpi7 "User experience")

[Wallet](#Y01sq "Wallet")

[Bank transfer](#q7ZbX "Bank transfer")

[Payment flow](#S3crs "Payment flow")

[Integration steps](#QLFGi "Integration steps")

[Step 1: Create a payment session](#zhBSk "Step 1: Create a payment session")

[Install an API library](#d3kyo "Install an API library")

[Initialize request instance](#WLui0 "Initialize request instance")

[Create a payment session](#aQius "Create a payment session")

[FAQs](#UGjGp "FAQs")

[Can Chinese characters be used in the request?](#asEuc "Can Chinese characters be used in the request?")

[How to set the payment result notification address?](#KQLhk "How to set the payment result notification address?")

[Step 2: Invoke the SDK](#Oqulw "Step 2: Invoke the SDK")

[Install](#JmurT "Install")

[Instantiate the SDK](#qNMQb "Instantiate the SDK")

[Invoke the SDK](#bj6Gl "Invoke the SDK")

[Step 3: Obtain authorization or payment result](#Jiap6 "Step 3: Obtain authorization or payment result")

[Receive the asynchronous notification](#YWXbW "Receive the asynchronous notification")

[FAQs](#V1F5v "FAQs")

[Inquire about the result](#1avq0 "Inquire about the result")

[FAQs](#tkpZO "FAQs")

[Sample codes](#8Ha2q "Sample codes")

[Event codes](#FZcP1 "Event codes")
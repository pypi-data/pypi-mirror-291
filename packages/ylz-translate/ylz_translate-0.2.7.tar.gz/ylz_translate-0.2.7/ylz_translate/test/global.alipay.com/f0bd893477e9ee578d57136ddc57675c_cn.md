退款 | 收银台 | 支付宝文档
===============

[![支付宝，中国领先的第三方在线支付解决方案](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![支付宝，中国领先的第三方在线支付解决方案](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fcashier_payment_cn%2Frefund)  
[返回首页](../../)  

收银台
------

- [产品介绍](/docs/ac/cashier_payment_cn/introduction)
- [支付方式](/docs/ac/cashier_payment_cn/payment_method)
- **支付**
- **支付后**
  - [接收通知](/docs/ac/cashier_payment_cn/notification)
  - [取消交易](/docs/ac/cashier_payment_cn/cancel_cn)
  - **退款**（当前页面）
  - [争议](/docs/ac/cashier_payment_cn/chargeback)
  - [对账](/docs/ac/cashier_payment_cn/reconciliation)
- **参考材料**

退款
==

2024-04-02 07:13

本文将介绍支付宝退款政策及如何发起退款。

退款规则
====

退款遵循以下规则：

- **是否退还手续费**：根据双方签订的合同执行。
- **退款执行汇率**：
  - 如果涉及跨币种结算，且外汇策略为锁定汇率模式，退款将按照发起退款请求当天的支付宝汇率结算。
  - 如果涉及跨币种结算，且外汇策略为不锁定汇率模式，退款将按照发起退款请求后的次日支付宝汇率结算。
  - 如果结算币种与退款币种相同，不涉及汇率转换。
- **是否支持部分退款**：取决于买家支付时使用的支付方式。详情请参考[支付方式能力对比](payment_method_capabilities)。
- **允许退款的期限**：取决于买家支付时使用的支付方式。详情请参考[支付方式能力对比](payment_method_capabilities)。
- **退款处理时效**：不同支付方式的退款处理时间可能不同，详情请咨询技术支持。

退款方式
====

您可以通过以下两种方式对成功支付的交易发起退款：

1. **调用接口**（#eb9kK）
2. **支付宝商家平台**（#Ote0I）

调用接口退款
------

根据支付方式的不同，接口退款可能是同步或异步的，因此分为同步退款和异步退款：

- **同步退款**：调用接口后，通常会立即返回退款成功或失败的状态。但偶尔可能出现系统异常或支付渠道处理异常导致其他状态的返回。
- **异步退款**：调用接口后，会返回退款处理中。您需要主动查询退款结果或等待退款结果通知以获取最终状态。

以下是支持同步和异步退款的支付方式：

| **同步退款** | **异步退款** |
| --- | --- |
| 所有Alipay+类型的支付方式 | 其他非同步退款的支付方式为异步退款，具体支付方式请参考[支付方式列表](https://global.alipay.com/docs/ac/ref/payment_method#xm58z)。 |
| 收单机构为2C2P HK和2C2P SG时的Mastercard和Visa卡 |

表 1. 同步和异步退款支持的支付方式

以下是支持同步和异步退款的相关接口：

| **接口** | **同步退款** | **异步退款** |
| --- | --- | --- |
| **退款** | **支持** | **支持** |
| --- | --- | --- |
| **退款通知** | **不支持** | **支持** |
| **查询退款** | **支持** | **支持** |
表 2. 同步与异步退款接口功能支持情况

注释：
1. 退款：支持同步和异步方式进行退款操作。
2. 退款通知：仅支持异步方式接收退款通知。
3. 查询退款：同步和异步方式都可进行退款查询。
### 流程图  
以下是同步退款和异步退款的工作流程图。  
#### 同步退款  
![图 1. 同步退款流程图](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1711528315072-d81d7c7d-f212-433b-86c7-0a4ec2abbc44.png)  
#### 异步退款  
![图 2. 异步退款流程图](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1710727709091-fe6f438c-74d7-4636-8117-a7b7858ff77e.png)  

请注意，这些流程图描述了退款过程的不同方式：
- **同步退款**：在该流程中，退款请求一旦发送，系统会立即处理并返回结果。通常，这涉及实时检查交易状态，更新账户余额，并向用户或商户提供确认。
- **异步退款**：在这种情况下，退款请求被接收后，系统不会立即返回结果，而是将其放入队列中，稍后由后台服务处理。这允许系统在处理高并发请求时保持响应速度，但退款确认可能会有延迟。
### 发起退款  
通过 **退款** 接口进行退款时，请求中重要字段如下（详细接口调用规范请参考 [**退款**](https://global.alipay.com/docs/ac/ams/refund_online) 接口文档）：  
| **字段名** | **说明** |
| --- | --- |
| refundRequestId | 商家侧唯一的退款标识。 |
| paymentId | Antom 分配的原始交易ID，退款针对的交易。 |
| refundAmount | 退款金额，需大于等于最小退款金额（通常等于最小支付金额），且小于等于交易剩余可退款金额。 |
| refundNotifyUrl | Antom 向商家发送退款异步通知的URL。 |  
表 3. 退款请求关键字段  
使用 **退款** 接口发起退款需满足以下条件，否则会收到Antom返回的相应错误码：  
| **退款要求** | | **对应错误码** |
| --- | --- | --- |
| **退款币种** | 退款金额的币种 *refundAmount.currency* 必须与交易发起时的币种 *paymentAmount.currency* 一致。 | `CURRENCY_NOT_SUPPORT` |
| **退款金额** | 申请退款的金额 *refundAmount.value* 必须大于等于最小退款金额，且小于等于交易剩余可退款金额。 | `REFUND_AMOUNT_EXCEED` |
| **交易状态** | 对于卡支付：* 只有请款成功的交易才能退款。 * 卡拒付争议中，交易无法退款，需等待拒付责任判定完成。 对于其他支付方式，交易状态 *paymentStatus* 为 `SUCCESS` 时才能发起退款。 | `ORDER_STATUS_INVALID` |
| **退款期限** | 必须在支付方式允许的退款时间内发起，超时则无法退款。 | `REFUND_WINDOW_EXCEED` |  
表 4. 退款要求
### 获取退款结果  
对于同步和异步退款，获取退款结果的方法不同：  
*   **同步退款**：  
    *   您可以通过 [退款接口响应](#OWfLu) 直接获取退款成功或失败的结果。
    *   您也可以通过 [主动查询退款结果](#MP1zd) 来获取已发起退款交易的退款状态。  
*   **异步退款**：  
    *   通过 Antom 发送的 [异步通知](#648ex) 获取退款成功或失败的结果。
    *   通过 [主动查询退款结果](#MP1zd) 来获取退款状态。  
#### 通过退款接口获取退款状态  
在调用 **退款** 接口后，Antom 会返回退款处理的结果。响应中的 `_resultStatus_` 字段表示交易的退款状态，同步退款的不同状态码及其解释如下：  
| ***resultStatus*** | **解释** |
| --- | --- |
| `S` | 退款成功。 |
| `F` | 退款失败。请参考 **退款** 接口的 *resultCode* 进行问题排查。 |
| `U` | 退款处理中。对于同步退款，可能出现以下情况：* 因系统异常返回 `UNKNOWN_EXCEPTION`，需要重新调用 **退款** 接口。 * 当支付渠道处理中时返回 `REFUND_IN_PROCESS`，可使用 **查询交易结果** 接口获取最终退款结果。 对于异步退款，当 *resultCode* 为 `REFUND_IN_PROCESS` 时，可通过 **查询交易结果** 接口或 **退款结果通知** 获取最终结果。 |  
表 5. 退款接口 `_refundStatus_` 状态码说明  
#### 调用接口查询退款  
发起退款请求后，无论买家使用何种支付方式，您都可以通过调用 **查询交易结果** 接口查询退款执行状态。返回结果中的 `_refundStatus_` 字段表示退款状态，状态码及其解释如下：  
| ***refundStatus*** | **解释** |
| --- | --- |
| `SUCCESS` | 退款成功。 |
| `FAIL` | 退款失败。 |
| `PROCESSING` | 退款处理中。 |  
表 6. 查询退款接口 `_refundStatus_` 状态码说明  
#### 接收退款异步通知  
要接收退款异步通知，您需要配置退款异步通知接收地址：在 **退款** 接口中通过 `_refundNotifyUrl_` 字段提供，或在 Antom 控制台 [配置退款异步通知接收地址](https://global.alipay.com/docs/ac/ref/notification#gmdif)。  
请注意，只有在异步退款场景下，Antom 才会通过 [**退款通知**](https://global.alipay.com/docs/ac/ams/notify_refund) 接口发送退款通知。收到通知后，您可以查看 `_refundStatus_` 字段以了解交易的退款状态，不同状态码及其解释如下：  
| **refundStatus** | **解释** |
| --- | --- |
| `SUCCESS` | 退款成功。 |
| `FAIL` | 退款失败。 |  
表 7. 退款通知 `_refundStatus_` 状态码说明
### 查询交易退款记录
您可以通过 [**查询交易结果**](https://global.alipay.com/docs/ac/ams/paymentri_online) 接口来查看一笔交易的退款信息。如果交易有退款发生，响应中的 `_transactions` 字段会包含退款的详细情况。

#### 通过 Antom 商家门户退款
您可以使用 [Antom 商家门户](https://intl-sea.alipay.com/ilogin/account_login.htm) 进行退款操作。有关如何发起退款及查看退款结果的详细步骤，请参考 [通过门户交易中心退款](https://global.alipay.com/docs/ac/merchant_service_cn/transactions#QySzf)。

要查看文档的最新更新，请访问 [版本更新日志](https://global.alipay.com/docs/releasenotes)。

![图片 5](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片 6](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

© 2024 蚂蚁金服 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

#### 这篇文章对您有帮助吗？

#### 文章目录
- [退款规则](#vknfd "退款规则")
- [退款方式](#I5Txo "退款方式")
- [调用接口退款](#eb9kK "调用接口退款")
- [流程图](#QxKEZ "流程图")
- [同步退款](#fWWpF "同步退款")
- [异步退款](#RpI58 "异步退款")
- [发起退款](#ik9Op "发起退款")
- [获取退款结果](#XqqaI "获取退款结果")
- [退款接口获取退款状态](#OWfLu "退款接口获取退款状态")
- [调用接口查询退款](#MP1zd "调用接口查询退款")
- [接收退款异步通知](#648ex "接收退款异步通知")
- [查询交易的退款记录](#2UX56 "查询交易的退款记录")
- [通过 Antom Merchant Portal 退款](#Ote0I "通过 Antom Merchant Portal 退款")
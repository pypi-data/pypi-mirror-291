Overview | Auto Debit | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fautodebitpay%2Foverview)

[Go to Homepage](../../)

Auto Debit

[Overview](/docs/ac/autodebitpay/overview)

[User experience](/docs/ac/autodebitpay/user_ex)

Development

[Best practice](/docs/ac/autodebitpay/best_practice)

Other resources

Overview
========

2023-08-08 07:41

> **Note**: This is the latest version of the Auto Debit documentation. The [**previous version**](https://global.alipay.com/docs/ac/agreementpayment/intro) will not be updated anymore but will still be available until September 2022, after which it will be deprecated and removed from Alipay Docs.

Auto Debit is a payment solution that allows merchants to make pre-authorized fund deductions from a user's account. The user gives consent to a merchant via a payment agreement, such as the three-party withholding agreement. When the user purchases items on the merchant's site, the merchant can deduct funds from the user's account directly by using an authorization token.

User experience
===============

The authorization process can be initiated via a website, WAP page, or mobile phone app. This video shows the authorization experience for these terminals.

To understand the complete user experience for authorization and see sample process flows between the merchant and payment method, see [User experience](https://global.alipay.com/docs/ac/autodebitpay/user_ex).

Product functionalities
=======================

Auto Debit provides the following functionalities to facilitate your business:

Obtain user authorization

Auto debit

Refund

Reconcile

The following functionalities related to the user authorization are provided:

*   [Create accessToken](https://global.alipay.com/docs/ac/autodebitpay/create_accesstoken): You can get the _authUrl_ address by calling the **consult** API and invite users to perform the authorization at the _authUrl_ address. With the user's authorization, you can use the obtained _authCode_ to get the _accessToken_ and use _accessToken_ for debiting funds from the user's account.
*   [Refresh accessToken](https://global.alipay.com/docs/ac/autodebitpay/refresh_accesstoken): You can update _accessToken_ when it is about to expire by using the [**applyToken**](https://global.alipay.com/docs/ac/ams/accesstokenapp) API.
*   [Revoke accessToken](https://global.alipay.com/docs/ac/autodebitpay/revoke_accesstoken): The _accessToken_ can be invalidated when necessary by calling the [**revoke**](https://global.alipay.com/docs/ac/ams/authrevocation) API.
*   [Receive authorization notification](https://global.alipay.com/docs/ac/autodebitpay/notify_auth): By providing an authorization notification URL to Alipay, you can receive the authorization status notification sent by Alipay after the user completes or cancels the authorization successfully.

The following functionalities related to the auto debit are provided:

*   [Make a payment:](https://global.alipay.com/docs/ac/autodebitpay/pay) After getting _accessToken_, you can initiate a payment and automatically deduct money from the user's account.
*   [Inquire about payment result](https://global.alipay.com/docs/ac/autodebitpay/inquire_payment): You can get the payment status via the [**inquiryPayment**](https://global.alipay.com/docs/ac/ams/paymentri_online) API.
*   [Receive payment notification](https://global.alipay.com/docs/ac/autodebitpay/notify_payment): After providing a URL to receive payment notifications, you can get notified of the payment status from Alipay [**notifyPayment**](https://global.alipay.com/docs/ac/ams/paymentrn_online) SPI.
*   [Cancel the transaction](https://global.alipay.com/docs/ac/autodebitpay/cancel): You can cancel the transaction when necessary by using the [**cancel**](https://global.alipay.com/docs/ac/ams/paymentc_online) API. Transactions on T day can be canceled before T+1 00:15 UTC+8:00.

The following functionalities related to the refund are provided:

*   [Make a refund](https://global.alipay.com/docs/ac/autodebitpay/refund): You can issue a refund by using the [**refund**](https://global.alipay.com/docs/ac/ams/refund_online) API or via Alipay Global Merchant Portal. Refunds can only be issued during the refund window, which is usually 12 months after the initial payment was made. Both full and partial refunds are supported.
*   [Inquire about refund result](https://global.alipay.com/docs/ac/autodebitpay/inquire_refund): Besides waiting for the refund response, you can actively call the [**inquiryRefund**](https://global.alipay.com/docs/ac/ams/ir_online) API to inquire about the refund result.

After making a payment or refunding a transaction, use the [reconciliation](https://global.alipay.com/docs/ac/autodebitpay/reconcile_settle) capability to check transaction and settlement details.

Integration solution introduction
=================================

This section provides general steps for you to go through the whole integration process. Read this topic to get started with Alipay integration.

Cooperation process
-------------------

To cooperate with Alipay and use the Alipay Auto Debit product, follow the cooperation process below:

1.  Sign a contract.
2.  Integrate the product (set up, integrate in the sandbox, go live, and conduct pilot testing).
3.  Start your business.

Integration process
-------------------

The general integration procedure that applies to all Alipay products consists of the following phases. For more details about configurations for each phase, see [Integration guide](https://global.alipay.com/docs/integration).

![Image 3: Integration procedure.jpg](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1648003989966-9afa29c3-2048-46c5-9672-9d1ab1b1756f.jpeg)

Figure 1. Integration procedure

To integrate in the sandbox and then go live, it is suggested to follow these steps:

1.  Read [Best practice](https://global.alipay.com/docs/ac/autodebitpay/best_practice) to understand the API interaction logic so that you can improve the integration efficiency and avoid payment disputes. All APIs and SPIs provided for Auto Debit are displayed in the [APIs and SPIs](#e8pZl) section.
2.  Integrate the product functionalities listed in [Product functionalities](#H7dQN). When using APIs to integrate, you need to make a POST request to the corresponding address with the identity information, signature, and business parameters in the HTTP request. After receiving the request, Alipay verifies the signature of the request. If the signature verification is passed, Alipay returns the corresponding response to you. After your server receives the response, you also need to verify the signature of the response to check whether the response is sent by Alipay. If the signature verification is passed, you can take further actions in your system. These topics will help you tackle problems that you might encounter when calling the APIs:

*   [API overview](https://global.alipay.com/docs/ac/ams/api_fund)
*   [Idempotency](https://global.alipay.com/docs/ac/ams/idempotency)
*   [Message encoding](https://global.alipay.com/docs/ac/ams/me)
*   [Sign a request and validate the signature](https://global.alipay.com/docs/ac/ams/digital_signature)

3.  Use [test payment methods and accounts](https://global.alipay.com/docs/ac/ref/testwallet) to simulate real scenarios in the sandbox. When creating and debugging the application in the sandbox environment, remember to use Alipay-provided [tools](https://global.alipay.com/docs/tools) to facilitate the integration process.
4.  Once you have completed the go-live tasks, use the real payment method app and live account to conduct pilot testing. Contact Alipay Technical Support if you need help creating a live payment method account. Ensure your applications are running smoothly end-to-end by performing [production test cases](https://global.alipay.com/docs/ac/autodebitpay/testcases) in the production environment with the live account.

### APIs and SPIs

The following table lists the APIs that are used for Auto Debit, and you can call these APIs by sending a request to the corresponding endpoint with the correct address format:



| **API name** | **Endpoint** |
| --- | --- |
| consult | [/v1/authorizations/consult](https://global.alipay.com/doc/ams/authconsult) |
| applyToken | [/v1/authorizations/applyToken](https://global.alipay.com/doc/ams/accesstokenapp) |
| revoke | [/v1/authorizations/revoke](https://global.alipay.com/doc/ams/authrevocation) |
| pay | [/v1/payments/pay](https://global.alipay.com/doc/ams/payment_agreement) |
| inquiryPayment | [/v1/payments/inquiryPayment](https://global.alipay.com/doc/ams/paymentri_online) |
| cancel | [/v1/payments/cancel](https://global.alipay.com/doc/ams/paymentc_online) |
| refund | [/v1/payments/refund](https://global.alipay.com/doc/ams/refund_online) |
| inquiryRefund | [/v1/payments/inquiryRefund](https://global.alipay.com/docs/ac/ams/ir_online) |
| declare | [/ams/api/v1/customs/declare](https://global.alipay.com/docs/ac/ams/declare) |
| inquiryDeclarationRequests | [/ams/api/v1/customs/inquiryDeclarationRequests](https://global.alipay.com/docs/ac/ams/inquirydeclare) |
| registration | [/v1/merchants/registration](https://global.alipay.com/docs/ac/ams/registration_online) |
| inquiryRegistrationStatus | [/v1/merchants/inquiryRegistrationStatus](https://global.alipay.com/docs/ac/ams/irs_online) |
| inquiryRegistrationInfo | [/v1/merchants/inquiryRegistrationInfo](https://global.alipay.com/docs/ac/ams/iri_online) |



Table 1. Auto Debit API list

The following table lists the SPIs that are used in Auto Debit. Alipay uses these SPIs to send you notifications after you make the corresponding configuration.



| **SPI name** | **Endpoint** |
| --- | --- |
| notifyPayment | [/v1/payments/notifyPayment](https://global.alipay.com/doc/ams/paymentrn_online) |
| notifyAuthorization | [/v1/authorizations/notifyAuthorization](https://global.alipay.com/docs/ac/ams/notifyauth) |
| notifyRegistrationStatus | [/v1/merchants/notifyRegistrationStatus](https://global.alipay.com/docs/ac/ams/nrs_online) |



Table 2. Auto Debit SPI list

### SDKs

In addition to API integration via customized coding, you can also integrate via [Alipay SDKs](https://global.alipay.com/docs/sdks). The Alipay SDKs provide a standardized way to help merchants build software applications faster. Currently, SDKs for Java, Python, and PHP are provided with varying scopes:

*   Java SDK: Supports all the same functionalities as the API solution.
*   Python, PHP, and .Net SDKs: Supports only part of the functionalities that the API solution provides. The following table shows the functionalities that Python, PHP, and .Net SDKs currently support:



| **Functionality** | **SDK integration** |
| --- | --- |
| consult | ✅ |
| applyToken | ✅ |
| revoke | ✅ |
| pay | ✅ |
| inquiryPayment | ✅ |
| cancel | ✅ |
| refund | ✅ |
| inquiryRefund |  |
| declare |  |
| inquiryDeclarationRequests |  |



Table 3. Supported SDK integration for each functionality

Supported payment methods
=========================

Auto Debit supports the following payment methods:



| **Payment method** |
| --- |
| [Alipay](https://global.alipay.com/docs/ac/antomad/alipay) |
| [AlipayHK](https://global.alipay.com/docs/ac/antomad/alipayhk) |
| [bKash](https://global.alipay.com/docs/ac/antomad/bkash) |
| [Boost](https://global.alipay.com/docs/ac/antomad/boost) |
| [DANA](https://global.alipay.com/docs/ac/antomad/dana) |
| [Easypaisa](https://global.alipay.com/docs/ac/antomad/easypaisa) |
| [GCash](https://global.alipay.com/docs/ac/antomad/gcash) |
| [GrabPay](https://global.alipay.com/docs/ac/antomad/grabpay) |
| [KakaoPay](https://global.alipay.com/docs/ac/antomad/kakaopay) |
| [KrungThai Bank](https://global.alipay.com/docs/ac/antomad/ktb) |
| [Maya](https://global.alipay.com/docs/ac/antomad/maya) |
| [NAVER Pay](https://global.alipay.com/docs/ac/antomad/naverpay) |
| [PayPay](https://global.alipay.com/docs/ac/antomad/paypay) |
| [Rabbit LINE Pay](https://global.alipay.com/docs/ac/antomad/rabbitlinepay) |
| [Siam Commercial Bank](https://global.alipay.com/docs/ac/antomad/scb) |
| [Touch'n Go](https://global.alipay.com/docs/ac/antomad/touchngo) |
| [TrueMoney](https://global.alipay.com/docs/ac/antomad/truemoney) |
| [Zalopay](https://global.alipay.com/docs/ac/antomad/zalopay) |



More information
================

[User experience](https://global.alipay.com/docs/ac/autodebitpay/user_ex)

[Best practice](https://global.alipay.com/docs/ac/autodebitpay/best_practice)

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 4](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 5](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?

#### On this page

[User experience](#MQR41 "User experience")

[Product functionalities](#H7dQN "Product functionalities")

[Integration solution introduction](#aFbls "Integration solution introduction")

[Cooperation process](#GQGMv "Cooperation process")

[Integration process](#a52pU "Integration process")

[APIs and SPIs](#YKiUL "APIs and SPIs")

[SDKs](#7QXfW "SDKs")

[Supported payment methods](#xtvNz "Supported payment methods")

[More information](#ueubN "More information")
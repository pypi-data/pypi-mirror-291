支付宝API | 产品API | 支付宝文档
==================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg) ![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fapi)  
[返回首页](../../)

产品API
-------

[支付宝API](/docs/ac/ams/api)  
[概述](/docs/ac/ams/api_fund)  
[幂等性](/docs/ac/ams/idempotency)  
[消息编码](/docs/ac/ams/me)  
[请求签名与验证签名](/docs/ac/ams/digital_signature)  
[API变更历史](/docs/ac/ams/changehistory)  

在线支付
在店支付

支付宝API
==========

支付宝API
---------

支付宝API设计简洁明了，易于集成，旨在降低高可用性应用的复杂性并缩短开发时间。支付宝API基于HTTP协议，采用POST方式，使用SHA256和RSA算法生成数字签名，接收JSON格式的请求体，并返回JSON格式的响应。API请求包括路径中的API URL，请求头中的身份和签名信息，以及请求体中的参数。

调用API
---------

要集成支付宝，首先需要在[蚂蚁开放平台仪表盘](http://global.alipay.com/docs/dashboard_en)中做好准备并获取您的客户端ID。然后，您可以在测试模式下使用支付宝API，这不会影响您的实际数据。我们建议在项目上线前先在沙箱环境中测试API调用。
您可以使用蚂蚁金服提供的开放SDK来集成支付宝服务。如果您使用的是Java、PHP或Python编程语言，可以通过支付宝提供的SDK完成组装、签名、调用HTTP请求以及检查结果的整个过程。这些SDK封装了集成过程，包括调用支付宝API时的添加和验证签名。

**店内支付** **在线支付**

*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/4eff1542-f812-4c34-b72c-b57389940a7f.png) [Python](https://github.com/alipay/global-open-sdk-python)
*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/1cf17429-1d85-4d73-b442-99db1e07a179.png) [PHP](https://github.com/alipay/global-open-sdk-php)
*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/67a3f336-e0cd-469c-966c-49583de22243.png) [Java](https://github.com/alipay/ams-java-sdk)
*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/4eff1542-f812-4c34-b72c-b57389940a7f.png) [Python](https://github.com/alipay/global-open-sdk-python)
*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/1cf17429-1d85-4d73-b442-99db1e07a179.png) [PHP](https://github.com/alipay/global-open-sdk-php)
*   ![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/67a3f336-e0cd-469c-966c-49583de22243.png) [Java](https://github.com/alipay/global-open-sdk-java)

**客户端库**

针对不同的支付场景，为Java、PHP和Python提供了特定的SDK。根据您的需求选择合适的SDK。请参考README.md部分以了解更多关于如何使用SDK的信息。
生产环境和沙箱环境的请求地址仅在请求的路径部分有所不同。您可以在沙箱环境中先测试支付宝API，这不会影响生产环境中的数据。测试完成后，通过更改请求URL和其他配置迁移到生产环境。

| 环境 | 请求URL |
| --- | --- |
| 沙箱 | <https://>domain\_name<>/ams/sandbox/api/<endpoint>（在线支付）<https://>domain\_name<>/ams/api/<endpoint>（店内支付） |
| 生产 | <https://>domain\_name<>/ams/api/<endpoint>（在线支付）<https://>domain\_name<>/ams/api/<endpoint>（店内支付） |

域名可从支付宝获取，您可以根据所在地区选择以下列出的其中一个支持的域名。如果您不确定使用哪个域名，请联系技术支持 overseas\_support@service.alibaba.com 获取帮助。

| 地区 | 域名 |
| --- | --- |
| 北美 | <https://open-na-global.alipay.com>（推荐）或<https://open-na.alipay.com> |
| 亚洲 | <https://open-sea-global.alipay.com>（推荐）或<https://open-sea.alipay.com> |
| 欧洲 | <https://open-de-global.alipay.com>（推荐）或<https://open-eu.alipay.com>（仅限店内支付） |

以下是一个典型的支付宝API请求和响应的示例：

**请求**
```shell
POST /ams/api/v1/payments/inquiryPayment HTTP/1.1
Accept: application/json, text/plain, */*
Content-Type: application/json; charset=UTF-8
Request-Time: 1685599933871
client-id: 5J5XSU7Y2Y182W01981
Signature: algorithm=RSA256,keyVersion=1,signature=***
{"paymentId":"20200429114010800100188850266791455"}
```

**响应**
```json
{
  "actualPaymentAmount": {
    "currency": "PHP",
    "value": "1314"
  },
  "paymentAmount": {
    "currency": "PHP",
    "value": "1314"
  },
  "paymentId": "20200513114010800100188770269589293",
  "paymentRequestId": "REQUEST_20200513161204",
  "paymentResultCode": "SUCCESS",
  ...
}
```
请注意，响应中省略了部分信息，实际响应会包含更多详细数据。
"paymentResultMessage": "成功",
"paymentStatus": "SUCCESS",
"paymentTime": "2020-05-13T01:12:52-07:00",
"result": {
"resultCode": "SUCCESS",
"resultMessage": "成功。",
"resultStatus": "S"
}
}  
支付宝提供了开发者工具和资源，以帮助您快速高效地集成。利用这些工具可以简化您的开发流程。  
了解更多关于支付宝API的信息
------------------------------
*   [概述 在进行任何支付之前，了解支付宝API的工作原理以及请求和响应的结构非常重要。本部分介绍了您的系统与支付宝之间在线消息的一般信息（如消息结构和消息传输工作流）。](https://global.alipay.com/docs/ac/ams/api_fund)
*   [请求签名和验证签名 为了确保数据在传输过程中未被篡改，可以采用数字签名。所有消息都必须包含数字签名。](https://global.alipay.com/docs/ac/ams/digital_signature)
*   [消息编码 为了避免消息中特殊字符引起的错误或歧义，应在传输前正确编码消息。](https://global.alipay.com/docs/ac/ams/me)
*   [API变更历史 支付宝API的发布说明。](https://global.alipay.com/docs/ac/ams/changehistory)  
支付宝支付产品的API和通知
----------------------------
不同的API针对不同的支付场景设计。根据您的收款情况使用特定的API。当支付处理达到成功或失败的最终状态时，支付宝还会提供通知，将支付结果发送给商家。
### 在线支付  
收银台支付  
*   [咨询](https://global.alipay.com/docs/ac/ams/consult_cashier)
*   [支付](https://global.alipay.com/docs/ac/ams/payment_cashier)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri_online)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc_online)
*   [退款](https://global.alipay.com/docs/ac/ams/refund_online)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir_online)
*   [申报](https://global.alipay.com/docs/ac/ams/declare)
*   [查询申报请求](https://global.alipay.com/docs/ac/ams/inquirydeclare)
*   [扣款](https://global.alipay.com/docs/ac/ams/capture)  

自动扣款  
*   [咨询](https://global.alipay.com/docs/ac/ams/authconsult)
*   [申请令牌](https://global.alipay.com/docs/ac/ams/accesstokenapp)
*   [撤销授权](https://global.alipay.com/docs/ac/ams/authrevocation)
*   [支付协议支付](https://global.alipay.com/docs/ac/ams/payment_agreement)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri_online)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc_online)
*   [退款](https://global.alipay.com/docs/ac/ams/refund_online)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir_online)
*   [申报](https://global.alipay.com/docs/ac/ams/declare)
*   [查询申报请求](https://global.alipay.com/docs/ac/ams/inquirydeclare)  

**注意**：在线支付产品的通知：[支付通知](https://global.alipay.com/docs/ac/ams/paymentrn_online)、[授权通知](http://global.alipay.com/docs/ac/ams/notifyauth)、[退款通知](https://global.alipay.com/docs/ac/ams/notify_refund)、[扣款通知](https://global.alipay.com/docs/ac/ams/notify_capture)和[争议通知](https://global.alipay.com/docs/ac/ams/notify_dispute)。
### 店内支付
用户展示模式支付
*   [支付](https://global.alipay.com/docs/ac/ams/upm)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc)
*   [退款](https://global.alipay.com/docs/ac/ams/refund)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir)
*   [注册](https://global.alipay.com/docs/ac/ams/registration)
*   [查询注册状态](https://global.alipay.com/docs/ac/ams/irs)
*   [查询注册信息](https://global.alipay.com/docs/ac/ams/iri)  

订单码支付
*   [支付](https://global.alipay.com/docs/ac/ams/oc)
*   [查询支付](https://global.alipay.com/docs/ac/ams/oc)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc)
*   [退款](https://global.alipay.com/docs/ac/ams/refund)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir)
*   [注册](https://global.alipay.com/docs/ac/ams/registration)
*   [查询注册状态](https://global.alipay.com/docs/ac/ams/irs)
*   [查询注册信息](https://global.alipay.com/docs/ac/ams/iri)  

入口码支付
*   [支付](https://global.alipay.com/docs/ac/ams/ec)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc)
*   [退款](https://global.alipay.com/docs/ac/ams/refund)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir)
*   [注册](https://global.alipay.com/docs/ac/ams/registration)
*   [查询注册状态](https://global.alipay.com/docs/ac/ams/irs)
*   [查询注册信息](https://global.alipay.com/docs/ac/ams/iri)  

**注意**：店内支付产品的通知：[支付通知](https://global.alipay.com/docs/ac/ams/paymentrn)，[注册状态通知](https://global.alipay.com/docs/ac/ams/nrs)  

#### 这个页面是否有帮助？
要查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。  
![图片9](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片10](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 蚂蚁金服 [法律信息](https://global.alipay.com/docs/ac/platform/membership)
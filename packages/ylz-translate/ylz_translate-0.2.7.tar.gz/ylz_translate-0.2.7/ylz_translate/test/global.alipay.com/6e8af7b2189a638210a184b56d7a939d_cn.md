错误场景模拟 | 开发参考 | 支付宝文档
===============

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)](/docs/) [![图片2：中国领先的第三方在线支付解决方案 - 支付宝](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fref%2Ferror_scenario_sim_en)  
[返回首页](../../)  

开发参考  
[沙箱环境](/docs/ac/ref/sandbox)  
[集成模式](/docs/ac/ref/oy9921)  
[安全文件传输](/docs/ac/ref/xgcpey)  

常见问题  
Antom 控制台  
工具  
[API 密钥配置](/docs/ac/ref/key_config_en)  
[API 调用模拟](/docs/ac/ref/api_call_sim_en)  
[错误场景模拟](/docs/ac/ref/error_scenario_sim_en)  
[测试用例](/docs/ac/ref/test_case_en)  

其他参考  
[MCC 代码](/docs/ac/ref/mcccodes)  
[Amount 对象使用规则](/docs/ac/ref/cc)  
[支付方式](/docs/ac/ref/payment_method)  
[风险管理方法](/docs/ac/ref/risk_methods)  
[品牌资产](/docs/ac/ref/brandasset)  

错误场景模拟
=========================

2024-05-17 09:12

错误场景模拟提供不同 API 结果的模拟，并返回指定的响应以进行集成测试。

开始前
----------------

在进行错误场景模拟之前，请登录 Antom 控制台，进入 **密钥配置** 页面，配置沙箱环境的设置。

1.  转到 **开发者** > **密钥配置**，点击 **生成密钥**。或者转到 **开发者** > **快速入门**，找到 **集成资源和工具**，选择 **集成资源**，然后点击 **生成密钥**。
# 生成和替换API密钥
## 生成API密钥
1. 点击**确认**。密钥将被生成。
> **注意**：你的私钥只会显示一次，Antom不会存储它。确保你保存私钥以备后用。

2. 如果你需要替换密钥，可以一键替换或使用工具。前往**开发者** > **密钥配置**，点击**替换密钥**。或者去**开发者** > **快速入门**，找到**集成资源和工具**，选择**集成资源**，然后点击**替换密钥**。
![图4: image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1712137611781-9743d2cb-5fdd-44b9-8e45-e42b20a3e4d5.png)
> **注意**：要替换密钥，可以使用以下方法之一：
>
> * 点击**一键替换密钥**，用Antom生成的新密钥替换旧密钥。
> * 点击**使用自己的公钥和私钥**，使用页面提供的工具生成自己的公钥和私钥。
![图5: image.png](https://idocs-assets.marmot-cloud.com/storage/idocs87c36dc8dac653c1/1712137654651-e86f8602-e997-40cd-8d71-2be8aa82e260.png)

3. 前往**开发者** > **通知URL**。选择**配置**标签。在**操作**下点击**添加**，并在**通知URL**中输入你的通知接收地址。

## 模拟错误
错误场景模拟可以模拟所有结果代码，包括罕见的生产环境情况。这有助于开发者在测试模式下使用与生产环境相同的系统逻辑处理。通过调整模拟时间，可以改变结果的有效时间。

Antom提供了对应不同结果代码的各种响应。选择特定的结果代码，系统将模拟API的相应响应。
**API 模拟持续时间**  
当你为 **API 模拟持续时间** 设置特定的时间长度（30 分钟、60 分钟、90 分钟或 120 分钟）时，指定错误场景的 API 调用模拟将在设定的时间结束后自动结束。  
**指定响应后**  
设置响应后，当 API 模拟开启时，对应的 API 将始终返回指定的响应。有关 API 模拟的详细过程，请参阅 [API 模拟](https://global.alipay.com/docs/ac/ref/api_call_sim_en)。  
要查看文档的最新更新，请访问 [发行说明](https://global.alipay.com/docs/releasenotes)。  
![图片 8](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片 9](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)  
@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)  

#### 这个页面有帮助吗？  

#### 本页内容  
[开始之前](#m6FGi "开始之前")  
[模拟错误](#PfS2Z "模拟错误")
notifyPayment | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fpaymentrn_online)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

[consult (Checkout Payment)](/docs/ac/ams/consult?pageVersion=49)

[pay (Checkout Payment)](/docs/ac/ams/payment_cashier?pageVersion=179)

[createPaymentSession (Checkout Payment)](/docs/ac/ams/session_cashier)

[capture (Checkout Payment)](/docs/ac/ams/capture)

[pay (Auto Debit)](/docs/ac/ams/payment_agreement)

[createPaymentSession (EasySafePay)](/docs/ac/ams/createpaymentsession_easypay)

[notifyPayment](/docs/ac/ams/paymentrn_online?pageVersion=69)

[notifyCapture (Checkout Payment)](/docs/ac/ams/notify_capture)

[inquiryPayment](/docs/ac/ams/paymentri_online?pageVersion=74)

[cancel](/docs/ac/ams/paymentc_online?pageVersion=30)

Subscription

Dispute

Refund

Declaration

In-store payments

notifyPayment
=============

2024-05-11 11:04

POST /undefined

Alipay uses **notifyPayment** to send the payment result to the merchant when the payment processing reaches a final state of success or failure. Merchants promote merchant-side transactions based on the payment result.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

Show all

#### notifyType String  REQUIRED

Type of the payment status notification. Valid values are:

*   `PAYMENT_RESULT`: Indicates that the notification is about the payment result.
*   `PAYMENT_PENDING`: Indicates that the user has completed the payment. The merchant needs to wait for the final payment result.  

#### result Result object REQUIRED

Details about the payment result, such as payment status, result code, and result message.

Show child parameters

#### paymentRequestId String  REQUIRED

The unique ID that is assigned by a merchant to identify a payment request.

More information about this field

*   Maximum length: 64 characters

#### paymentId String  REQUIRED

The unique ID that is assigned by Alipay to identify a payment. A one-to-one correspondence between _paymentId_ and _paymentRequestId_ exists.

More information about this field

*   Maximum length: 64 characters

#### paymentAmount Amount object REQUIRED

The payment amount that the merchant requests to receive in the order currency.

Show child parameters

#### paymentCreateTime Datetime  REQUIRED

The date and time when the payment is created.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### paymentTime Datetime  

The date and time when the payment reaches a final state of success.

Note: This field is returned only when the payment reaches a final state of success (the value of _result.resultStatus_ is `S`).

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### pspCustomerInfo PspCustomerInfo object 

Information about the customer of Alipay+ Mobile Payment Provider (Alipay+ MPP).

Note: This field is returned when the Alipay+ MPP can provide the related information.

Show child parameters

#### customsDeclarationAmount Amount object 

The total amount for customs declaration.

Note: This field is returned only when the payment succeeds and the wallet is AlipayCN.

Show child parameters

#### grossSettlementAmount Amount object 

The value of this field equals to transaction amount multiplied by the value of _settlementQuote_. This field is returned when the currency exchange is predetermined and the exchange rate is locked at the time of transaction.

Show child parameters

#### settlementQuote Quote object 

The exchange rate between the settlement currency and transaction currency. This field is returned when _grossSettlementAmount_ is returned.

Show child parameters

#### acquirerReferenceNo String  

The unique ID assigned by the non-Alipay acquirer for the transaction.

More information about this field

*   Maximum length: 64 characters

#### paymentResultInfo PaymentResultInfo object  

The payment result information.

This parameter is returned when the value of _paymentMethodType_ in the [**pay**](https://global.alipay.com/docs/ac/ams/payment_cashier) API is `CARD`, `GRABPAY_MY`, or `GRABPAY_SG`.

Select scenario

#### promotionResult Array <PromotionResult> object 

Promotion result.

This parameter is returned when the buyer applied a promotion while placing an order.

Show child parameters

### Response parameters

Show all

#### result Result object REQUIRED

A fixed value, which is sent to Alipay to acknowledge that the notification is received.

Show child parameters

API Explorer

### Request

Case

Payment successul

Request Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

{

"notifyType": "PAYMENT\_RESULT",

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "success"

},

"paymentRequestId": "2020010123456789XXXX",

"paymentId": "2020010123456789XXXX",

"paymentAmount": {

"value": "8000",

"currency": "EUR"

},

"paymentCreateTime": "2020-01-01T12:01:00+08:30",

"paymentTime": "2020-01-01T12:01:01+08:30"

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "Success"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

More information 
-----------------

This section provides additional information about the key parameter. See the following parameter for details:

*   _paymentTime_: The successful execution time of this payment by Alipay, that is, the date and time when the payment reaches a final state of success. This value is used as the start time of the subsequent cancellable and refundable time. For example, if the refundable time is 6 months, the final time to accept the refund is _paymentTime_ plus 6 months.

Result process logic
--------------------

Send the following message with fixed values to Alipay after receiving the notification, to acknowledge that the notification from Alipay is received:

Sample Code

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

If no such message is returned to Alipay due to operation issues or network issues, Alipay will send the notification again and again until the required message is returned by the merchant. Resending of the notification will be performed within 24 hours after the first notification is sent. The notification will be resent up to eight times, with an interval of 0s, 2min, 10min, 10min, 1h, 2h, 6h, and 15h.

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The payment is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_API | F | The called API is invalid or not active. | Contact Alipay Technical Support to resolve the issue.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Contact Alipay Technical Support for detailed reasons.

 |
| EXPIRED\_CODE | F | The payment code is expired. | The user needs to refresh the payment code.

 |
| FRAUD\_REJECT | F | The transaction cannot be further processed because of risk control. If the user has already paid for the transaction, the transaction will be refunded. | Contact Alipay Technical Support when one of the following conditions is met:

*   You want to make an appeal. 
*   The user does not receive the refund within two weeks.  

 |
| INVALID\_ACCESS\_TOKEN | F | The access token is expired, revoked, or does not exist. | Check whether the _accessToken_ is expired, revoked, or does not exist. Re-sign the contract and re-initiate the authorization signing process.

 |
| INVALID\_CONTRACT | F | The parameter values in the contract do not match those in the current transaction. | Check whether the parameter values in the contract match those in the current transaction. If the values match, contact Alipay Technical Support to troubleshoot the issue.

 |
| INVALID\_MERCHANT\_STATUS | F | The merchant status is abnormal because restrictions exist. | Contact Alipay Technical Support for detailed reasons.

 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | Check whether the private key or public key exists. If not, upload the private key in Alipay Developer Center.

 |
| MERCHANT\_BALANCE\_NOT\_ENOUGH | F | The merchant balance is not enough. | Call the interface again after the merchant has sufficient balance.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| NO\_PAY\_OPTIONS | F | No payment methods are available. | 

Contact Antom Technical Support for detailed reasons.



 |
| ORDER\_IS\_CLOSED | F | The transaction is closed and cannot be paid again. | Use a new _paymentRequestId_ to initiate a payment.

 |
| ORDER\_NOT\_EXIST | F | The order does not exist. | Check whether _paymentId_ is correct.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PAYMENT\_AMOUNT\_EXCEED\_LIMIT | F | The payment amount is greater than the maximum amount allowed by the contract or payment method. | Check whether the payment amount exceeds the limit or use a lower amount and try again. Contact Alipay technical support to know the specific limitation.

 |
| PAYMENT\_COUNT\_EXCEED\_LIMIT | F | The maximum number of payments exceeds the limit that is specified by the payment method. | Contact Alipay Technical Support to know the specific limitation.

 |
| PAYMENT\_NOT\_QUALIFIED | F | The merchant is not qualified to pay because the merchant is not registered, does not have a contract for Auto Debit payment, or is forbidden to make a payment. | Contact Alipay Technical Support for detailed reasons.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| RISK\_REJECT | F | The transaction cannot be further processed because of risk control. If the user has already paid for the transaction, the transaction will be refunded. | If the user does not receive the refund within two weeks, contact Alipay Technical Support.

 |
| PAYMENT\_IN\_PROCESS | U | The payment is being processed. | The request you initiated has the same _paymentRequestId_ as that of the existed transaction, which might be a successful or in-process transaction. Check whether _redirectActionForm.redirectUrl_ is returned in the response. If returned, redirect the user to the address specified by rediectUrl to complete the payment. If not, the payment might already be completed. See Result process logic for details.

 |
| SUSPECTED\_RISK | F | The transaction cannot be further processed because of suspected security issues. You can retry the transaction after one working day. If the transaction is not secure and the user has already paid, the transaction will be refunded. | Contact Alipay Technical Support when one of the following conditions is met:

*   The transaction cannot be further processed after you retry.
*   The user does not receive the refund within two weeks.  

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| USER\_AMOUNT\_EXCEED\_LIMIT | F | The payment amount exceeds the user payment limit. | Create a new payment by using an amount less than or equal to the account's available balance, or contact Alipay Technical Support.

 |
| USER\_BALANCE\_NOT\_ENOUGH | F | The payment cannot be completed because the user balance in the corresponding payment method is insufficient. | Please top up the account or choose other payment methods.

 |
| USER\_KYC\_NOT\_QUALIFIED | F | The payment failed because of the user's KYC status. The user is either not KYC compliant, or the KYC status is not qualified for this transaction (for example, limitations on the payment amount or product information). | Complete the KYC verification first.

 |
| USER\_NOT\_EXIST | F | The user does not exist on the wallet side. | Contact Alipay Technical Support for detailed reasons.

 |
| USER\_PAYMENT\_VERIFICATION\_FAILED | F | The user is restricted from payment on the payment method side. | Contact Alipay Technical Support to know the specific reasons.

 |
| USER\_STATUS\_ABNORMAL | F | The user status is abnormal on the payment method side. | Contact Alipay Technical Support to know the specific reasons.

 |
| VERIFY\_TIMES\_EXCEED\_LIMIT | F | The current verification code failed to pass the payment verification too many times. | The user must get a new verification code.

 |
| VERIFY\_UNMATCHED | F | The verification code is invalid. | The user must get a new verification code.

 |
| AUTHENTICATION\_REQUIRED | F | 3D Secure authentication is required. | Reinitiate the payment and redirect the user to perform 3D Secure authentication.

 |
| PAYMENT\_PROHIBITED | F | The payment cannot be processed because the goods are prohibited from sale in the country. | You are not allowed to appeal against this transaction.

 |
| CARD\_NOT\_SUPPORTED | F | The card used for the transaction is not supported. | 

Use another card to pay the transaction.

 |
| INVALID\_EXPIRATION\_DATE | F | The value of paymentMethod.paymentMethodMetaData.expiryYear or paymentMethod.paymentMethodMetaData.expiryDate is invalid. | 

Check whether the value of _paymentMethod.paymentMethodMetaData.expiryYear or paymentMethod.paymentMethodMetaData.expiryDate_ is correct:

*   If not correct, pass in the correct value.
*   If correct, contact Alipay Technical Support for detailed reasons. 

 |
| INVALID\_CARD\_NUMBER | F | The number of the card used for the transaction is invalid. | 

Check whether the value of _paymentMethod.paymentMethodMetaData.cardno_ is correct:

*   If not correct, pass in the correct value and try again.
*   If correct, this card is not supported by the transaction, use another card to pay the transaction.  

 |
| DO\_NOT\_HONOR | F | The payment is declined by the issuing bank. | 

Retry the payment using a different card or contact the issuing bank.



 |
| INVALID\_AMOUNT | F | The transaction was declined by the issuing bank due to various reasons. For example, the specified amount is invalid or exceeds the maximum amount limit. | Contact Alipay Technical Support for detailed reasons.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
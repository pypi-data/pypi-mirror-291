capture (Checkout Payment) | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fcapture)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

Authorization

Vault

Payment

[consult (Checkout Payment)](/docs/ac/ams/consult)

[pay (Checkout Payment)](/docs/ac/ams/payment_cashier)

[createPaymentSession (Checkout Payment)](/docs/ac/ams/session_cashier)

[capture (Checkout Payment)](/docs/ac/ams/capture)

[pay (Auto Debit)](/docs/ac/ams/payment_agreement)

[createPaymentSession (EasySafePay)](/docs/ac/ams/createpaymentsession_easypay)

[notifyPayment](/docs/ac/ams/paymentrn_online)

[notifyCapture (Checkout Payment)](/docs/ac/ams/notify_capture)

[inquiryPayment](/docs/ac/ams/paymentri_online)

[cancel](/docs/ac/ams/paymentc_online)

Subscription

Dispute

Refund

Declaration

In-store payments

capture (Checkout Payment)
==========================

2024-04-25 06:13

POST /v1/payments/capture

The **capture** API is used to capture the funds of an authorized payment from a user's account, and then transfer the specified payment amount to the merchant's account. Depending on different scenarios, the authorized payment can be captured in one of the following ways:

*   Full capture: Capture the total payment amount. 
*   Partial capture: Capture the partial payment amount.  

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is `true`, set it as "true".  

### Request parameters

Show all

#### captureRequestId String  REQUIRED

The unique ID that is assigned by the merchant to identify a capture request. Alipay uses this field for idempotence control.

More information about this field

*   This field is an API idempotency field.For capture requests that are initiated with the same value of captureRequestId and reach a final status (S or F), the same result is to be returned for the request.
*   Maximum length: 64 characters

#### paymentId String  REQUIRED

The unique ID that is assigned by Alipay to identify a payment.

More information about this field

*   Maximum length: 64 characters

#### captureAmount Amount object REQUIRED

The capture amount that the merchant requests to receive in the transaction currency.

Show child parameters

### Response parameters

Show all

#### result Result object REQUIRED

The result of the API call.

Show child parameters

#### captureRequestId String  

The unique ID that is assigned by a merchant to identify a capture request.

This parameter is returned when the capture status is successful.

More information about this field

*   Maximum length: 64 characters

#### captureId String  

The unique ID that is assigned by Alipay to identify a capture.

This parameter is returned when the capture status is successful.

More information about this field

*   Maximum length: 64 characters

#### paymentId String  

The unique ID that is assigned by Alipay to identify a payment.

This parameter is returned when the capture status is successful.

More information about this field

*   Maximum length: 64 characters

#### captureAmount Amount object 

The capture amount that the merchant requests to receive in the transaction currency.

This parameter is returned when the capture status is successful.

Show child parameters

#### captureTime Datetime  

The time when Alipay captures the payment.

This parameter is returned when the capture status is successful.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### acquirerReferenceNo String  

The unique ID assigned by the non-Alipay acquirer for the transaction.

More information about this field

*   Maximum length: 64 characters

API Explorer

Sample CodesRun in Sandbox

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/capture

Request Body

Copy

1

2

3

4

5

6

7

8

{

"paymentId": "20220919194010890100111740275820195",

"captureRequestId": "capture\_cangxi\_lj\_20220920\_005914\_845",

"captureAmount": {

"currency": "HKD",

"value": "10"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

{

"acquirerReferenceNo": "2022091919031300010740267587902",

"result": {

"resultStatus": "S",

"resultCode": "SUCCESS",

"resultMessage": "success."

},

"captureTime": "2022-09-19T09:59:17-07:00",

"paymentId": "20220919194010890100111740275820195",

"captureRequestId": "capture\_cangxi\_lj\_20220920\_005914\_845",

"captureId": "20220919194010890100111740275850565",

"captureAmount": {

"currency": "HKD",

"value": "10"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The capture is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | The access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| AUTH\_CANCELLED | F | The payment authorization is canceled. | Use a new _paymentRequestId_ to initiate a payment.

 |
| AUTH\_EXPIRED | F | The payment authorization is expired. | Use a new _paymentRequestId_ to initiate a payment.

 |
| AUTH\_NOT\_FOUND | F | The payment authorization is not found. | Contact Alipay Technical Support for detailed reasons.

 |
| CAPTURE\_AMOUNT\_EXCEED\_AUTH\_LIMIT | F | The total capture amount exceeds the limit of the authorized payment amount. | Create a new capture request by using an amount less than or equal to the authorized payment amount, or contact Alipay Technical Support.

 |
| CAPTURE\_IN\_PROCESS | U | The capture is processing. | Wait for the notification from Alipay or inquiry about the capture result.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Check the currency used in the request, such as the capture currency. If the issue persists, contact Alipay Technical Support for detailed reasons.

 |
| MULTI\_CAPTURE\_NOT\_SUPPORTED | F | The transaction does not support multiple captures. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_CONTRACT | F | The parameter values in the contract do not match those in the current transaction. | Check whether the parameter values in the contract match those in the current transaction. If the values match, contact Alipay Technical Support to troubleshoot the issue.

 |
| NO\_PAY\_OPTIONS | F | No payment methods are available. | 

Contact Antom Technical Support for detailed reasons.



 |
| ORDER\_IS\_CANCELED | F | The transaction is canceled. | Use a new _paymentRequestId_ to initiate a payment.

 |
| ORDER\_STATUS\_INVALID | F | The transaction status is abnormal. The payment cannot be captured. | Check the transaction status. If the values match, contact Alipay Technical Support to troubleshoot the issue.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PAYMENT\_COUNT\_EXCEED\_LIMIT | F | The number of captures exceeds the limit that is specified by the payment method. | Contact Alipay Technical Support to know the specific limit.

 |
| PROCESS\_FAIL | F | The capture failed. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| REPEAT\_REQ\_INCONSISTENT | F | The submitted request exists, and the parameter values of this request are not consistent with those of the existing request. | Ensure all the fields in the requests are the same or use a new _paymentRequestId_ to initiate a payment.

 |
| RISK\_REJECT | F | The request is rejected because of risk control. | Prompt the user that the request is rejected because of failed risk control.

 |
| USER\_AMOUNT\_EXCEED\_LIMIT | F | The capture amount exceeds the user payment limit. | Create a new capture by using an amount less than or equal to the user payment limit, or contact the user or the issuing bank.

 |
| USER\_BALANCE\_NOT\_ENOUGH | F | The user's balance is insufficient for the capture. | Contact Alipay Technical Support for detailed reasons.

 |
| USER\_NOT\_EXIST | F | The user's account does not exist on the payment method side. | Contact the user or the issuing bank.

 |
| USER\_STATUS\_ABNORMAL | F | The user's account status is abnormal on the payment method side. | Contact Alipay Technical Support to know the specific reasons.

 |
| UNKNOWN\_EXCEPTION | U | The API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If the problem persists, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
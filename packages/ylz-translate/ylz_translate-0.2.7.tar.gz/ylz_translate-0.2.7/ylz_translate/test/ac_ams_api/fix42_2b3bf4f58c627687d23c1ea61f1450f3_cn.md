通知订阅
==================
2023年12月26日 08:34
当订阅创建达到成功或失败的最终状态时，支付宝使用**notifySubscription**接口将订阅结果发送给商家。

结构
=========

消息由头和体组成。以下部分专注于体的结构。头的结构请参考：
*   [请求头](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [响应头](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**注意**：除数组外，每个字段的数据类型应设置为字符串。这意味着必须使用双引号（" "）包围字段值。例如：
*   如果字段的数据类型为Integer，其值为20，则设置为"20"。
*   如果字段的数据类型为Boolean，其值为true，则设置为"true"。
### 请求参数  
显示全部  
#### subscriptionRequestId 字符串  必填  
商家为识别订阅请求分配的唯一ID。  
关于此字段的更多信息：  
*   最大长度：64个字符  
#### subscriptionId 字符串  必填  
支付宝为识别订阅分配的唯一ID。  
关于此字段的更多信息：  
*   最大长度：64个字符  
#### subscriptionStatus 字符串  必填  
订阅的状态。有效值为：  
*   `ACTIVE`：表示订阅已激活。
*   `TERMINATED`：表示订阅已被终止。  
关于此字段的更多信息：  
*   最大长度：32个字符  
#### subscriptionNotificationType 字符串  必填  
订阅的通知类型。  
*   `CREATE`：表示订阅已创建。
*   `CHANGE`：表示订阅已更改。
*   `CANCEL`：表示订阅已被取消，当前订阅期结束后不再提供服务。
*   `TERMINATE`：表示订阅已被终止，不再提供服务。  
关于此字段的更多信息：  
*   最大长度：32个字符  
#### subscriptionStartTime 日期时间  必填  
订阅生效的日期和时间。  
关于此字段的更多信息：  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，"2019-11-27T12:01:01+08:00"。  
#### subscriptionEndTime 日期时间  必填  
订阅结束的日期和时间。  
关于此字段的更多信息：  
*   值遵循[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)标准格式。例如，"2019-11-27T12:01:01+08:00"。  
#### periodRule 期规则对象  必填  
订阅周期规则，用于定义订阅的计费周期。  
显示子参数
### 响应参数  
显示全部  
#### result 结果对象 **必需**  
一个固定值，用于向支付宝确认已接收到通知。  
显示子参数  
API 探索器
### 请求  
案例  
订阅创建通知  
请求体  
```json
{
  "periodRule": {
    "periodType": "MONTH",
    "periodCount": 1
  },
  "subscriptionEndTime": "2023-11-06T08:00:00-08:00",
  "subscriptionId": "20221205190000000000000450000007269",
  "subscriptionRequestId": "amsmdsubscription_20221206_033332_074",
  "subscriptionStartTime": "2022-10-04T09:00:00-07:00",
  "subscriptionStatus": "ACTIVE",
  "subscriptionNotificationType": "CREATE"
}
```
### 请求  
情况  
订阅创建通知  
请求体  
```json
{
  "result": {
    "resultStatus": "S",
    "resultCode": "SUCCESS",
    "resultMessage": "success."
  }
}
```

### 结果处理逻辑
收到通知后，向支付宝发送以下带有固定值的消息，确认收到支付宝的通知：
### 响应  
响应体  
```json
{
 "result": {
    "resultCode":"SUCCESS",
    "resultStatus":"S",
    "resultMessage":"success"
 }
}
```
如果由于操作问题或网络问题，支付宝没有接收到返回的消息，支付宝会在24小时内自动重发通知最多8次，或者直到收到正确的响应为止。发送间隔如下：0秒，2分钟，10分钟，10分钟，1小时，2小时，6小时和15小时。

要查看文档的最新更新，请访问[发行说明](https://global.alipay.com/docs/releasenotes)。


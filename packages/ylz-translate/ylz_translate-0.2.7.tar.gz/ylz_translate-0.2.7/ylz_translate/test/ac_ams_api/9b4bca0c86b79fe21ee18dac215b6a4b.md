pay (Order Code Payment) | Product APIs | Alipay Docs
===============
                        

[![Image 1: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/d66c43c0-440d-4c97-9976-f2028a2c8c5e.svg)![Image 2: Alipay, China's leading third-party online payment solution](https://ac.alipay.com/storage/2024/3/26/a48bd336-aea0-4f16-bf83-616eacbb4434.svg)](/docs/)

[Log In](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Foc)

[Go to Homepage](../../)

Product APIs

[Alipay APIs](/docs/ac/ams/api)

Online payments

In-store payments

Payment

[pay (User-presented Mode Payment)](/docs/ac/ams/upm)

[pay (Order Code Payment)](/docs/ac/ams/oc)

[pay (Entry Code Payment)](/docs/ac/ams/ec)

[notifyPayment](/docs/ac/ams/paymentrn)

[inquiryPayment](/docs/ac/ams/paymentri)

[cancel](/docs/ac/ams/paymentc)

Refund

Registration

pay (Order Code Payment)
========================

2023-07-27 09:58

POST /v1/payments/pay

Use the **pay** API to initiate a payment to Alipay and process payment results according to the status and operation instructions returned by Alipay.

Structure
=========

A message consists of a header and body. The following sections are focused on the body structure. For the header structure, see：

*   [Request header](https://global.alipay.com/docs/ac/ams/api_fund#ML5ur)
*   [Response header](https://global.alipay.com/docs/ac/ams/api_fund#WWH90)

**Note**: Set the data type of each field (except array) as String. This means that you must use double quotation marks (" ") to enclose the field value. Examples:

*   If the data type of a field is Integer and its value is 20, set it as "20". 
*   If the data type of a field is Boolean and its value is true, set it as "true". 

### Request parameters

Show all

#### productCode String  REQUIRED

The payment product that the merchant can use, based on the contract between the merchant and Alipay. For Order Code Payment, the value is fixed as `IN_STORE_PAYMENT`.

#### paymentRequestId String  REQUIRED

The unique ID that is assigned by a merchant to identify a payment request. Alipay uses this field for idempotence control.

More information about this field

*   This field is an API idempotency field.The merchant uses the paymentRequestId field for idempotency control. For payment requests that are initiated with the same value of paymentRequestId and reach a final status (S or F), the same result is to be returned for the request.
*   Maximum length: 64 characters

#### order Order object REQUIRED

Order information, such as buyer information, merchant information, order description, and order amount.

The parameter is also used for risk control, supervision, reporting, user payment result display, and so on.

Show child parameters

#### paymentAmount Amount object REQUIRED

The payment amount that the merchant requests to receive in the order currency.

Show child parameters

#### paymentMethod PaymentMethod object REQUIRED

The payment method that is used to collect the payment by the merchant or acquirer.

Show child parameters

#### paymentExpiryTime Datetime  

The payment expiration time is a specific time after which the payment will expire. After the payment expiration time, the acquirer or merchant must terminate the order processing. A default payment expiration time is determined by the contract. If you want to use a payment expiration time that differs from the default time, specify this field.

Note: Usually for User-Presented Mode Payment, the default payment expiration time in the contract is 3 minutes after the payment request is sent. For example, the request is sent when the time is 2019-11-27T12:00:01+08:30, the payment expiration time is 2019-11-27T12:03:01+08:30.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### paymentRedirectUrl URL  

The URL that the user is redirected to after the payment is completed

More information about this field

*   Maximum length: 2048 characters

#### paymentNotifyUrl URL  REQUIRED

The URL that is used to receive the payment result notification

More information about this field

*   Maximum length: 2048 characters

#### paymentFactor PaymentFactor object 

Indicates the payment scenario.

Show child parameters

#### settlementStrategy SettlementStrategy object 

The settlement strategy for the payment request.

Note: Specify this field when one of the following conditions are met:

*   Multiple settlement contracts are signed and more than one settlement contract supports this transaction. In this case, use this field to specify the settlement currency so that the settlement contract to be used for this transaction can be selected from all the signed settlement contracts.
*   When the value of _paymentMethodType_ is `CONNECT_WALLET`.

Show child parameters

#### merchantRegion String  

The country or region where the merchant or secondary merchant operates the business. The 2-letter country/region code that follows [ISO 3166 Country Codes](https://www.iso.org/obp/ui/#search) standard. Only `US`, `JP`, `PK`, `SG` are supported now.

Note: This field is required when you use Alipay Global Gateway (GGW) product.

More information about this field

*   Maximum length: 2 characters

### Response parameters

Show all

#### result Result object REQUIRED

The request result contains information such as status and error codes.

Show child parameters

#### paymentRequestId String  

The unique ID that is assigned by a merchant to identify a payment request.

More information about this field

*   Maximum length: 64 characters

#### paymentId String  

The unique ID that is assigned by Alipay to identify a payment.

More information about this field

*   Maximum length: 64 characters

#### paymentAmount Amount object 

The payment amount that the merchant requests to receive in the order currency.

Show child parameters

#### paymentTime Datetime  

The date and time when the payment reaches a final state of success or failure.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### paymentCreateTime Datetime  

The date and time when the payment is created.

More information about this field

*   The value follows the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard format. For example, "2019-11-27T12:01:01+08:00".

#### pspCustomerInfo PspCustomerInfo object 

The customer information of the Alipay+ MPP.

Note: Alipay+ Mobile Payment Provider, is a Mobile Payment Partner participating in Alipay+ Core or other user- or issuer-facing payment service provider cooperating with a member of Ant Group to enable payments.

Show child parameters

#### challengeActionForm ChallengeActionForm object 

Provides information about the challenge action when the payment result is not in a final state of success or failure.

Show child parameters

#### redirectActionForm RedirectActionForm object 

Information about the redirection action：

*   When the method used for user redirection is `GET` (_method_\=`GET`), the value of _redirectUrl_ is a complete URL that can be used for user redirection.
*   When the method used for user redirection is `POST` (_method_\=`POST`), the value of _redirectUrl_ is part of a complete URL where the user is to be redirected to. Other parameters needed for a complete URL is provided in the parameters field.

Note: This field is returned when the API is called successfully.

Show child parameters

#### orderCodeForm OrderCodeForm object REQUIRED

Provides information about the order code.

Show child parameters

#### grossSettlementAmount Amount object 

Gross settlement amount, which equals to the transaction amount multiplied by the value of _settlementQuote_.

Note: This field is empty when the settlement currency is the same as the transaction currency.

Show child parameters

#### settlementQuote Quote object 

The exchange rate between the settlement currency and transaction currency at the time of the transaction, which is provided only in the locked-in rate case.

Note: This field is empty when the settlement currency is the same as the transaction currency.

Show child parameters

API Explorer

### Request

URL

North America

https://open-na-global.alipay.com/ams/api/v1/payments/pay

Request Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

{

"productCode": "IN\_STORE\_PAYMENT",

"paymentNotifyUrl": "http://xmock.inc.alipay.net/api/Ipay/globalSite/automtion

      /paymentNotify.htm",

"paymentRequestId": "10277574507XXXX",

"paymentFactor": {

"inStorePaymentScenario": "OrderCode"

},

"order": {

"referenceOrderId": "10277574507XXXX",

"orderDescription": "Mi Band 3 Wrist Strap Metal Screwless Stainless Steel

        For Xiaomi Mi Band 3 ",

"orderAmount": {

"currency": "USD",

"value": "10"

},

"merchant": {

"referenceMerchantId": "seller231117459@login.com",

"merchantName": "cup Hu",

"merchantMCC": "1234",

"store": {

"referenceStoreId": "S000000XXXX",

"storeName": "UGG-2",

"storeMCC": "1405"

}

}

},

"paymentAmount": {

"currency": "USD",

"value": "10"

},

"paymentMethod": {

"paymentMethodType": "CONNECT\_WALLET"

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

### Response

Response Body

Copy

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

{

"result": {

"resultCode": "SUCCESS",

"resultStatus": "S",

"resultMessage": "Success"

},

"paymentRequestId": "pay\_1089760038715669\_10277574507XXXX",

"paymentId": "2019060811401080010018882020035XXXX",

"paymentAmount": {

"value": "5000",

"currency": "USD"

},

"orderCodeForm": {

"paymentMethodType": "CONNECT\_WALLET",

"expireTime": "2019-06-01T12:01:01+08:30",

"codeDetails": \[

{

"codeValueType": "QRCODE",

"codeValue": "https://qr.alipay.com/bavh4wjlxf12tper3b",

"displayType": "SMALLIMAGE"

}

\]

}

}

הההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההההה

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

More information 
-----------------

This section gives additional information about other parameters. See the following parameters for details:

**•** _productCode_:  
The value of this parameter is the payment product that the merchant uses for collecting payments, based on the contract between the merchant and Alipay. When the merchant can use multiple products, this parameter is required.

**•** _order_:  
The _order_ parameter contains order information, such as Merchant, Goods, logistic, and purchase environment. During the payment process, the order information is mainly used by Alipay for risk control or anti-money laundering. After the payment is completed, the information is used to display consumption records, regulatory reporting, and other purposes.  
However, Alipay does not verify the consistency of the amount in _order_ and the amount in the payment request. The order information is not applied in fund operations either. Use the _env_ field if the risk control capability provided by Alipay is needed.

Sample for the order field

Copy

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

**•** _paymentMethod_:  
The value of _paymentMethod_ is `CONNECT_WALLET`, indicating that Alipay collects money from the order code that was generated by Alipay.

**•** _paymentExpiryTime_**:**  
The payment executor must ensure that the payment will not succeed after the expiration time. If this parameter is not specified in the request, the expiration time is then decided by the payment executor.

**•** _paymentFactor_**:**  
The value of _paymentFactor.inStorePaymentScenario_ is `OrderCode`, indicating that Alipay needs to generate an order code in this payment.

**•** _paymentId_:  
If this field is not returned in the response, you can use the _paymentRequestId_ field to initiate **inquiryPayment** and **cancel** requests.

### Result process logic

After calling a **pay** interface, the following results might be returned from Alipay:

*   Alipay returns that _result.resultStatus_ is `S`, which indicates the merchant needs to display the payment information to the user by using the parameters in a form that the user can proceed.
*   Alipay returns that _result.resultStatus_ is F, the payment request fails.
*   Alipay returns that _result.resultStatus_ is U, the merchant needs to call the **pay** interface again. 

### Result/Error codes

| Code | Value | Message | Further action |
| --- | --- | --- | --- |
| SUCCESS | S | Success | The payment is successful, no further action is needed.
 |
| ACCESS\_DENIED | F | Access is denied. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_API | F | The called API is invalid or not active. | Contact Alipay Technical Support to resolve the issue.

 |
| CLIENT\_INVALID | F | The client ID is invalid. Alipay has restrictions on client ID. | Check whether the client ID is correct, or contact Alipay Technical Support for detailed reasons.

 |
| CURRENCY\_NOT\_SUPPORT | F | The currency is not supported. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_CONTRACT | F | The parameter values in the contract do not match those in the current transaction. | Check whether the parameter values in the contract match those in the current transaction. If the values match, contact Alipay Technical Support to troubleshoot the issue.

 |
| INVALID\_MERCHANT\_STATUS | F | The merchant status is abnormal because restrictions exist. | Contact Alipay Technical Support for detailed reasons.

 |
| INVALID\_SIGNATURE | F | The signature is not validated. The private key used to sign a request does not match the public key of Alipay Developer Center. | Check whether the private key used to sign a request matches the public key of Alipay Developer Center. The following signature references are useful:

*   The [signature](https://global.alipay.com/docs/ac/ams/api_fund) field in a request header 
*   How to [calculate a signature](https://global.alipay.com/docs/ac/ams/digital_signature) 

 |
| KEY\_NOT\_FOUND | F | The private key or public key of Alipay or the merchant is not found. | Check whether the private key or public key exists. If not, upload the private key in Alipay Developer Center.

 |
| MEDIA\_TYPE\_NOT\_ACCEPTABLE | F | The server does not implement the media type that is acceptable to the client. | Check whether the media type is correct and use a media type that is accepted by Alipay.

 |
| MERCHANT\_KYB\_NOT\_QUALIFIED | F | The payment failed because of the merchant's KYB status. The merchant is either not KYB compliant, or the KYB status is not qualified for this transaction. | Contact Alipay Technical Support for detailed reasons.

 |
| MERCHANT\_NOT\_REGISTERED | F | The merchant is not registered. | Please register the merchant by using the registration interface. Contact Alipay Technical Support if failed to call the registration interface.

 |
| METHOD\_NOT\_SUPPORTED | F | The server does not implement the requested HTTP method. Only the POST method is supported. | Ensure the HTTP method is POST.

 |
| NO\_INTERFACE\_DEF | F | API is not defined. | Check whether the URL is correct. Please refer to the endpoint in the API documentation.

 |
| NO\_PAY\_OPTIONS | F | The currency is not supported for the transaction. | Check whether the currency is supported by the wallet, or check whether the wallet and currency are consistent with the contract. Contact Alipay Technical Support for detailed reasons.

 |
| ORDER\_IS\_CANCELED | F | The request you initiated has the same paymentRequestId as the previously paid transaction, which is canceled. | Use a new _paymentRequestId_ to initiate the payment again.

 |
| ORDER\_IS\_CLOSED | F | The request you initiated has the same paymentRequestId as that of the existed transaction, which is closed. | Use a new _paymentRequestId_ to initiate the payment again.

 |
| PARAM\_ILLEGAL | F | The required parameters are not passed, or illegal parameters exist. For example, a non-numeric input, an invalid date, or the length and type of the parameter are wrong. | Check and verify whether the required request fields (including the header fields and body fields) of the current API are correctly passed and valid.

 |
| PAYMENT\_AMOUNT\_EXCEED\_LIMIT | F | The payment amount is greater than the maximum amount allowed by the contract or wallet. | Check whether the payment amount exceeds the limit or use a lower amount and try again. Contact Alipay technical support to know the specific limitation.

 |
| PAYMENT\_COUNT\_EXCEED\_LIMIT | F | The maximum number of payments exceeds the limit that is specified by the wallet. | Contact Alipay Technical Support to know the specific limitation.

 |
| PAYMENT\_NOT\_QUALIFIED | F | The merchant is not qualified to pay because the merchant is not registered, or is forbidden to make a payment. | Contact Alipay Technical Support for detailed reasons.

 |
| PROCESS\_FAIL | F | A general business failure occurred. | Do not retry. Human intervention is usually needed. It is recommended that you contact Alipay Technical Support to troubleshoot the issue.

 |
| REPEAT\_REQ\_INCONSISTENT | F | The amount or currency is different from the previous request. | Ensure all the fields in the requests are the same or use a new _paymentRequestId_ to initiate the payment again.

 |
| RISK\_REJECT | F | The request is rejected because of the risk control. | Prompt the user that the request is rejected because the risk control failed.

 |
| SYSTEM\_ERROR | F | A system error occurred. | Do not retry, and contact Alipay Technical Support for more details.

 |
| USER\_NOT\_EXIST | F | The user does not exist on the wallet side. | Contact Alipay Technical Support for detailed reasons.

 |
| PAYMENT\_IN\_PROCESS | U | The payment is being processed. | Use a new _paymentRequestId_ to initiate the payment again.

 |
| REQUEST\_TRAFFIC\_EXCEED\_LIMIT | U | The request traffic exceeds the limit. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |
| UNKNOWN\_EXCEPTION | U | An API call has failed, which is caused by unknown reasons. | Call the interface again to resolve the issue. If not resolved, contact Alipay Technical Support.

 |

To view the latest updates to the documentation, visit [Release notes](https://global.alipay.com/docs/releasenotes).

![Image 3](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png)![Image 4](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 Alipay [Legal Information](https://global.alipay.com/docs/ac/platform/membership)

#### Is this page helpful?
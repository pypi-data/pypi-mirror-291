支付宝API | 产品API | 支付宝文档
==========================

[![图片1：中国领先的第三方在线支付解决方案 - 支付宝](./img_m_a52690f40beef33d7d37f1bda6f48c27.svg)![图片2：中国领先的第三方在线支付解决方案 - 支付宝](./img_m_d70d46fd32b98952674df01c03131d87.svg)](/docs/)

[登录](https://global.alipay.com/ilogin/account_login.htm?goto=https%3A%2F%2Fglobal.alipay.com%2Fdocs%2Fac%2Fams%2Fapi)

[返回首页](../../)

产品API
-------

[支付宝API](/docs/ac/ams/api)

[概述](/docs/ac/ams/api_fund)

[幂等性](/docs/ac/ams/idempotency)

[消息编码](/docs/ac/ams/me)

[使用SDK进行请求签名和验证签名](/docs/ac/ams/signature_sdk)

[请求签名和验证签名](/docs/ac/ams/digital_signature?pageVersion=34)

[API变更历史](/docs/ac/ams/changehistory)

在线支付

店内支付

支付宝API
==========

支付宝API
---------

支付宝API设计简洁明了，易于集成，旨在降低高可用性应用的复杂性并缩短开发时间。支付宝API基于HTTP协议，是POST类型的API，使用SHA256和RSA算法生成数字签名，接受JSON格式的请求体，并返回JSON格式的响应。API请求包括路径中的API URL，请求头中的身份和签名信息，以及请求体中的请求参数。

调用API
-------

要与支付宝集成，首先需要在[Antom仪表板](http://global.alipay.com/docs/dashboard_en)中做好准备并获取您的客户端ID。然后，您可以使用测试模式下的支付宝API来优化集成，这不会影响您的实际数据。我们建议在上线项目之前，在沙箱环境中测试API调用。

您可以使用支付宝提供的开放SDK来集成支付宝服务。如果您使用的是Java、PHP或Python编程语言，可以通过支付宝提供的SDK完成组装、签名、调用HTTP请求以及检查结果的整个过程。支付宝的SDK封装了集成过程，包括调用支付宝API时的添加和验证签名。

**店内支付** **在线支付**

*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/4eff1542-f812-4c34-b72c-b57389940a7f.png) Python](https://github.com/alipay/global-open-sdk-python)
*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/1cf17429-1d85-4d73-b442-99db1e07a179.png) PHP](https://github.com/alipay/global-open-sdk-php)
*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/67a3f336-e0cd-469c-966c-49583de22243.png) Java](https://github.com/alipay/ams-java-sdk)

*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/4eff1542-f812-4c34-b72c-b57389940a7f.png) Python](https://github.com/alipay/global-open-sdk-python)
*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/1cf17429-1d85-4d73-b442-99db1e07a179.png) PHP](https://github.com/alipay/global-open-sdk-php)
*   [![支付宝API](https://cdn.marmot-cloud.com/storage/2020/9/15/67a3f336-e0cd-469c-966c-49583de22243.png) Java](https://github.com/alipay/global-open-sdk-java)

**客户端库**

针对不同的支付场景，为Java、PHP和Python提供了特定的SDK。根据您的需求选择合适的SDK。请参阅README.md部分以了解更多关于如何使用SDK的信息。

生产环境和沙箱环境的请求地址仅在请求的路径部分有所不同。您可以在沙箱环境中先测试支付宝API，这不会影响生产环境中的数据。测试完成后，通过更改请求URL和其他配置迁移到生产环境。

| 环境 | 请求URL |
| --- | --- |
| 沙箱 | <https://>domain\_name<>/ams/sandbox/api/<endpoint>（在线支付）<br><https://>domain\_name<>/ams/api/<endpoint>（店内支付） |
| 生产 | <https://>domain\_name<>/ams/api/<endpoint>（在线支付）<br><https://>domain\_name<>/ams/api/<endpoint>（店内支付） |

域名可从支付宝获取，您可以根据所在地区选择以下列出的其中一个支持的域名。如果您不确定应使用哪个域名，可联系技术支持 overseas\_support@service.alibaba.com 获取帮助。

| 地区 | 域名 |
| --- | --- |
| 北美 | <https://open-na-global.alipay.com>（推荐）或<https://open-na.alipay.com> |
| 亚洲 | <https://open-sea-global.alipay.com>（推荐）或<https://open-sea.alipay.com> |
| 欧洲 | <https://open-de-global.alipay.com>（推荐）或<https://open-eu.alipay.com>（仅限店内支付） |

以下是一个典型的支付宝API请求和响应的示例：

**请求**

```markdown
POST /ams/api/v1/payments/inquiryPayment HTTP/1.1
Accept: application/json, text/plain, */*
Content-Type: application/json; charset=UTF-8
Request-Time: 1685599933871
client-id: 5J5XSU7Y2Y182W01981
Signature: algorithm=RSA256,keyVersion=1,signature=***

{"paymentId":"20200429114010800100188850266791455"}
```

**响应**

```markdown
（响应内容未给出，通常包括HTTP状态码、Content-Type、响应体等）
```

蚂蚁金服提供了开发者工具和资源，以帮助您快速高效地集成。利用这些工具可以简化您的开发流程。

了解更多关于支付宝API的信息
----------------------------------

*   [概述 在进行任何支付之前，了解支付宝API的工作原理以及请求和响应的结构至关重要。本节介绍了您的系统与支付宝之间在线消息的一般信息，如消息结构和消息传输工作流。](https://global.alipay.com/docs/ac/ams/api_fund)
*   [请求签名与验证签名 为了确保数据在传输过程中未被篡改，可以采用数字签名。所有消息都必须包含数字签名。](https://global.alipay.com/docs/ac/ams/digital_signature)
*   [消息编码 为了避免消息中特殊字符引起的错误或歧义，需要在传输前正确编码消息。](https://global.alipay.com/docs/ac/ams/me)
*   [API变更历史 支付宝API的发布说明。](https://global.alipay.com/docs/ac/ams/changehistory)

APIs和通知用于支付宝支付产品
----------------------------------

不同的API针对不同的支付场景设计。根据您的收款情况使用特定的API。当支付处理达到成功或失败的最终状态时，支付宝还会提供通知，将支付结果发送给商家。

### 在线支付

### 收银台支付

*   [咨询](https://global.alipay.com/docs/ac/ams/consult_cashier)
*   [支付](https://global.alipay.com/docs/ac/ams/payment_cashier)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri_online)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc_online)
*   [退款](https://global.alipay.com/docs/ac/ams/refund_online)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir_online)
*   [申报](https://global.alipay.com/docs/ac/ams/declare)
*   [查询申报请求](https://global.alipay.com/docs/ac/ams/inquirydeclare)
*   [扣款](https://global.alipay.com/docs/ac/ams/capture)

自动扣款

*   [咨询](https://global.alipay.com/docs/ac/ams/authconsult)
*   [申请令牌](https://global.alipay.com/docs/ac/ams/accesstokenapp)
*   [撤销授权](https://global.alipay.com/docs/ac/ams/authrevocation)
*   [支付](https://global.alipay.com/docs/ac/ams/payment_agreement)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri_online)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc_online)
*   [退款](https://global.alipay.com/docs/ac/ams/refund_online)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir_online)
*   [申报](https://global.alipay.com/docs/ac/ams/declare)
*   [查询申报请求](https://global.alipay.com/docs/ac/ams/inquirydeclare)

**注意**: 在线支付产品的通知: [notifyPayment](https://global.alipay.com/docs/ac/ams/paymentrn_online), [notifyAuthorization](http://global.alipay.com/docs/ac/ams/notifyauth), [notifyRefund](https://global.alipay.com/docs/ac/ams/notify_refund), [notifyCapture](https://global.alipay.com/docs/ac/ams/notify_capture), 和 [notifyDispute](https://global.alipay.com/docs/ac/ams/notify_dispute).

### 店内支付

用户出示模式支付

*   [pay](https://global.alipay.com/docs/ac/ams/upm) - 支付
*   [inquiryPayment](https://global.alipay.com/docs/ac/ams/paymentri) - 查询支付
*   [cancel](https://global.alipay.com/docs/ac/ams/paymentc) - 取消支付
*   [refund](https://global.alipay.com/docs/ac/ams/refund) - 退款
*   [inquiryRefund](https://global.alipay.com/docs/ac/ams/ir) - 查询退款
*   [registration](https://global.alipay.com/docs/ac/ams/registration) - 注册
*   [inquiryRegistrationStatus](https://global.alipay.com/docs/ac/ams/irs) - 查询注册状态
*   [inquiryRegistrationInfo](https://global.alipay.com/docs/ac/ams/iri) - 查询注册信息

订单码支付

*   [支付](https://global.alipay.com/docs/ac/ams/oc)
*   [查询支付状态](https://global.alipay.com/docs/ac/ams/oc)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc)
*   [退款](https://global.alipay.com/docs/ac/ams/refund)
*   [查询退款状态](https://global.alipay.com/docs/ac/ams/ir)
*   [注册订单码](https://global.alipay.com/docs/ac/ams/registration)
*   [查询注册状态](https://global.alipay.com/docs/ac/ams/irs)
*   [查询注册信息](https://global.alipay.com/docs/ac/ams/iri)

入口码支付

*   [支付](https://global.alipay.com/docs/ac/ams/ec)
*   [查询支付](https://global.alipay.com/docs/ac/ams/paymentri)
*   [取消支付](https://global.alipay.com/docs/ac/ams/paymentc)
*   [退款](https://global.alipay.com/docs/ac/ams/refund)
*   [查询退款](https://global.alipay.com/docs/ac/ams/ir)
*   [注册](https://global.alipay.com/docs/ac/ams/registration)
*   [查询注册状态](https://global.alipay.com/docs/ac/ams/irs)
*   [查询注册信息](https://global.alipay.com/docs/ac/ams/iri)

**注意**: 店内支付产品的通知:
*   [支付通知](https://global.alipay.com/docs/ac/ams/paymentrn)
*   [注册状态通知](https://global.alipay.com/docs/ac/ams/nrs)

#### 这个页面是否有帮助？

![图片 9](https://ac.alipay.com/storage/2021/5/20/19b2c126-9442-4f16-8f20-e539b1db482a.png) ![图片 10](https://ac.alipay.com/storage/2021/5/20/e9f3f154-dbf0-455f-89f0-b3d4e0c14481.png)

@2024 支付宝 [法律信息](https://global.alipay.com/docs/ac/platform/membership)

请注意，此文本仅提供了链接到支付宝法律信息的参考，并未包含文档的具体内容。要查看完整的法律信息，请访问提供的链接。
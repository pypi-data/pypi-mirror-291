# image: python:3.11

variables:
    PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"
    
cache:
    paths:
        - .cache/pip
        
before_script:
    - echo "ğŸš¨ Initializing test protocols...ğŸ‘ï¸"
    - $Env:Path = "C:\Users\FatBat\AppData\Local\Programs\Python\Python311;C:\Users\FatBat\.local\bin;C:\Users\FatBat\AppData\Local\Programs\Python\Python311\Scripts;$($Env:Path)"
    - echo "ğŸŸ© $(python --version)"
    - echo "ğŸŸ© $(python -m pip --version)"
    - echo "ğŸŸ© pipx $(pipx --version)"
    - echo "ğŸŸ© $(hatch --version)"
    - hatch clean
    - hatch env prune

lint:
    stage: test
    script:
        - echo "Welcome to the 'Tests' ğŸ‘¤ Let's start by Ruffing it up a bit. ğŸ¥Š"
        - hatch fmt
        - echo "Well done! ğŸ‘ You've survived. How do you feel about snakes? ğŸ"

versions:
    stage: test 
    script:
        - echo "Get passed these five snakes ğŸ unscathed, and you're all but on your way ğŸ‘"
        - hatch run python:all
        - echo "Truly! A Marvel! ğŸ•º A rare feat indeed."
        
docs:
    stage: test
    script: 
        - echo "Now! We're just going to make sure that your documents are all in order... ğŸ§"
        - hatch run docs:build
        - echo "Excellent! ğŸ‰ All is indeed in order. Bye now ğŸ‘‹ğŸ˜ˆ"